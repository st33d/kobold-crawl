var storyContent = ï»¿{"inkVersion":19,"root":[[{"#":"author: Aaron Steed"},{"#":"title: Kobold Crawl"},"\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\n",{"->":"new_room"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"setRoomIndex":["ev",{"VAR?":"depth"},"/ev",{"VAR=":"room_index","re":true},"ev","void","/ev","~ret",{"#f":1}],"changeRooms":["ev","void","/ev","~ret",{"#f":1}],"navigate":[["ev","str","^Go back.","/str",{"VAR?":"depth"},0,">","/ev",{"*":".^.c-0","flg":5},"ev","str","^Go deeper.","/str",{"VAR?":"isEnding"},"!","/ev",{"*":".^.c-1","flg":5},{"c-0":["^ ",{"->":"go_back"},"\n",{"#f":5}],"c-1":["^ ",{"->":"go_deeper"},"\n",{"#f":5}]}],{"#f":1}],"go_back":["ev",-1,"/ev",{"VAR=":"direction","re":true},"ev",{"VAR?":"depth"},1,"-",{"VAR=":"depth","re":true},"/ev","ev",{"VAR?":"isReachedCenter"},{"VAR?":"depth"},0,">","&&",{"VAR?":"lucky"},"&&","/ev",[{"->":".^.b","c":true},{"b":["\n","thread",{"->":"passages.lucky_return"},{"->":".^.^.^.20"},null]}],"nop","\n",{"->":"new_room"},{"#f":1}],"go_deeper":["ev",1,"/ev",{"VAR=":"direction","re":true},"ev",{"VAR?":"depth"},1,"+",{"VAR=":"depth","re":true},"/ev","ev",{"VAR?":"depth"},{"VAR?":"depth_lowest"},">","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"depth"},"/ev",{"VAR=":"depth_lowest","re":true},"thread",{"->":"passages"},{"->":".^.^.^.16"},null]}],"nop","\n",{"->":"new_room"},{"#f":1}],"go_direction":[{"temp=":"change"},"ev",{"VAR?":"direction"},{"VAR?":"change"},"*","/ev",{"VAR=":"direction","re":true},["ev",{"VAR?":"direction"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"go_deeper"},{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"go_back"},{"->":".^.^.^.9"},null]}],"nop","\n",{"#f":1}],"new_room":[{"->":"new_room_game"},{"#f":1}],"new_room_game":["ev",{"x()":"setRoomIndex"},"pop","/ev","\n","ev",0,"/ev",{"VAR=":"isEnding","re":true},"ev",{"VAR?":"room_index"},"/ev",["du","ev",0,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"entrance"},{"->":".^.^.^.46"},null]}],["du","ev",1,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"canary"},{"->":".^.^.^.46"},null]}],["du","ev",2,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"bowl_of_water"},{"->":".^.^.^.46"},null]}],["du","ev",3,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"trip_room"},{"->":".^.^.^.46"},null]}],["du","ev",4,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"grindstone"},{"->":".^.^.^.46"},null]}],["du","ev",5,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"ghost_room"},{"->":".^.^.^.46"},null]}],["du","ev",6,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"fresco"},{"->":".^.^.^.46"},null]}],["du","ev",7,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"plinth"},{"->":".^.^.^.46"},null]}],["du","ev",8,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"grease"},{"->":".^.^.^.46"},null]}],["du","ev",9,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"clicker"},{"->":".^.^.^.46"},null]}],["du","ev",10,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"finger"},{"->":".^.^.^.46"},null]}],["du","ev",11,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"right_left_slam"},{"->":".^.^.^.46"},null]}],["du","ev",12,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"food_table"},{"->":".^.^.^.46"},null]}],["du","ev",13,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"library"},{"->":".^.^.^.46"},null]}],["du","ev",14,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"ceiling"},{"->":".^.^.^.46"},null]}],["du","ev",15,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"invisible_wall"},{"->":".^.^.^.46"},null]}],["du","ev",16,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"windy"},{"->":".^.^.^.46"},null]}],["du","ev",17,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"falconsloth"},{"->":".^.^.^.46"},null]}],["du","ev",18,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"blades"},{"->":".^.^.^.46"},null]}],["du","ev",19,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"windmill"},{"->":".^.^.^.46"},null]}],["du","ev",20,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"eye_thing"},{"->":".^.^.^.46"},null]}],["du","ev",21,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"nim_troll"},{"->":".^.^.^.46"},null]}],["du","ev",22,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"drinks_bar"},{"->":".^.^.^.46"},null]}],["du","ev",23,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"flies"},{"->":".^.^.^.46"},null]}],["du","ev",24,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"mist"},{"->":".^.^.^.46"},null]}],["du","ev",25,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"quaid_doubler"},{"->":".^.^.^.46"},null]}],["du","ev",26,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"suit_of_armour"},{"->":".^.^.^.46"},null]}],["du","ev",27,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"beligerent_huff"},{"->":".^.^.^.46"},null]}],["du","ev",28,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"black_pool"},{"->":".^.^.^.46"},null]}],["du","ev",29,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"custard"},{"->":".^.^.^.46"},null]}],["du","ev",30,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"hands"},{"->":".^.^.^.46"},null]}],["du","ev",31,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"pudding"},{"->":".^.^.^.46"},null]}],["du","ev",32,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"toadstools"},{"->":".^.^.^.46"},null]}],[{"->":".^.b"},{"b":["pop","\n","ev",1,"/ev",{"VAR=":"isEnding","re":true},"ev",1,"/ev",{"VAR=":"isReachedCenter","re":true},{"->":"center"},{"->":".^.^.^.46"},null]}],"nop","\n",{"#f":1}],"new_room_debug":["ev",{"x()":"setRoomIndex"},"pop","/ev","\n","ev",0,"/ev",{"VAR=":"isEnding","re":true},"ev",{"VAR?":"room_index"},"/ev",["du","ev",0,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"room1"},{"->":".^.^.^.19"},null]}],["du","ev",1,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"center"},{"->":".^.^.^.19"},null]}],["du","ev",2,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"room2"},{"->":".^.^.^.19"},null]}],["du","ev",3,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"room3"},{"->":".^.^.^.19"},null]}],["du","ev",4,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"room4"},{"->":".^.^.^.19"},null]}],["du","ev",5,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":"room5"},{"->":".^.^.^.19"},null]}],[{"->":".^.b"},{"b":["pop","\n","ev",1,"/ev",{"VAR=":"isEnding","re":true},"ev",1,"/ev",{"VAR=":"isReachedCenter","re":true},{"->":"room_end"},{"->":".^.^.^.19"},null]}],"nop","\n",{"#f":1}],"room1":["ev","str","^Room 1","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},"^1 ",{"->":"navigate"},"\n",{"#f":1}],"room2":["ev","str","^Room 2","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},"^2 ",{"->":"navigate"},"\n",{"#f":1}],"room3":["ev","str","^Room 3","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},"^3 ",{"->":"navigate"},"\n",{"#f":1}],"room4":["ev","str","^Room 4","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},"^4 ",{"->":"navigate"},"\n",{"#f":1}],"room5":["ev","str","^Room 5","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},"^5 ",{"->":"navigate"},"\n",{"#f":1}],"room_end":["ev","str","^End","/str",{"CNT?":"room1"},"/ev","thread",{"->":"title"},"^End of maze. ",{"->":"navigate"},"\n",{"#f":1}],"entrance":[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":[["^This is a \"depth crawl\". You only <i>go deeper</i> into the maze or <i>go back</i>. Each step deeper chooses a room at random, and each step deeper increases the chance of finding the center.","\n","^You have ","ev",{"VAR?":"stamina"},"out","/ev","^ points of Stamina, be careful not to lose them all.","\n","^Sometimes a choice may have a chance of success.","\n","ev",50,"/ev",{"temp=":"chance"},"ev","str","^I understand (%","ev",{"VAR?":"chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","ev",{"VAR?":"chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You succeeded at understanding. Let's begin.","\n",{"->":"entrance.story"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"entrance.sure"},{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":5}]}],{"#f":1}],"sure":[["^You failed. Are you sure you sure you understand?","\n","ev","str","^Yes.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","^You understand. Let's begin.","\n",{"->":"entrance.story"},{"#f":5}]}],{"#f":1}],"story":[["^<h1>*</h1>","\n","^The kobolds of your tribe look like ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^humanoid dragons, though three feet tall and without the wings",{"->":".^.^.17"},null],"s1":["pop","^short scaly dog people",{"->":".^.^.17"},null],"#f":5}],"^. You are indentured to Maze Builders of Kreik who use your kind to lay their bricks, guard their treasures, and test their traps. Your job is the last of these.","\n","ev","str","^So it goes.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^<hr>","\n","^<h3>Entrance</h3>","\n","^You stand at the entrance of a labyrinth. Your task is to get to the center, take a golden apple from the tree therein, and bring it back. You are allowed to keep any gold or treasures you find along the way as payment. A knapsack hangs from your shoulder to keep them in.","\n","^Future victims are expected to be armed, so you have been given a spear to add realism to your death.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"returning":["ev","str","^Entrance","/str",{"CNT?":".^.^"},"/ev","thread",{"->":"title"},"^You return to the entrance of the labyrinth.","\n",["ev",{"VAR?":"inventory"},{"VAR?":"bird"},"?","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^A small yellow bird flies out of the maze. You watch it disappear into the caverns, not knowing if it will return.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.11"},null]}],"nop","\n",["ev",{"VAR?":"inventory"},{"VAR?":"golden_apple"},"?","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"entrance.win"},{"->":".^.^.^.15"},null]}],[{"->":".^.b"},{"b":["\n","thread",{"->":"entrance.sentry"},{"->":".^.^.^.15"},null]}],"nop","\n",{"->":"navigate"},{"#f":1}],"sentry":[["ev",{"CNT?":".^.^.^.sentry_opt.0.c-1"},"/ev",{"->":".^.b","c":true},{"b":["\n","^The guard gives you a polite nod.","\n",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^A tall kobold wielding an axe stands watch.",{"->":".^.^.17"},null],"s1":["pop","^The sentry frowns at your return.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.2"},null]}],"nop","\n",{"->":".^.^.sentry_opt"},{"#f":1}],"sentry_opt":[[["ev",{"^->":"entrance.sentry_opt.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Can I go now?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"entrance.sentry_opt.0.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":18},{"s":["^\"Any advice?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"entrance.sentry_opt.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"CNT?":".^.^.c-1"},"/ev",{"*":".^.^.c-2","flg":19},{"s":["^\"Anything else?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"entrance.sentry_opt.0.3.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"CNT?":".^.^.c-2"},"/ev",{"*":".^.^.c-3","flg":23},{"s":["^\"Thanks for the advice",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"entrance.sentry_opt.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"Not without proof you've solved the labyrinth\", they reply. And they rap the floor with the butt of their large axe handle to add punctuation to their command.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-1":["ev",{"^->":"entrance.sentry_opt.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^ you ask.","\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^\"Hrmm...\" The guard thinks this over, as if unsure it's appropriate. But then they shrug, you are a fellow kobold after all. \"Well, you'll end up in trouble if you investigate everything - but you'll find shortcuts between rooms if you do. It will get you to the center quicker.\"","\n","^The guard taps its snout as it says the last bit.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-2":["ev",{"^->":"entrance.sentry_opt.0.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"^ you ask once more.","\n","^\"Yeah, just one thing\", they reply, \"the builders said that some stuff in there can make you lucky for a while, at least until the next time your luck is tested.\"","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-3":["ev",{"^->":"entrance.sentry_opt.0.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.3.s"},[{"#n":"$r2"}],"^\", you say.","\n","^The sentry gives you a wink in reply.","\n","ev",1,"/ev",{"VAR=":"lucky","re":true},"thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"win":["^You've won.","\n","^You left the labyrinth with:","\n","ev",{"VAR?":"stamina"},"out","/ev","^ stamina point","ev",{"VAR?":"stamina"},1,"!=","/ev",[{"->":".^.b","c":true},{"b":["^s",{"->":".^.^.^.15"},null]}],"nop","^.","\n","ev",{"VAR?":"gold"},"out","/ev","^ gold coin","ev",{"VAR?":"gold"},1,"!=","/ev",[{"->":".^.b","c":true},{"b":["^s",{"->":".^.^.^.29"},null]}],"nop","^.","\n",["ev",{"VAR?":"inventory"},{"VAR?":"another_apple"},"?","/ev",{"->":".^.b","c":true},{"b":["\n","^2 golden apples.","\n",{"->":".^.^.^.34"},null]}],[{"->":".^.b"},{"b":["\n","^A golden apple.","\n",{"->":".^.^.^.34"},null]}],"nop","\n",["ev",{"VAR?":"inventory"},{"VAR?":"multipass"},"?","/ev",{"->":".^.b","c":true},{"b":["\n","^An all-labyrinths VIP pass.","\n",{"->":".^.^.^.37"},null]}],"nop","\n",["ev",{"VAR?":"inventory"},{"CNT?":"canary"},"?","/ev",{"->":".^.b","c":true},{"b":["\n","^A canary.","\n",{"->":".^.^.^.40"},null]}],"nop","\n","^And was enlightened ","ev",{"VAR?":"wisdom"},"out","/ev","^ time","ev",{"VAR?":"wisdom"},1,"!=","/ev",[{"->":".^.b","c":true},{"b":["^s",{"->":".^.^.^.54"},null]}],"nop","^.","\n","^Thank you for playing.","\n","end",{"#f":1}],"#f":1}],"center":["ev","str","^The Center","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"center.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"center.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter the center of the labyrinth.","\n","^The ground is covered in small flat pebbles, dotted with large smooth boulders that come up to your knees.","\n","^As foretold there is a large tree. It is either petrified or carved out of stone, you cannot tell which. Its boughs appear weighed down by its fruit - golden apples. You reach up and pluck one of the fruit with a twist of your hand. You hear a sharp crack as stem of stone breaks. Then you put it in your bag.","\n","^There's a stone bench here, of the sort with a back rest that one would see in a park. A metal lunch box sits on it. The bench bears a plaque that says:","\n","^<i>Take a break, you've earned it.</i>","\n","^You're not entirely sure if this message is for you, or if it's a trick. You open the lunch box, inside you find a cheese sandwich.","\n","ev",{"VAR?":"inventory"},{"VAR?":"golden_apple"},"+",{"VAR=":"inventory","re":true},"/ev","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"returning":["^You return to the center of the labyrinth. ","ev",{"VAR?":"inventory"},{"VAR?":"another_apple"},"?","/ev",[{"->":".^.b","c":true},{"b":[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You consider taking a third apple but you're in enough trouble already.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],{"->":".^.^.^.7"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Take a break.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Take another apple.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":[{"->":"center.break_time"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"inventory"},{"VAR?":"another_apple"},"+",{"VAR=":"inventory","re":true},"/ev","ev",{"x()":"changeRooms"},"pop","/ev","\n","^You reach up and snap another apple from the tree. They said you could keep what you found and there's room in your knapsack for another.","\n","^In the distance you hear the rough grinding of stone. Through the entrance you see the walls shift and lock into a new position. The labyrinth has changed. Perhaps you shouldn't have done that.","\n","^You bag the apple. What's done is done.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"break_time":[["^You sit down and take a well deserved rest. Even going so far as to eat the cheese sandwich. It's surprisingly good.","\n",["ev",{"VAR?":"stamina"},5,"<","/ev",{"->":".^.b","c":true},{"b":["\n","ev",5,{"f()":"gainStamina"},"pop","/ev","\n",{"->":".^.^.^.3"},null]}],"nop","\n","ev",{"VAR?":"inventory"},{"VAR?":"multipass"},"+",{"VAR=":"inventory","re":true},"/ev","ev",1,"/ev",{"VAR=":"lucky","re":true},"^After some minutes pass you're startled by a visitor. A Maze Builder of Kreik emerges from a nearby wall, moving through the stone as if wading through a shallow pool.","\n","^Like the others you've seen, this one has two long arms and two shorter arms about its ribs. It stands on two longs legs with two shorter legs emerging from its hips, the latter gently kick the air as it walks. It has red scaly skin and looks down on your with two pairs of eyes.","\n","^You feel a bit embarrassed at having been caught slacking off.","\n","ev","str","^Apologise.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Present ","ev",{"VAR?":"inventory"},{"VAR?":"another_apple"},"?","/ev",[{"->":".^.b","c":true},{"b":["^a",{"->":".^.^.^.37"},null]}],[{"->":".^.b"},{"b":["^the",{"->":".^.^.^.37"},null]}],"nop","^ golden apple.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^You open your mouth to apologise but the Maze Builder raises a hand to shush you. It's kind look twlls you there is nothing to be sorry for, you made it to the center after all.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^You take out ","ev",{"VAR?":"inventory"},{"VAR?":"another_apple"},"?","/ev",[{"->":".^.b","c":true},{"b":["^a",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["^the",{"->":".^.^.^.9"},null]}],"nop","^ golden apple to show the Maze Builder. It raises a hand and gives you a look that says, yes you've gotten to the center.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^The Maze Builder picks up a handful of pebbles from the floor and they melt in its hand. They reform into an obsidian tablet hanging from what appears to be a lanyard made of grey materials. It hands the object to you.","\n",["ev","str","^Examine the object.","/str","/ev",{"*":".^.c-2","flg":20},["ev",{"^->":"center.break_time.0.g-0.pass.6.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-3","flg":22},{"s":["^\"Thanks",{"->":"$r","var":true},null]}],{"*":".^.c-4","flg":24},{"c-2":["\n","^You appraise your gift. The lanyard feels cold, it must be made of stone yet the ribbon moves like cloth. The obsidian tablet has an engraved illustration of a kobold on it. It looks a lot like you. Below it are etched runes that give off a faint red glow.","\n","^The thing oozes authority.","\n",{"->":".^.^"},{"->":".^.^.^.^.g-1"},{"#f":5}],"c-3":["ev",{"^->":"center.break_time.0.g-0.pass.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.6.s"},[{"#n":"$r2"}],"^\", you say.","\n","^The Maze Builder simply nods. It looks about for a second and breathes a dissappointed sigh. Clearly this maze is not deadly enough.","\n",{"->":".^.^"},{"->":".^.^.^.^.g-1"},{"#f":5}],"c-4":["\n",{"->":".^.^.^.^.g-1"},{"#f":5}],"#f":5,"#n":"pass"}],{"#f":5}],"g-1":["^The creature turns from you then and gestures back into the labyrinth, your task is only half done. Then it walks back into the walls, its lesser arms and legs appearing to pull aside some inner fabric of the rock to allow it to pass.","\n","^You're left to alone to plan your route back.","\n","thread",{"->":"center.opt"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"#f":1}],"template":["ev","str","^","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^First visit","\n","thread",{"->":".^.^.opt"},"ev","void","/ev","->->",{"#f":1}],"opt":[[["ev",{"^->":"template.opt.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^a.",{"->":"$r","var":true},null]}],["ev",{"^->":"template.opt.0.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":2},{"s":["^b.",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"template.opt.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ You chose a.","\n",{"->":"navigate"},{"#f":5}],"c-1":["ev",{"^->":"template.opt.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^ You chose b.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"opt_chance":[["ev",70,"/ev",{"temp=":"chance"},"ev","str","^Attack. (%","ev",{"VAR?":"chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Alt Attack. (%","ev",{"VAR?":"chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^Let's do this...","\n","ev",{"VAR?":"chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"template.success"},{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"template.failure"},{"->":".^.^.^.10"},null]}],"nop","\n",{"#f":5}],"c-1":["\n","^Let's do this...","\n","ev",{"VAR?":"chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^win","\n",{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^yay","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^nay","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.10"},null]}],"nop","\n","ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"success":["^Hooray","\n","ev","void","/ev","->->",{"#f":1}],"failure":["ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^Dead. ","end","\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","^Ouch.","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev","void","/ev","->->",{"#f":1}],"returning":["^You return.","\n","ev","void","/ev","->->",{"#f":1}],"#f":1}],"passages":[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^<hr>","\n","^You step inside the maze.","\n","^The structure is a morass of prefabricated corridors and rooms. The walls, floor, and ceiling are a cold grey stone. Soon you encounter your first challenge...","\n","done",{"#f":1}],"returning":["^<hr>","\n",["ev",{"VAR?":"room_index"},22,">=","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You leave a room you're sure is near the center of the maze. Though the route ahead may lead away from it.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.3"},null]}],"nop","\n",["ev",{"VAR?":"wisdom"},{"VAR?":"wisdom_prev"},">","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"wisdom"},"/ev",{"VAR=":"wisdom_prev","re":true},["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^As you venture into the corridors you find a loose wall and push it aside to make a shortcut.",{"->":".^.^.23"},null],"s1":["pop","^In the passages between rooms you find a button on a wall. You press it and the wall in front of you slides into the floor.",{"->":".^.^.23"},null],"s2":["pop","^Once more in the maze's conduits, you find a grating at the bottom of a wall, ventilating the passages. It comes off easily and provides a faster route through the labyrinth.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",4,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"nop",{"s0":["pop","^The corridor ahead branches, you take the ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^right",{"->":".^.^.17"},null],"s1":["pop","^left",{"->":".^.^.17"},null],"#f":5}],"^ one.",{"->":".^.^.29"},null],"s1":["pop","^The passage ahead leads to a dead end. You're forced to backtrack and take another route.",{"->":".^.^.29"},null],"s2":["pop","^You leave and enter the maze of passages.",{"->":".^.^.29"},null],"s3":["pop","^You enter the corridors and take several ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^right",{"->":".^.^.17"},null],"s1":["pop","^left",{"->":".^.^.17"},null],"#f":5}],"^ turns before you realise you're going in circles. Then you take another ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^right",{"->":".^.^.17"},null],"s1":["pop","^left",{"->":".^.^.17"},null],"#f":5}],"^ into a new room.",{"->":".^.^.29"},null],"#f":5}],"\n",{"->":".^.^.^.7"},null]}],"nop","\n",["ev",{"VAR?":"depth"},{"VAR?":"wisdom"},"+",16,">=","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You must have passed the halfway point by now.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.10"},null]}],"nop","\n","done",{"#f":1}],"lucky_return":["ev",0,"/ev",{"VAR=":"lucky","re":true},"ev",{"VAR?":"depth"},1,"-",{"VAR=":"depth","re":true},"/ev",["ev",{"VAR?":"depth"},0,"<","/ev",{"->":".^.b","c":true},{"b":["\n","ev",0,"/ev",{"VAR=":"depth","re":true},{"->":".^.^.^.11"},null]}],"nop","\n","^<hr>","\n","^On your way back ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^the floor opens up beaneath you dropping you into a chute. You land in a familiar corridor.",{"->":".^.^.17"},null],"s1":["pop","^the air sparkles around you and you teleport into a passage you've seen before.",{"->":".^.^.17"},null],"#f":5}],"^ You've ended up nearer the entrance somehow.","\n","done",{"#f":1}],"#f":1}],"cameFrom":[{"temp=":"x"},"ev",{"VAR?":"x"},"turns",0,"==","/ev","~ret","\n",{"#f":1}],"oxfordList":[{"temp=":"if_empty"},{"temp=":"list"},"ev",{"VAR?":"list"},"LIST_COUNT","/ev",["du","ev",2,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"list"},"LIST_MIN","out","/ev","^ and ","ev",{"VAR?":"list"},{"VAR?":"list"},"LIST_MIN","-",{"VAR?":"if_empty"},{"f()":"listWithCommas"},"out","/ev","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["pop","\n","ev",{"VAR?":"list"},{"VAR?":"if_empty"},{"f()":"listWithCommas"},"pop","/ev","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":1}],"listWithCommas":[{"temp=":"if_empty"},{"temp=":"list"},"ev",{"VAR?":"list"},"LIST_COUNT","/ev",["du","ev",2,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"list"},"LIST_MIN","out","/ev","^, and ","ev",{"VAR?":"list"},{"VAR?":"list"},"LIST_MIN","-",{"VAR?":"if_empty"},{"f()":".^.^.^"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],["du","ev",1,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"list"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],["du","ev",0,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"if_empty"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["pop","\n","ev",{"VAR?":"list"},"LIST_MIN","out","/ev","^, ","ev",{"VAR?":"list"},{"VAR?":"list"},"LIST_MIN","-",{"VAR?":"if_empty"},{"f()":".^.^.^"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],"nop","\n",{"#f":1}],"getChance":[{"temp=":"value"},{"temp=":"list"},{"temp=":"base"},"ev",{"VAR?":"list"},"LIST_COUNT",0,"==","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"base"},"/ev","~ret",{"->":".^.^.^.10"},null]}],"nop","\n","ev",{"VAR?":"inventory"},{"VAR?":"list"},"LIST_MIN","?","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"base"},{"VAR?":"value"},"+",{"VAR?":"list"},{"VAR?":"list"},"LIST_MIN","-",{"VAR?":"value"},{"f()":".^.^.^"},"/ev","~ret","\n",{"->":".^.^.^.19"},null]}],"nop","\n","ev",{"VAR?":"base"},"/ev","~ret",{"#f":1}],"clamp":[{"temp=":"max"},{"temp=":"min"},{"temp=":"value"},["ev",{"VAR?":"value"},{"VAR?":"min"},"<","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"min"},"/ev","~ret",{"->":"clamp.6"},null]}],["ev",{"VAR?":"value"},{"VAR?":"max"},">","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"max"},"/ev","~ret",{"->":"clamp.6"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"value"},"/ev","~ret",{"->":"clamp.6"},null]}],"nop","\n",{"#f":1}],"loseStamina":["ev",{"VAR?":"stamina"},1,"-",{"VAR=":"stamina","re":true},"/ev","^<i>lost 1 stamina, ","ev",{"VAR?":"stamina"},"out","/ev","^ remain</i>","\n",{"#f":1}],"gainStamina":[{"temp=":"value"},"ev",{"VAR?":"stamina"},"/ev",{"temp=":"current"},"ev",{"VAR?":"stamina"},{"VAR?":"value"},"+",{"VAR=":"stamina","re":true},"/ev","ev",{"VAR?":"stamina"},5,">","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",5,"/ev",{"VAR=":"stamina","re":true},{"->":".^.^.^.17"},null]}],"nop","\n","^<i>gained ","ev",{"VAR?":"stamina"},{"VAR?":"current"},"-","out","/ev","^ stamina, ","ev",{"VAR?":"stamina"},"out","/ev","^ total</i>","\n",{"#f":1}],"tensOf":[{"temp=":"n"},"ev",{"VAR?":"n"},10,"<","/ev",[{"->":".^.b","c":true},{"b":["^0","ev",{"VAR?":"n"},"out","/ev",{"->":"tensOf.8"},null]}],[{"->":".^.b"},{"b":["ev",{"VAR?":"n"},"out","/ev",{"->":"tensOf.8"},null]}],"nop","\n",{"#f":1}],"loot":[{"temp=":"max"},{"temp=":"min"},"ev",{"VAR?":"min"},{"VAR?":"max"},"rnd","/ev",{"temp=":"c"},"\n","ev",{"VAR?":"gold"},{"VAR?":"c"},"+",{"VAR=":"gold","re":true},"/ev","ev",{"VAR?":"c"},"/ev","~ret",{"#f":1}],"title":[{"temp=":"knot"},{"temp=":"name"},"^<hr>","\n","^<center><h3>","ev",{"VAR?":"name"},"out","/ev","^ ","<>","\n",["ev",{"VAR?":"knot"},1,">","/ev",{"->":".^.b","c":true},{"b":["\n","^(","ev",{"VAR?":"knot"},"out","/ev","ev",{"VAR?":"knot"},{"f()":"ordinal"},"out","/ev","^ visit)","\n",{"->":"title.13"},null]}],"nop","\n","^</h3></center>","\n","done",{"#f":1}],"ordinal":[{"temp=":"n"},"ev",{"VAR?":"n"},10,"%","/ev",{"temp=":"n","re":true},["ev",{"VAR?":"n"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^st","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],["ev",{"VAR?":"n"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^nd","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],["ev",{"VAR?":"n"},3,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^rd","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],[{"->":".^.b"},{"b":["\n","ev","str","^th","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],"nop","\n",{"#f":1}],"rollChance":[{"temp=":"perc"},"ev",1,100,"rnd","/ev",{"temp=":"roll"},"\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",0,"/ev",{"VAR=":"lucky","re":true},"ev",1,{"VAR?":"perc"},"rnd","/ev",{"temp=":"roll","re":true},"\n",{"->":".^.^.^.9"},null]}],"nop","\n","ev",{"VAR?":"roll"},{"VAR?":"perc"},"<=","/ev",{"VAR=":"isSuccess","re":true},"^<i>","ev",{"VAR?":"roll"},{"f()":"tensOf"},"out","/ev","^/","ev",{"VAR?":"perc"},{"f()":"tensOf"},"out","/ev","^: ","ev",{"VAR?":"isSuccess"},"/ev",[{"->":".^.b","c":true},{"b":["^Success",{"->":".^.^.^.35"},null]}],[{"->":".^.b"},{"b":["^Failure",{"->":".^.^.^.35"},null]}],"nop","^</i>","\n","done",{"#f":1}],"exitOption":[["ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ","ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"pickOne":[{"temp=":"b"},{"temp=":"a"},"ev",0,1,"rnd","/ev",{"temp=":"r"},"\n",["ev",{"VAR?":"r"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"a"},"/ev","~ret",{"->":".^.^.^.11"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"b"},"/ev","~ret",{"->":".^.^.^.11"},null]}],"nop","\n",{"#f":1}],"suit_of_armour":["ev","str","^Armour","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You see a suit of black armour that stands in the center of the room. Wisps of mist leak from the joins between the plates. It turns to look at you with an open face helmet filled with nothing but smoke. Then it thuds towards you.","\n",{"->":".^.^.opt"},{"#f":1}],"returning":["^You return to the room with the black suit of armour. ","<>","\n",["ev",{"CNT?":".^.^.^.attack_success"},1,">","/ev",{"->":".^.b","c":true},{"b":["\n","^It lies in pieces across the floor, quietly hissing discontent.","\n",{"->":"navigate"},{"->":".^.^.^.6"},null]}],["ev",{"CNT?":".^.^.^.attack_success"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It stands guard, its arms on the floor. Angry smoke churns out of its arm sockets and helmet.","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.6"},null]}],["ev",{"CNT?":".^.^.^.attack_success"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It moves to intercept you, arms wide for a deadly embrace.","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.6"},null]}],"nop","\n",{"#f":1}],"opt":[["ev",70,{"CNT?":".^.^.^.attack_success"},10,"*","+","/ev",{"temp=":"chance_flee"},"ev",50,{"CNT?":".^.^.^.attack_success"},10,"*","+","/ev",{"temp=":"chance_attack"},"ev","str","^Run past it. (%","ev",{"VAR?":"chance_flee"},"out","/ev","^)","/str",{"CNT?":".^.^.^.attack_success"},2,"<","/ev",{"*":".^.c-0","flg":5},"ev","str","^Attack. (%","ev",{"VAR?":"chance_attack"},"out","/ev","^)","/str",{"CNT?":".^.^.^.attack_success"},2,"<","/ev",{"*":".^.c-1","flg":5},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","ev",{"VAR?":"chance_flee"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.^.^.flee_success"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.^.^.^.flee_failure"},{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":5}],"c-1":["\n","^You raise your spear and approach the armour...","\n","ev",{"VAR?":"chance_attack"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.^.^.attack_success"},{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.^.^.^.attack_failure"},{"->":".^.^.^.10"},null]}],"nop","\n",{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"flee_failure":[["ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^With a tackle it knocks you to the ground. You're too tired to fight as it climbs on top of you and brings steel ","ev",{"CNT?":".^.^.^.^.^.attack_success"},1,"<","/ev",[{"->":".^.b","c":true},{"b":["^fists",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["^boots",{"->":".^.^.^.9"},null]}],"nop","^ to bear upon your already broken body. ","end","\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n",["ev",{"CNT?":".^.^.^.^.^.^.attack_success"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It manges to cuff you with one of its metal gauntlets as you pass.","\n",{"->":".^.^.^.3"},null]}],["ev",{"CNT?":".^.^.^.^.^.^.attack_success"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It kicks your tail with a steely boot you as you pass.","\n",{"->":".^.^.^.3"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"flee_success":[["^It tries to block your path but you fake a ",["ev","visit",2,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^left",{"->":".^.^.17"},null],"s1":["pop","^right",{"->":".^.^.17"},null],"#f":5}],"^ and dodge it easily.","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"attack_success":[["ev",{"CNT?":".^.^"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You run around the back of the plated monstrosity and unhook the clasps that hold its arms on. They clatter to the floor. The armour turns around, looking helplessly at its former limbs, and then at you.","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.2"},null]}],["ev",{"CNT?":".^.^"},1,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You get around to the side of the suit and with a great breath you blow into a smoking arm socket as hard as you can. Mist gushes out of the other side with a wailing noise before the whole suit falls to pieces.","\n",{"->":".^.^.^.^.win"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"attack_failure":["ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n",["ev",{"CNT?":".^.^.^.^.^.attack_success"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It snatches the spear off of you with surprising strength before levelling it at your chest. You try to dodge but it skewers you with your own weapon. Your death certainly has the realism the spear was meant for.","\n",{"->":".^.^.^.3"},null]}],["ev",{"CNT?":".^.^.^.^.^.attack_success"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^With surprising flexibility it performs a roundhouse kick to your head. Theres a disturbing period of darkness before you wake up on the floor. Only to see a metal boot stamp on your face.","\n",{"->":".^.^.^.3"},null]}],"nop","\n","end",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n",["ev",{"CNT?":".^.^.^.^.^.attack_success"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^The suit ",["ev","visit",2,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^bats it aside and punches you in the snout",{"->":".^.^.17"},null],"s1":["pop","^weaves to your ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^right",{"->":".^.^.17"},null],"s1":["pop","^left",{"->":".^.^.17"},null],"#f":5}],"^ and punches you the ribs",{"->":".^.^.17"},null],"#f":5}],"^.","\n",{"->":".^.^.^.3"},null]}],["ev",{"CNT?":".^.^.^.^.^.attack_success"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^With deft feet ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^it manages to kick you in the shins ","ev",3,5,"rnd","out","/ev","^ times",{"->":".^.^.17"},null],"s1":["pop","^it kicks you in the guts, making you stumble",{"->":".^.^.17"},null],"#f":5}],"^.","\n",{"->":".^.^.^.3"},null]}],"nop","\n","ev",{"VAR?":"stamina"},5,2,"/","==","/ev",[{"->":".^.b","c":true},{"b":["^ You stagger from your injuries. You're not sure you can take much more of this.",{"->":".^.^.^.13"},null]}],"nop","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.7"},null]}],"nop","\n",{"#f":1}],"win":[["ev","str","^Take the armour","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Scatter the armour","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^You pick up the helmet, a small column of vapour trailing from it. You raise the helmet to try it on and hear a quiet, \"Yes!\"","\n",[["ev",{"^->":"suit_of_armour.win.0.c-0.3.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"No",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"suit_of_armour.win.0.c-0.3.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you reply before dropping the helmet. Falling for such an obvious curse is beneath you.","\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"c-1":["\n","^You kick the pieces of armour away from one another. They let out mournful plumes of vapour. The helmet you leave for last - an inscription on the back of it reads, \"eternally guarded, contents discarded\".","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^Among the debris you notice a glint of yellow. You find and pick up ","ev",2,4,{"f()":"loot"},"out","/ev","^ gold coins.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"#f":1}],"eye_thing":["ev","str","^The Eye Thing","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^On the floor of this room you see a strange armature holding circles of glass. One large piece of glass connected to a crown smaller ones.","\n","^You look up from it to see a big ball of floating reptilian flesh. The front side of it consists of just a huge eye and a mouth full of sharp teeth. Ten stalks, each with a different coloured eye on the end, extend from the top of the ball. Its chromatic gaze falls upon you, eleven squinting eyes - your grip on your spear tightens. Then it looks away in confusion, its large mouth mumbles something inaudible.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",70,{"CNT?":".^.^.^.have_you_seen"},10,"*","+","/ev",{"temp=":"chance_sneak"},"ev",60,"/ev",{"temp=":"chance_hello"},"ev","str","^Sneak past the monster. (%","ev",{"VAR?":"chance_sneak"},"out","/ev","^)","/str",{"CNT?":".^.^.^.gone"},"!","/ev",{"*":".^.c-0","flg":5},["ev",{"^->":"eye_thing.opt.0.25.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\" (%","ev",{"VAR?":"chance_hello"},"out","/ev","^)","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"Hello",{"->":"$r","var":true},null]}],"ev","str","^Give the monster its spectacles.","/str",{"CNT?":".^.^.^.talk"},{"CNT?":".^.^.^.spectacles"},"!","&&","/ev",{"*":".^.c-2","flg":21},"ev","str","^Return the way you came.","/str",{"CNT?":".^.^.^.gone"},"!","/ev",{"*":".^.c-3","flg":5},"ev","str","^Lift the marked slab.","/str",{"CNT?":".^.^.^.gone"},"/ev",{"*":".^.c-4","flg":21},{"c-0":["\n","^You try to sneak past the monster...","\n","ev",{"VAR?":"chance_sneak"},"/ev","thread",{"->":"rollChance"},{"->":".^.^.^.^.sneak"},{"#f":5}],"c-1":["ev",{"^->":"eye_thing.opt.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.25.s"},[{"#n":"$r2"}],"^\", you say.","\n","ev",{"VAR?":"chance_hello"},"/ev","thread",{"->":"rollChance"},{"->":".^.^.^.^.talk"},{"#f":5}],"c-2":["\n",{"->":".^.^.^.^.spectacles"},{"#f":5}],"c-3":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-4":["^ ",{"->":".^.^.^.^.lift_slab"},"\n",{"#f":5}]}],{"#f":1}],"lift_slab":["ev",{"VAR?":"gold"},3,"+",{"VAR=":"gold","re":true},"/ev","^Wedging your spear's head between the flagstones, you lift up the slab that the monster marked for you. Underneath you find 3 gold coins. You collect them and let the slab fall back into place.","\n",{"->":"navigate"},{"#f":1}],"returning":["^You return to the room ","<>","\n",["ev",{"CNT?":".^.^.^.spectacles"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","^with the short-sighted monster. Its eleven eyes survey the room inefficiently. The armature of glass circles still sits on the floor below it.","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^where the short-sighted monster used to be. ","ev",{"CNT?":".^.^.^.^.lift_slab"},"!","/ev",[{"->":".^.b","c":true},{"b":["^On the floor is the X the creature marked for you, its promise of gold. ","thread",{"->":"eye_thing.opt"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^The tracks left by its attempt to shoot you are just as you left them.",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":"navigate"},{"->":".^.^.^.5"},null]}],"nop","\n",{"#f":1}],"talk":[["ev",60,"/ev",{"temp=":"chance_hello"},"^The creature spins round to face you and a ","<>",{"->t->":".^.^.^.blast"},"\n","^\"Hello?\" it asks.","\n",["ev",{"^->":"eye_thing.talk.0.10.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"Don't shoot",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.talk.0.11.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\" (%","ev",{"VAR?":"chance_hello"},"out","/ev","^)","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"You missed",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"eye_thing.talk.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.10.s"},[{"#n":"$r2"}],"^\", you say.","\n","^You brace for another volley of beams but the monster squints. It floats towards you, stopping uncomfortably close. You could stab it in that big scary eye but the other ten are staring at you.","\n","^\"Have you seen my spectacles?\"","\n",{"->":".^.^.^.^.have_you_seen"},{"->":".^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"eye_thing.talk.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.11.s"},[{"#n":"$r2"}],"^\", you say.","\n","ev",{"VAR?":"chance_hello"},"/ev","thread",{"->":"rollChance"},"^A ","<>",{"->t->":".^.^.^.^.blast"},"\n","^\"Are you dead?\" it asks.","\n",[["ev",{"^->":"eye_thing.talk.0.c-1.19.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"Yes",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.talk.0.c-1.19.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"No",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"eye_thing.talk.0.c-1.19.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":".^.^.^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"eye_thing.talk.0.c-1.19.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"g-0":["^\"I see\", it muses, \"well, truthfully I can't see much of anything right now.\" It floats towards you, stopping uncomfortably close. \"Have you seen my spectacles?\" it asks.","\n",{"->":".^.^.^.^.have_you_seen"},{"#f":5}]}],{"#f":1}],"have_you_seen":[["ev",70,{"CNT?":".^.^"},10,"*","+","/ev",{"temp=":"chance_sneak"},["ev",{"^->":"eye_thing.have_you_seen.0.8.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"Yes",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.have_you_seen.0.9.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"No",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"eye_thing.have_you_seen.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.8.s"},[{"#n":"$r2"}],"^\", you say. ","<>",{"->":".^.^.^.^.spectacles"},"\n",{"#f":5}],"c-1":["ev",{"^->":"eye_thing.have_you_seen.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.9.s"},[{"#n":"$r2"}],"^\", you say.","\n","^The monster turns left and right in agitation.","\n","^\"They must be in this room\", it says. The creature turns to face vaguely in your direction again. \"They're made of lots of pieces of glass.\" It must be referring to the armature you can see on the ground.","\n",["ev","str","^Give the monster its spectacles.","/str",{"CNT?":"eye_thing.talk"},{"CNT?":"eye_thing.spectacles"},"!","&&","/ev",{"*":".^.c-0","flg":21},"ev","str","^Sneak out of the room. (%","ev",{"VAR?":"chance_sneak"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n",{"->":"eye_thing.spectacles"},{"#f":5}],"c-1":["\n",{"->":"eye_thing.sneak"},{"#f":5}]}],{"#f":5}]}],{"#f":1}],"spectacles":[["^You pick up the armature of glass from the floor and present it to the monster. Its big eye dilates and the mouth gives you a horrifying grin. Gingerly it wraps some of its stalks around the strange frame to augment itself.","\n","^\"Ah!\" it gasps. It takes a look around the room and then turns to face you. The monster's magnified eyes perform a chorus of blinks. It looks less threatening behind its collection of lenses.","\n","^\"You're a kobold\", the monster states.","\n",["ev",{"^->":"eye_thing.spectacles.0.6.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"Your spectacles still work then",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.spectacles.0.7.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^, I'm a dwarf.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"No",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"eye_thing.spectacles.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.6.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"eye_thing.spectacles.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.7.s"},[{"#n":"$r2"}],"^\", you say, \"I'm a dwarf.\"","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^\"Very funny\", it replies. \"What doesn't amuse me is some of your kind snatching my glasses and putting me -\", it pauses to survey the room again, \"in some kind of maze.\"","\n",[["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"CNT?":".^.^.c-4.12.c-0"},"/ev",{"*":".^.^.c-2","flg":19},{"s":["^\"What does the big eye do?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-3","flg":18},{"s":["^\"What are you?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"CNT?":".^.^.c-3"},"/ev",{"*":".^.^.c-4","flg":19},{"s":["^\"How are you able to shoot those beams?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.3.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-5","flg":22},{"s":["^\"I didn't put you here",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.4.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-6","flg":18},{"s":["^\"Can I go now?\"",{"->":"$r","var":true},null]}],{"c-2":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"My largest eye sees the absence of magic\", it says,  \"If it's boring, I know about it. I can project this as well but it's considered rude.\" ",{"->":".^.^"},"\n",{"#f":5}],"c-3":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"Can't say, legal reasons\", it explains.","\n",[["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-3.10.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"What legal reasons?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-3.10.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":18},{"s":["^\"What do your kind do?\"",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-3.10.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"All I'm allowed to tell you is that it's a large part of why I shouldn't be here in the first place\", it says.","\n","^It nods gravely as if this enough.","\n","^It isn't, but you're not prepared to discover what powers would rule such a creature as this.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-3.10.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"We are the eye tyrants. We are not of your world. We travel and we conquer using our superior vision and magic.\" It lets that sink in for a second. \"Personally I'm not that fond of travelling. Allergies. You'd be surprised at what sets them off when you're from another dimension.\"","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":[{"->":".^.^.^.^"},{"#f":5}]}],{"#f":5}],"c-4":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-4.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"When your vision gets really good you can project an image as well as recieve it.","\n","^\"From each of my lesser eyes I can emit: delusion, paralysis, fear, sloth, negation, force, torpor, petrification, disintegration, and cake.\"","\n",[["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-4.12.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Cake?\"",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-4.12.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","^\"Ah. It's not actually cake, it's death. I used to ask trespassers what beam they'd like to be shot with. No one ever asked for death so I renamed it.\"","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":[{"->":".^.^.^.^"},{"#f":5}]}],{"#f":5}],"c-5":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-5.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.3.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"Obviously\", it replies. \"With my spectacles on I can see what you ate this morning, what you're thinking, and what your ancestry is.\" It squints at you. \"You are a different kind of kobold.\"","\n",[["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-5.10.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"I get that a lot",{"->":"$r","var":true},null]}],["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-5.10.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"Thanks",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-5.10.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n","^The monster does something with its eyestalks that might be a shrug.","\n","^\"So do I\", it says.","\n",{"->":".^.^.^.^"},{"#f":5}],"c-1":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-5.10.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"You're welcome\", it says.","\n",{"->":".^.^.^.^"},{"#f":5}]}],{"#f":5}],"c-6":["ev",{"^->":"eye_thing.spectacles.0.g-0.talky.c-6.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.4.s"},[{"#n":"$r2"}],"^ you ask.","\n",{"->":"eye_thing.gone"},{"#f":5}],"#f":5,"#n":"talky"}],{"#f":5}]}],{"#f":1}],"gone":["^\"Oh!\" it says, \"certainly. Indeed I too shall be going as well. I will return to obliterate the fools who put me here, but rest assured you've earned your life.\"","\n","^A ray from one of its eyes takes you by surprise. It carves an X on a flagstone near you.","\n","^\"There's gold under that one\", it says. As you look at the slab of stone you are buffeted by a whoosh of air. You look back to where the monster was but it has vanished. Only an unpleasant odor remains, it smells like burning claws.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"sneak":[["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Keeping your footfalls silent you tread carefully around the monster. You manage to stay out of its line of sight - no easy task when there are eleven of them - and make your way to an exit.","\n",{"->":"navigate"},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^You carefully tread around the monster, hoping to stay in eleven blindspots at once. You're almost free of the room when you step on a loose flagstone. It makes a hollow clack against its neighbours. You look up just in time to see the monster spin around, a white beam firing from one of its eyestalks.","\n","^Ducking under the beam you try to sprint for an exit, but the monster continues to hose the room with light. Something hits you from behind and you see a beam explode through your chest. Breathless, you fall forwards into the light. The deadly illumination is eclipsed by the darkness of oblivion.","\n","end",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^Keeping yourself at the monster's back you edge quietly towards an exit. But it begins to turn quicker than you can creep away. You sprint as the monster fires out ",["ev","visit",6,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"ev","du",5,"==","/ev",{"->":".^.s5","c":true},"nop",{"s0":["pop","^a pink",{"->":".^.^.41"},null],"s1":["pop","^a turquoise",{"->":".^.^.41"},null],"s2":["pop","^a vermillion",{"->":".^.^.41"},null],"s3":["pop","^an orange",{"->":".^.^.41"},null],"s4":["pop","^a sepia",{"->":".^.^.41"},null],"s5":["pop","^a violet",{"->":".^.^.41"},null],"#f":5}],"^ beam in your general direction. ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^Diving to the floor you bruise yourself as the ray passes over. You scrabble to your feet and escape before it can fire again.",{"->":".^.^.23"},null],"s1":["pop","^The ray misses you, hitting the ceiling. A chunk of stone smacks rudely into your head. You grip the bruise whilst you make your escape.",{"->":".^.^.23"},null],"s2":["pop","^You dive over it. From your fingers to the end of your tail you are a graceful arc. The moment you land it fires again, you tempt fate with another dive and still succeed. It fires again. You dive. Again. And so on.<br><br>You exit the room acrobatically, though somewhat exhausted.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":"navigate"},{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"blast":[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^blue",{"->":".^.^.17"},null],"s1":["pop","^red",{"->":".^.^.17"},null],"#f":5}],"^ beam fires from one of its eyestalks. ","<>","\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You duck to the ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^right",{"->":".^.^.17"},null],"s1":["pop","^left",{"->":".^.^.17"},null],"#f":5}],"^ for safety but the beam misses you wildly. It hits a wall leaving ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^a mass of ice crystals. Chilled air washes past you.",{"->":".^.^.17"},null],"s1":["pop","^a patch of molten rock. You edge away from its heat.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^You dodge the incoming beam but the monster continues blasting, sweeping across the room. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You find your escape covered in sheets of jagged ice - surely from the creature's magic. You try to dive over to safety but as you do the beam sweeps back and hits you. Theres a biting pain all over you that feels like thousands of needles, as well as a horrid numbness that locks your limbs in place. You hit the floor with a cracking sound, your body splintering into icy chunks. Fortunately, when your head follows and explodes into frozen fragments you are too cold to feel it.",{"->":".^.^.17"},null],"s1":["pop","^Your escape is cut off by a trench of molten rock - created by the creature's beam. The monster continues its sweep and you try to leap over the trench to safety. After a great leap you land on the other side, rising to continue your flight. But a column of red light burst through your chest, leaving a charred smoking hole where most of your vital organs should be. You try to cry out in pain but you lack the faculty, instead the only sound is your expiring body hitting the floor.",{"->":".^.^.17"},null],"#f":5}],"\n","end",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^It misses you completely, spraying the ceiling with a pattern of icicles. Then a few of them drop off and you make a panicked dash away from where you stand as daggers of ice fall from above. One of them cuts you as it passes.",{"->":".^.^.17"},null],"s1":["pop","^You duck down as a ray of heat sweeps above you. Unfortunately you forget about your tail and the end of it is singed by the beam. You lick finger and thumb and apply them to the end of your tail - there's an unpleasant hiss. It stings quite a bit.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.6"},null]}],"nop","\n","ev","void","/ev","->->",{"#f":1}],"#f":1}],"black_pool":["ev","str","^The Pool","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You stumble to a stop at the edge of this room. Where the floor should be is just a square of black that absorbs all light. Surrounding it is a thin ledge, enough to support your heels only. The black looks like it might be a pool of something, or perhaps a barrier of magical darkness.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",50,"/ev",{"temp=":"chance_edge"},"ev",60,{"CNT?":".^.^.^.test"},10,"*","+","/ev",{"temp=":"chance_walk"},"ev","str","^Walk around the edge to an exit. (%","ev",{"VAR?":"chance_edge"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Test the darkness with your spear.","/str",{"CNT?":".^.^.^.test"},0,"==","/ev",{"*":".^.c-1","flg":5},"ev","str","^Walk through the pool of darkness. (%","ev",{"VAR?":"chance_walk"},"out","/ev","^)","/str",{"CNT?":".^.^.^.test"},"/ev",{"*":".^.c-2","flg":5},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":["\n","^Pressing your back against the wall you shuffle your way around the edge of the room. Your toes hang over the thin ledge, threatening to slip forward and disappear into the black.","\n","ev",{"VAR?":"chance_edge"},"/ev","thread",{"->":"rollChance"},{"->":".^.^.^.^.walkEdge"},{"#f":5}],"c-1":[{"->":".^.^.^.^.test"},"\n",{"#f":5}],"c-2":["\n","ev",{"VAR?":"chance_walk"},"/ev","thread",{"->":"rollChance"},{"->":".^.^.^.^.walkThrough"},{"#f":5}],"c-3":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":["^You return to the room with the black floor. Its tenebrous platform continues to hide what lurks below.","\n",{"->":".^.^.opt"},{"#f":1}],"walkEdge":[["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Eventually you manage to reach an exit.","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.2"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^The stone beneath your feet crumbles. You pitch forwards tumbling head first into the black. There is no obstacle to your descent. ",{"->":"black_pool.fall"},"\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^stumble",{"->":".^.^.17"},null],"s1":["pop","^trip",{"->":".^.^.17"},null],"#f":5}],"^ and fall into the pool. A stony floor rudely stops you from falling further. ","ev",{"CNT?":"black_pool.test"},"!",{"CNT?":"black_pool.lower"},"!","&&","/ev",[{"->":".^.b","c":true},{"b":["^ You pull yourself up and find yourself only knee deep in darkness. Somewhat bruised and annoyed you ",{"->":".^.^.^.13"},null]}],[{"->":".^.b"},{"b":["^You get up, brush yourself off, and ",{"->":".^.^.^.13"},null]}],"nop","^make your way carefully to an exit.","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.8"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"test":["ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You slowly dip your spear into obfuscation. At first there's no resistance, the darkness acting like heavy smoke, then your spear hits stone. Only a third of your spear's length is submerged.","\n","^You test elsewhere and get the same results. The \"pool\" is quite shallow, deep enough to just reach your knees - should you step into it that is.","\n",{"->":".^.^.opt"},{"#f":1}],"walk_first":["^You step on something round and metallic. You freeze - you could be standing on anything right now. Probing it with your toes you deduce it may be a coin. Gingerly you crouch to collect the object. You pull a shiny gold coin out of the darkness.","\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^You resume making your way to an exit, but find no more treasure.","\n","ev","void","/ev","->->",{"#f":1}],"lower":["^You lower one foot into the blackness until it reaches a cold stony floor. Then another. You make your way forwards, tapping the space in front with your spear for safety.","\n","ev","void","/ev","->->",{"#f":1}],"walkThrough":[{"->t->":".^.^.lower"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->t->":"black_pool.walk_first"},{"->":".^.^.17"},null],"s1":["pop","^You're surprised to make it across unscathed and untested. Perhaps you chose just the right path.",{"->":".^.^.17"},null],"#f":5}],"\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.3"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^You get about halfway through the room before your right foot tries to find purchase on nothing. You stagger back.","\n","^That was close.","\n","^You take a step to the left to circle around the hazard. You're pretty sure there was floor to your left a second ago as you stumble sideways into chasm. You pass through the plane of darkness into a cold space. ",{"->":"black_pool.fall"},"\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",3,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^Confident your path is clear you smash your left big toe into what feels like a raised stone. One whose purpose is purely for the stubbing of toes. It really hurts. You lean on your spear whilst cursing for a minute before making your way to an exit at a much slower pace.",{"->":".^.^.23"},null],"s1":["pop","^You boldly place a foot ahead and skewer it on something sharp. Crying out in pain you lift your foot to find a rusty nail embedded in it. You pull it out. Shuffling onwards you make your way carefully out of the room.",{"->":".^.^.23"},null],"s2":["pop","^You advance across the pool only for one of your feet to step into a pothole. Your shin smacks into the side of it and your toes are twisted under your weight as they hit the bottom. You hiss in lieu of cursing, not wanting to provide amusement for whatever beasts await you in adjacent rooms. Using your spear to lean on you retrieve your foot. Then, slowly, carefully, you make your exit.",{"->":".^.^.23"},null],"#f":5}],"\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.8"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"->":".^.^.^.3"},null]}],"nop","\n",{"#f":1}],"fall":["^After a long fall, something flat and made of stone slams into your side and your head.","\n","^The oppressive darkness only makes it easier for life to slip away.","\n","end",{"#f":1}],"#f":1}],"blades":["ev","str","^The Gouge","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"blades.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"blades.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter this space and your eye is drawn to a deep gouge that runs around the entire room at waist height. Something will come out of that gap, you're sure of it.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",70,"/ev",{"temp=":"chance_crawl"},"ev",50,"/ev",{"temp=":"chance_catch"},"ev","str","^Crawl. (%","ev",{"VAR?":"chance_crawl"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Attempt to catch whatever comes out. (%","ev",{"VAR?":"chance_catch"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","ev",{"VAR?":"chance_crawl"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"blades.crawl_success"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"blades.crawl_failure"},{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":5}],"c-1":["\n","^You position yourself ready to stop the trap.","\n","ev",{"VAR?":"chance_catch"},"/ev","thread",{"->":"rollChance"},"^Huge cantilevered blades swing out from the gouges. ","<>","\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"blades.catch_success"},{"->":".^.^.^.13"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"blades.catch_failure"},{"->":".^.^.^.13"},null]}],"nop","\n",{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"catch_success":["^You step out of the path of one blade and into that of the bar that carries it. You push back against the lever and hear grinding noises in the walls. The whole trap mechanism shudders to a halt.","\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^On the floor next to a wall you notice a gold coin. Easy to miss whilst the blades are threatening you. You pick it up.","\n",{"->":"navigate"},{"#f":1}],"catch_failure":["ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^As big blades swing out from the gaps you realise you're in no position to catch their mechanism. You try to dodge but they cut you in two. After your torso hits the ground you're given a view of your legs and tail, a steady and gruesome tripod.","\n","^Then you black out.","\n","end",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","^You've misjudged your position. ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You dive to the floor, bruising yourself in the process - but the blades pass over you.",{"->":".^.^.17"},null],"s1":["pop","^You leap to one side but the blades still manage to cut you as they pass.",{"->":".^.^.17"},null],"#f":5}],"\n","^You make your way out before the mechanism activates again.","\n",{"->":".^.^.^.7"},null]}],"nop","\n",{"->":"navigate"},{"#f":1}],"crawl_success":[["^You crawl slowly across the floor and huge cantilevered blades swing out from the gouges. They pass harmlessly over you.","\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^As you make your way across the flagstones you find a message scratched into the stonework: \"Waist not, want not.\" You continue your crawl, away from this room's sense of humour.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"crawl_failure":[["ev",{"f()":"loseStamina"},"pop","/ev","\n","^You crawl carefully across the floor, head down. Hearing nothing from above you raise your head to see what's going on.","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^Something big and metal flashes by just below your snout. Your neck hurts, you can't feel your body, the world tips sideways. Then you black out. ","end","\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","^An armature holding a giant blade smacks into your head. You lie there stunned for a few seconds before continuing your crawl out of there.","\n",{"->":".^.^.^.9"},null]}],"nop","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":["ev",{"CNT?":".^.^.catch_success"},"/ev",[{"->":".^.b","c":true},{"b":["^ ",{"->":"blades.solved"},{"->":".^.^.^.4"},null]}],"nop","\n","^You return to the room with the gouge running around it.","\n",{"->":".^.^.opt"},{"#f":1}],"solved":["^You return to the room of blades. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You stick to the room's perimeter in case a secondary mechanism activates.",{"->":".^.^.17"},null],"s1":["pop","^The scythes on their huge levers hang motionless.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":"navigate"},{"#f":1}],"#f":1}],"bowl_of_water":["ev","str","^Bowl","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter this room and see a stone bowl sitting on a plinth. The bowl is full of what appears to be water.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"returning":[["ev",{"CNT?":".^.^.^.drink"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room with the empty bowl of water.","\n",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","^You return to the room with the bowl of water.","\n",{"->":".^.^.^.2"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Take a drink.","/str",{"CNT?":".^.^.^.drink"},"!","/ev",{"*":".^.c-0","flg":5},"ev","str","^Inspect the plinth.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Read the message on the bowl.","/str",{"CNT?":".^.c-1"},"/ev",{"*":".^.c-2","flg":21},{"c-0":["\n",["ev",{"VAR?":"stamina"},5,"<","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.^.^.drink"},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","^You're not in need of a drink right now. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You prod the water with a clawed finger, but it does not seem dangerous.",{"->":".^.^.17"},null],"s1":["pop","^The water looks as clear as when you first saw it.",{"->":".^.^.17"},null],"#f":5}],"^ Perhaps you should save this for later.","\n",{"->":"navigate"},{"->":".^.^.^.3"},null]}],"nop","\n",{"#f":5}],"c-1":["\n","^You inspect the plinth. It appears unremarkable, but in bending over to get a good look you notice something on the underside of the bowl. A message forming circlet around the plinth. Bidding you to walk around to read it.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-2":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You walk around the bowl, reading the message on its underside.","\n","^<i>I assure you that the water in the bowl is completely safe.</i>","\n",["ev",{"CNT?":".^.^.^.^.^.drink"},"/ev",{"->":".^.b","c":true},{"b":["\n","^It's a bit late for warnings or recommendations. At least you got a gold coin out of it.","\n",{"->":".^.^.^.13"},null]}],[{"->":".^.b"},{"b":["\n","^You pause to consider its meaning, unsure of whether you've gained knowledge or lost it. You tap the surface of the \"water\" with the head of your spear and watch a droplet roll down the blade, fall off and harmlessly hit your foot. It's probably water.","\n",{"->":".^.^.^.13"},null]}],"nop","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"drink":["ev",2,{"f()":"gainStamina"},"pop","/ev","\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^You drink from the bowl. The water is especially refreshing and invigorating. You wait to see if some awful side effect comes to pass, but no, you're fine.","\n","^At the bottom of the bowl you notice a gold coin acting as a plug, you pick it out and the rest of the water drains away.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"#f":1}],"canary":["ev","str","^Birdcage","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"canary.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"canary.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^At the center of this room hangs a wire cage with several wooden perches. Upon the lowest sits a small yellow bird.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Inspect the bird.","/str",{"CNT?":".^.c-1"},"!","/ev",{"*":".^.c-0","flg":21},"ev","str","^Open the cage.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^This creature has been used by your tribe for testing the air in caverns. You guess that it serves a similar purpose here. It would be quite embarassing to have monsters that suffocated before they did their job.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-1":["\n","^You open a little door on the cage and the bird hops on to the bottom of the door frame.","\n",["ev","str","^Eat the bird.","/str",{"VAR?":"stamina"},5,"<","/ev",{"*":".^.c-0","flg":21},"ev","str","^Kill the bird.","/str",{"VAR?":"stamina"},5,"==","/ev",{"*":".^.c-1","flg":21},"ev","str","^Wait.","/str","/ev",{"*":".^.c-2","flg":20},{"c-0":["^ ",{"->":"canary.eat"},"\n",{"#f":5}],"c-1":["^ ",{"->":"canary.kill"},"\n",{"#f":5}],"c-2":["\n","ev",1,"/ev",{"VAR=":"lucky","re":true},"ev",{"VAR?":"inventory"},{"VAR?":"bird"},"+",{"VAR=":"inventory","re":true},"/ev","^The bird twitches a look at you, questioning its freedom, before fluttering out of the room. You lose sight of it as it goes round a corner. It does not return.","\n","thread",{"->":"canary.opt"},{"->":"navigate"},{"#f":5}]}],{"#f":5}]}],{"#f":1}],"eat":["ev",1,{"f()":"gainStamina"},"pop","/ev","\n","^You snatch the bird off its perch and give it a few crunches between your teeth before swallowing it whole. It was probably part of some warning system, it will serve you better as a snack.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"kill":["^You snatch the bird off its perch before throwing it to the floor and crushing it underfoot. It was probably part of some warning system.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"returning":["^You return to the room with the ","<>","\n",["ev",{"CNT?":"canary.opt.0.c-1"},"/ev",{"->":".^.b","c":true},{"b":["\n","^open bird cage. ","<>","\n",["ev",{"CNT?":"canary.kill"},"/ev",{"->":".^.b","c":true},{"b":["\n","^A small smear of blood and feathers is below it.","\n",{"->":".^.^.^.6"},null]}],["ev",{"CNT?":"canary.eat"},"!","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",2,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The bird is not here.",{"->":".^.^.17"},null],"s1":["pop","^You see the bird sitting on top of the cage. It cocks its head towards you before flying away from you out of the room.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.6"},null]}],"nop","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^bird cage. Its occupant ",["ev","visit",2,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^hops between the perches",{"->":".^.^.17"},null],"s1":["pop","^tweets questioningly",{"->":".^.^.17"},null],"#f":5}],"^ at your arrival.","\n",{"->":".^.^.^.5"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"#f":1}],"ceiling":["ev","str","^Ceiling","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^As you step into this room the ceiling begins to grind slowly downwards. A classic trap. Kobolds such as yourself are trained on a diet of cave ins and falling boulders. You can do this.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",30,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Wait.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Run out of the room.","/str",{"CNT?":".^.^.^.returning"},"!","/ev",{"*":".^.c-1","flg":21},"ev","str","^Return the way you came.","/str",{"CNT?":".^.^.^.returning"},"/ev",{"*":".^.c-2","flg":5},"ev","str","^Run through the room. (%","ev",{"VAR?":"temp_chance"},{"CNT?":".^.^.^.wait"},10,"*","+",5,95,{"f()":"clamp"},"out","/ev","^)","/str",{"CNT?":".^.^.^.returning"},"/ev",{"*":".^.c-3","flg":5},{"c-0":[{"->":"ceiling.wait"},"\n",{"#f":5}],"c-1":["\n","^You dash through the room and out, not waiting for the trap to toy with you further.","\n","ev",1,"/ev",{"->":"go_direction"},{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-3":["\n",{"->":"ceiling.run"},"done",{"#f":5}]}],{"#f":1}],"wait":[["ev",{"CNT?":".^.^"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You step outside of the room. These things are usually on a timer so you can wait till it starts to rise and walk through at your leisure.","\n","ev","str","^Wait.","/str","/ev",{"*":".^.c-0","flg":20},{"->":".^.^.^.5"},{"c-0":["\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^You wait for the ceiling to continue its tedious crawl to the bottom. It finally reaches the floor with a thud.","\n","^You notice a gold coin embedded in the stonework and prise it free with the head of your spear.","\n",["ev","str","^Wait.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n","^You stand there for a minute. It's not moving.","\n",["ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Wait.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-1":["\n","^You listen for any telltale signs of movement. Only silence. You're about to give it a kick in frustration but then it slowly begins to rise.","\n",["ev","str","^Wait.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n","^You wait for it to reach halfway. You could make a run for it.","\n",["ev","str","^Run through the room. (%","ev",{"VAR?":"temp_chance"},{"CNT?":"ceiling.wait"},10,"*","+",5,95,{"f()":"clamp"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Wait.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":[{"->":"ceiling.run"},"\n",{"#f":5}],"c-1":["\n","^It's nearly back to where it started. You can casually jog to an exit now.","\n",[{"*":".^.c-0","flg":24},{"c-0":[{"->":"navigate"},"\n",{"#f":5}]}],{"#f":5}]}],{"#f":5}]}],{"#f":5}]}],{"#f":5}]}],{"#f":5}]}]}],["ev",{"CNT?":".^.^"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You wait whilst the roof of the room continues its slow creep downwards. A thump comes from inside the walls and it stops halfway. Is it broken?","\n","ev","str","^Run through the room. (%","ev",{"VAR?":"temp_chance"},{"CNT?":".^.^.^"},10,"*","+",5,95,{"f()":"clamp"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Wait.","/str","/ev",{"*":".^.c-1","flg":20},{"->":".^.^.^.5"},{"c-0":["^You commit to running through and the ceiling begins to move again. ","<>",{"->":"ceiling.run"},"\n",{"#f":5}],"c-1":["\n","^It seems to be stuck. You're about to duck and walk through when it starts up again.","\n",["ev","str","^Wait.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n","^The ceiling finally meets the floor. You cast an eye over the barrier before you, looking for more rewards. Along the top edge you see an inscription:","\n","^<i>Various and valued matter, made portable and flatter.</b>","\n","^Unfortunately there's nothing you carry that needs this service. You wait for the wall to rise but minutes pass without sound or motion.","\n",["ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Wait.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-1":["\n","^It refuses to budge. You kick it. You beat your palm on it.","\n","^Perhaps you should come back later.","\n",["ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":5}]}],{"#f":5}]}],{"#f":5}]}]}],["ev",{"CNT?":".^.^"},3,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You wait whilst the roof of the room passes a third of the way down before sharply slamming in to the floor. You jump back with a gust of dust and grit following you. It rises up swiftly, ignoring its former character.","\n","^Then strikes the floor again.","\n","^A few beats pass before it nonchalantly rises to its starting position. It waits. Your move. ",{"->":"ceiling.opt"},"\n",{"->":".^.^.^.5"},null]}],["ev",{"CNT?":".^.^"},4,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You wait and the roof descends only inch and stops. You wait for a moment, waving your spear and then a hand underneath to see if it will attempt to crush them. You tap the ceiling with the butt of your spear, punctuating the test with a sharp blow that knocks a few chips of stone away. Nothing.","\n","ev","str","^Try to walk through the room.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Wait.","/str","/ev",{"*":".^.c-1","flg":20},{"->":".^.^.^.5"},{"c-0":[{"->":"ceiling.knees"},"\n",{"#f":5}],"c-1":["\n","^You pace back and forth, giving the ceiling a few more pokes to provoke it. The roof is unmoved by your threats.","\n",["ev","str","^Return the way you came","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Try to walk through the room.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-1":[{"->":"ceiling.knees"},"\n",{"#f":5}]}],{"#f":5}]}]}],[{"->":".^.b"},{"b":["\n","^You pause and the roof smashes down into the floor in reply. It sulks, refusing to move. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^It seems to have tired of this game.",{"->":".^.^.17"},null],"#f":5}],"\n","ev","str","^Return the way you came","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.5"},{"c-0":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"#f":1}],"returning":["^You return to the room with the crushing ceiling. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^It seems to sense your presence and taunts you by lowering.",{"->":".^.^.17"},null],"s1":["pop","^It greets you with its familar grind to the floor.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.opt"},{"#f":1}],"knees":["^You walk through the room with knees bent ready to make an escape. The trap appears not to care.","\n",{"->":"navigate"},{"#f":1}],"run":["^You dash forwards, ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^your feet raising dust and clawed toes scraping against the flagstones.",{"->":".^.^.23"},null],"s1":["pop","^a squeak sounding from your back foot as it fights to push you ahead.",{"->":".^.^.23"},null],"s2":["pop","^ducking low with your tail outstretched to counterbalance your charge.",{"->":".^.^.23"},null],"#f":5}],"\n","ev",{"VAR?":"temp_chance"},{"CNT?":".^.^.wait"},10,"*","+",5,95,{"f()":"clamp"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"ceiling.success"},{"->":".^.^.^.17"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"ceiling.failure"},{"->":".^.^.^.17"},null]}],"nop","\n",{"#f":1}],"success":[["^You accelerate towards an exit with ease. The roof of the room slowly closing after you.","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ","ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"failure":["ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^There's a metallic snap from within the walls. You've enough time to figure out that it was probably a chain link breaking. But not enough time to escape the ceiling smashing into you with its unstoppable mass.","\n","end",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","^You ",["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^stumble into a roll, scrambling to retrieve your spear before making a mad crawl to an exit.",{"->":".^.^.23"},null],"s1":["pop","^are forced to slide across the floor as the ceiling threatens to leave no escape. You barely manage to tuck your tail in before it slams shut.",{"->":".^.^.23"},null],"s2":["pop","^are forced to run practically on all fours as the ceiling accelerates downwards. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^Your repeated transits must have excited it.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],{"->":".^.^.23"},null],"#f":5}],"\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.7"},{"c-0":["^ ","ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"#f":1}],"#f":1}],"clicker":["ev","str","^Click","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev",{"CNT?":".^.^"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.click1"},{"->":".^.^.^.12"},null]}],["ev",{"CNT?":".^.^"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.click2"},{"->":".^.^.^.12"},null]}],["ev",{"CNT?":".^.^.sprung"},"!","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.click3"},{"->":".^.^.^.12"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.returning"},{"->":".^.^.^.12"},null]}],"nop","\n",{"click1":[["^You place a foot down in this room and hear a foreboding click.","\n","ev","str","^Hold your position.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Remove your foot, slowly, and return the way you came.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^You stay perfectly still for a minute. Nothing happens.","\n",{"->":"navigate"},{"#f":5}],"c-1":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"click2":[["^You return to the \"clicking room\".","\n","ev","str","^Gently put one foot on the floor.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Prod the floor with your spear.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^Your scaly toes caress the stone floor as gently as you can.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^You gently poke the floor with the spear's blade.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^Another click. Silence follows. Further probing has no effect.","\n","ev","str","^Search the room, properly.","/str","/ev",{"*":".^.c-2","flg":20},{"c-2":["\n","^You check every surface and every nook for answers. Rapping walls and floor with the butt of your spear you make a circuit of the room - discovering almost nothing. Through one crack in one corner you see a glint of gears poised to activate a mechanism. The gap is too small to wedge anything inside.","\n","^Next time you return here something will happen, you're sure of it.","\n",{"->":"navigate"},{"#f":5}],"#f":5}]}],{"#f":1}],"click3":[["ev",50,"/ev",{"temp=":"chance_backflip"},"^You pause at the entrance to the room that clicks.","\n","ev","str","^Stride boldly in.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^It's not worth the risk.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^You stride boldly in, daring the room to make a noise. Sure enough you hear a click followed by a chorus of plinks. In each corner of the room a small hole has opened.","\n",["ev","str","^Dive to the floor. (-1 stamina)","/str",{"VAR?":"stamina"},1,">","/ev",{"*":".^.c-0","flg":21},"ev","str","^Backflip. (%","ev",{"VAR?":"chance_backflip"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n","ev",1,"/ev",{"VAR=":"lucky","re":true},"^You dive and the stony floor slams into your snout as darts whistle over you. You hear them clatter harmlessly into the corners of the room. You slowly raise yourself from the floor, bruised but sure your luck will change for taking the safe option.","\n",{"->":".^.^.^.^.g-0"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"chance_backflip"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Your body arcs through the air, your curving tail completing an \"O\" through which whistling darts pass through. You land with the grace of a cat. It's a shame that no one was around to see that.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You jump, wriggle somewhat in the air, and then land on your head. Somewhere above you darts whistle past.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You body arcs through the air, almost making a perfect \"O\". Three whistling darts fly underneath you and a forth slams into your tail. You feel very heavy. That dart must have been poisoned, you think. Perhaps you can sleep it off. You lie down as the numbness takes over. You don't wake up.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"c-1":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":[{"->":"clicker.sprung"},{"#f":5}]}],{"#f":1}],"sprung":["ev",{"VAR?":"gold"},4,"+",{"VAR=":"gold","re":true},"/ev","^You inspect the holes that produced the darts and find a gold coin in each. A strange reward for your patience but you'll take what you can get.","\n",{"->":"navigate"},{"#f":1}],"returning":["^You enter the room that used to click. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You convince yourself for a moment that you heard it click again, but it was likely just one of your joints.",{"->":".^.^.17"},null],"s1":["pop","^Its silence washes over you",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":"navigate"},{"#f":1}],"#f":1}],"custard":["ev","str","^Custard","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You can only stand at the edge of this room as there is a pool of murky liquid where the floor should be. The substance in the pool appears to be a combination of ash and mucus. It looks deep, you can't see to the bottom.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",60,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Test the \"water\" with your spear.","/str",{"CNT?":".^.^.^.test_water"},"!",{"CNT?":".^.^.^.swim"},"!","&&","/ev",{"*":".^.c-0","flg":5},"ev","str","^Swim across. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str",{"CNT?":".^.^.^.test_water"},"!",{"CNT?":".^.^.^.swim"},"!","&&","/ev",{"*":".^.c-1","flg":5},"ev","str","^Run across. (%","ev",{"VAR?":"temp_chance"},20,"+","out","/ev","^)","/str",{"CNT?":".^.^.^.test_water"},{"CNT?":".^.^.^.swim"},"||","/ev",{"*":".^.c-2","flg":5},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":[{"->":"custard.test_water"},"\n",{"#f":5}],"c-1":[{"->":"custard.swim"},"\n",{"#f":5}],"c-2":[{"->":"custard.run"},"\n",{"#f":5}],"c-3":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":["^You return to the room with the murky pool. ","<>","\n",["ev",{"CNT?":".^.^.^.test_water"},{"CNT?":".^.^.^.swim"},"||","/ev",{"->":".^.b","c":true},{"b":["\n","^The glutinous morass that fills it is motionless.","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^The ashen snot that fills it appears curiously still.","\n",{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.opt"},{"#f":1}],"test_water":["ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^You prod the mire with the butt of your spear and it puts up a gelatious resistance. The skin of the jelly then breaks leaking a thick ooze. A gold coin is spat out of this wound. You spend a minute fishing it out with your spear. And then another minute cleaning it.","\n",{"->":".^.^.opt"},{"#f":1}],"swim":[["^You take a run up and dive on to the pool, only to bounce when you discover it has a rubbery surface. A second later the murk begins to sag and feel sticky.","\n","ev",60,"/ev",{"VAR=":"temp_chance","re":true},["ev","str","^Try to escape. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Look for something to grab.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You wobble your way on to your feet. As you push against the pool's skin it hardens. You find that a good stamping routine keeps you afloat on this strange substance. With constant sticky stamps you march towards an exit.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You struggle up to your feet but you're begining to sink. With great effort you pull your legs free and attempt a hurried march to the pool's opposite edge. Each successive stamp gives more resistance as you escape.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"custard.sink"},{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n",["ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","ev",{"VAR?":"temp_chance"},15,"+",{"VAR=":"temp_chance","re":true},"/ev","^Scanning the room you calculate that you have landed roughly in the center of the pool, as far as possible from anything to hold on to. Looking into the pool you see cloudy darkness, as if its depths could go on forever. Back near the edge where you leapt you can see a glint of gold forever drifting down, rocked by your hasty crash, never to be seen again.","\n","^You've learned a lot from this position in the center of the room.","\n",{"->":".^.^"},{"#f":5}],"#f":5,"#n":"escape"}],null],{"#f":1}],"run":["^You take a step back and then dash across the pool.","\n","ev",{"VAR?":"temp_chance"},15,"+","/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^As you trot heavy footed across the pool it chooses to hold your weight.","\n",{"->":".^.^.^.11"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You stumble and fall. The pool is surprisingly hard as you smack into it, knocking the wind out of you. Then you quickly get up and stamp to an exit before it can become soft again.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"custard.sink"},{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.11"},null]}],"nop","\n","ev",1,"/ev",{"->":"go_direction"},{"#f":1}],"sink":["^Beneath you, you see a large bubble of trapped air, allowed to rise from your violence to the pool's sturdy skin. Your clawed toes pierce its surface and it breaks free with a gloopy pop. The air inside exchanges places with you and you slip into the pool's depths. Every struggle only takes you deeper. It is a very unpleasant death.","\n","end",{"#f":1}],"#f":1}],"swapQuaidSide":[["ev",{"VAR?":"quaid_dir"},"str","^right","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^left","/str","/ev",{"VAR=":"quaid_dir","re":true},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev","str","^right","/str","/ev",{"VAR=":"quaid_dir","re":true},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"quaid_doubler":["ev","str","^Quaid","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":[["ev",0,1,"rnd",0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"f()":"swapQuaidSide"},"out","/ev","\n",{"->":".^.^.^.1"},null]}],"nop","\n","^In this room waits a beast your kind call the quaid doubler.  Two tall monsters covered in muscles. One of them will be a magical illusion, projected to confuse and intimidate. They stare at you with mean eyes, the one on the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^ licks its lips.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",60,"/ev",{"temp=":"chance_attack"},"ev",80,"/ev",{"temp=":"chance_run"},"ev","str","^Attack the real one. (%","ev",{"VAR?":"chance_attack"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Run through the illusion. (%","ev",{"VAR?":"chance_run"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","ev",0,"/ev",{"VAR=":"quaid_run","re":true},"^You raise your spear ready to strike. But which one will you target?","\n",{"->":".^.^.^.^.right_or_left"},{"#f":5}],"c-1":["\n","ev",1,"/ev",{"VAR=":"quaid_run","re":true},"^You bend your knees ready to sprint. But which one will you run through?","\n",{"->":".^.^.^.^.right_or_left"},{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":[["ev",{"VAR?":"quaid_death"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room with the dead quaid doubler. ","<>",{"->":".^.^.^.^.dead_quaid"},"\n",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"swapQuaidSide"},"out","/ev","\n","^You return to the room with the quaid doubler. ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^The one on the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^ flexes its muscles at you.",{"->":".^.^.23"},null],"s1":["pop","^The figure on the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^ points at their eyes with two fingers, then points at you.",{"->":".^.^.23"},null],"s2":["pop","^The two figures appear to be engaged in some sort of mock wrestling match. They break it up as you enter. It looked like the one on the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^ was winning.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"dead_quaid":[["ev",{"VAR?":"quaid_death"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^Slivers of meaty skin can be seen on every surface.","\n",{"->":".^.^.^.2"},null]}],["ev",{"VAR?":"quaid_death"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^Its meaty sack lies on the floor. ",["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop",{"->":".^.^.23"},null],"s1":["pop","^For a moment you think you seek a second sack next to it. But no. You keep your distance anyway.",{"->":".^.^.23"},null],"s2":["pop",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.2"},null]}],"nop","\n","ev",{"CNT?":".^.^.dead_opt.0.c-0"},0,"==","/ev",[{"->":".^.b","c":true},{"b":[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You notice 2 gold coins on the floor. You're certain they weren't there before.",{"->":".^.^.17"},null],"s1":["pop","^The 2 gold coins are still on the floor.",{"->":".^.^.17"},null],"#f":5}],{"->":".^.^.^.10"},null]}],"nop","\n","thread",{"->":".^.^.dead_opt"},{"->":"navigate"},{"#f":1}],"dead_opt":[["ev","str","^Pick up the gold.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n","ev",{"VAR?":"gold"},2,"+",{"VAR=":"gold","re":true},"/ev","^You pick up the coins, a quaid doubler is embossed on each. Hopefully it's still legal tender.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"right_or_left":[["ev","str","^Right.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Left.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Examine the doublers.","/str","/ev",{"*":".^.c-2","flg":20},{"c-0":["\n",["ev",{"VAR?":"quaid_dir"},"str","^right","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",1,"/ev",{"VAR=":"quaid_hit","re":true},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","ev",0,"/ev",{"VAR=":"quaid_hit","re":true},{"->":".^.^.^.3"},null]}],"nop","\n",["ev",{"VAR?":"quaid_run"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.^.^.running"},{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.^.^.^.attack"},{"->":".^.^.^.7"},null]}],"nop","\n",{"#f":5}],"c-1":["\n",["ev",{"VAR?":"quaid_dir"},"str","^left","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",1,"/ev",{"VAR=":"quaid_hit","re":true},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","ev",0,"/ev",{"VAR=":"quaid_hit","re":true},{"->":".^.^.^.3"},null]}],"nop","\n",["ev",{"VAR?":"quaid_run"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.^.^.running"},{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.^.^.^.attack"},{"->":".^.^.^.7"},null]}],"nop","\n",{"#f":5}],"c-2":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You take a moment to examine the enemy. The two pillars of knobbly virility show no difference between them. To the naked eye they seem identical. You cannot be sure if this illusion reflects light or if it has been projected into your mind. One thing is clear however, it cannot resist taunting you. The one on the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^ beckons you to make your stand.","\n",{"->":".^.^.^"},{"#f":5}]}],{"#f":1}],"running":[["^You dash towards the one on the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^.","\n",["ev",{"VAR?":"quaid_hit"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Both figures bend over to grab you. A wall of brawn is about to smash into your snout but miraculously you pass through it. The illusion continues to shimmer and waver from your passage as you head towards an exit.","\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","ev",80,"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Your feet skid on the flagstones and you end up sliding in-between its legs.","\n","^You'll take it. Springing to your feet behind the doubler you bolt towards an exit.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^Your snout smacks into a wall of abs. You stagger backwards and manage to duck as it tries to grab you. This gives you a chance to escape.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^It reaches out and clamps a meaty hand on your head. You're vaguely aware of the other one, the illusion, leaning back to bray with laughter. It has no neck so it's a very exaggerated movement.","\n","^There is a cracking noise and a terrible pain in your skull. You pass out as it pulls you into a terminal embrace.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.9"},null]}],"nop","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"attack":["^You charge towards the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^ one.","\n","ev",60,"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"quaid_hit"},"/ev",{"->":".^.b","c":true},{"b":["\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",1,"/ev",{"VAR=":"quaid_death","re":true},"^You thrust your spear towards its belly but it impressively catches the tip between its abs. The rest of the doubler's muscles inflate to support its grip. You give the spear another shove and the swollen beast explodes with a pop.","\n","^Strips of meaty skin fall the floor and a sweaty smell fills the room. The illusion is nowhere to be seen.","\n",{"->":"navigate"},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","ev",2,"/ev",{"VAR=":"quaid_death","re":true},"^Your spear drives deep into its belly with a squeaking noise. The doubler looks down at you before striking you with ","ev",3,5,"rnd","out","/ev","^ punches.","\n","^You manage to wrestle your spear free and air begins rush out of the hole. The quaid's illusion looks on in horror as its source deflates into a lifeless sack. Then it fades, allowing you to leave without being judged.","\n",{"->":"navigate"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^\"Ha ha ha!\" it laughs, \"you think this is the real quaid?\"","\n","^You hesitate. No one mentioned these things could talk. Stupified, you turn to attack the other one.","\n","^\"It is!\" says the one on your ","ev",{"VAR?":"quaid_dir"},"out","/ev","^.","\n","^You try to correct your strike but it's too late. The quaid your spear hits begins to shimmer and the powerful arms of the other scoop you up. Your bones snap and splinter under its deadly embrace. There is no escape.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.3"},null]}],"nop","\n",{"->":".^.^.^.14"},null]}],[{"->":".^.b"},{"b":["\n","^Your spear passes through it.","\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You almost stumble but manage to turn your lunge into a sprint. Looks like you're going to run away instead. The illusion shimmers as you run through it and make for an exit.","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You stagger forwards and the real quaid gives you kick that sends you sprawling across the floor. You pick yourself up, spear raised towards the real one, and edge towards an exit.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You're left stumbling. You turn to attack the other one but it's moved behind you.","\n","^Suddenly two strong hands grab your snout and the back of your head. They force you to look to the ","ev",{"VAR?":"quaid_dir"},"out","/ev","^ very quickly. There is a cracking noise coming from your neck and then you can't feel anything.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.5"},null]}],"nop","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.14"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"#f":1}],"#f":1}],"drinks_bar":["ev","str","^The Bar","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["ev",0,2,"rnd","/ev",{"VAR=":"bar_drink","re":true},"\n","^In this room is a drinks bar. Behind a counter and in front of a wall of bottles is a kobold wearing a black waistcoat. You're not sure how this would go over with humans exploring this place.","\n","^She looks up from polishing a glass and says, \"care for a drink?\"","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[[["ev",{"^->":"drinks_bar.opt.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Why is there a bar here?\"",{"->":"$r","var":true},null]}],"ev","str","^Approach the bar.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["ev",{"^->":"drinks_bar.opt.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^, you ask.","\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^\"Management says we need to think outside the box when it comes to trap design\", she says.","\n",[["ev",{"^->":"drinks_bar.opt.0.c-0.16.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"By putting a bar in a labyrinth?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.opt.0.c-0.16.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":18},{"s":["^\"Are you the trap?\", you ask.",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"drinks_bar.opt.0.c-0.16.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^, you ask.","\n","^\"Well it's not my idea\", she replies, \"anyway, what can I get you?\"","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"drinks_bar.opt.0.c-0.16.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"\n","^\"They don't pay me enough to be a trap\", she replies, \"not with that spear of yours. Anyway, what can I get you?\"","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["thread",{"->":".^.^.^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":5}],"c-1":["\n","^You walk up to the bar. ","<>",{"->":".^.^.^.^.bar"},"\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"returning":["^You return to the room with the bar. ",["ev","visit",3,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"nop",{"s0":["pop","^The waitress stands behind the counter as you saw her before. \"Thirsty?\" she asks.",{"->":".^.^.29"},null],"s1":["pop","^Its attendant is sloshing a blue liquid around in a glass. She sniffs it, then notices you arrive. The barmaid quickly puts the glass under the counter and stands to attention.",{"->":".^.^.29"},null],"s2":["pop","^It seems the barmaid isn't here. Then she rises up from behind the counter. \"Hello\", she says.",{"->":".^.^.29"},null],"s3":["pop","^The waitress patiently waits for you to approach.",{"->":".^.^.29"},null],"#f":5}],"\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"bar":["ev",{"VAR?":"bar_drink"},1,"+",3,"%","/ev",{"VAR=":"bar_drink","re":true},["ev",{"VAR?":"bar_drink"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^The waitress puts a couple of bottles on the table. One has a red liquid inside, the other has a green liquid.",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^ The bottles look different to the last time she offered this.",{"->":".^.^.17"},null],"#f":5}],"\n","^\"One of these should cure you of all ills and the other will probably kill you\", she says. \"Which would you like?\" ",{"->":".^.^.^.^.pick_red_green"},"\n",{"->":".^.^.^.11"},null]}],["ev",{"VAR?":"bar_drink"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",3,5,2,"+","rnd","/ev",{"VAR=":"bar_chug_rounds","re":true},"\n","^The waitress lifts a heavy wooden keg on to the edge of the bar.","\n","^\"If can you drink all of this in one go it will completely heal you and make you lucky\", she says. \"but I'm not sure how full it is.\"","\n",{"->":".^.^.^.^.barrel_opt"},{"->":".^.^.^.11"},null]}],["ev",{"VAR?":"bar_drink"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^The waitress produces a small flask, apparently empty. She jiggles it and you hear a sloshing noise.","\n","^\"This one is called Invisible Medicine\", she explains, \"only the fortunate can feel its effects. It will either hurt you or heal you, but it's not fatal. Would you like some?\"","\n",["ev",{"^->":"drinks_bar.bar.10.b.5.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":6},{"s":["^\"No",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.bar.10.b.6.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":6},{"s":["^\"Yes",{"->":"$r","var":true},null]}],{"->":".^.^.^.11"},{"c-0":["ev",{"^->":"drinks_bar.bar.10.b.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.5.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":"drinks_bar.leave"},{"#f":5}],"c-1":["ev",{"^->":"drinks_bar.bar.10.b.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.6.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":"drinks_bar.invisible"},{"#f":5}]}]}],"nop","\n",{"#f":1}],"barrel_opt":[[["ev",{"^->":"drinks_bar.barrel_opt.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":6},{"s":["^\"Nope",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.barrel_opt.0.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":6},{"s":["^\"Yes",{"->":"$r","var":true},null]}],"ev","str","^Examine the barrel.","/str","/ev",{"*":".^.c-2","flg":20},{"c-0":["ev",{"^->":"drinks_bar.barrel_opt.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":".^.^.^.^.leave"},{"#f":5}],"c-1":["ev",{"^->":"drinks_bar.barrel_opt.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":".^.^.^.^.chug"},{"#f":5}],"c-2":["\n","ev",{"VAR?":"bar_chug_rounds"},"out","/ev","\n","^You place a hand on top of the barrel and slosh it from side to side. ","ev",{"VAR?":"bar_chug_rounds"},2,"-",{"VAR?":"stamina"},">=","/ev",[{"->":".^.b","c":true},{"b":["^There's a lot inside.",{"->":".^.^.^.16"},null]}],[{"->":".^.b"},{"b":["^You think you can handle this.",{"->":".^.^.^.16"},null]}],"nop","\n",{"->":".^.^.^"},{"#f":5}]}],{"#f":1}],"invisible":[{"->t->":".^.^.pour"},"^You raise the seemingly empty vessel to your mouth and dip your tongue inside to test for wetness. ","<>","\n",["ev",{"VAR?":"lucky"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n",["ev",{"CNT?":".^.^.^.^"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^There's nothing. The barmaid lifts a half-full bottle of something from behind the bar and shakes it. That was the sloshing sound you heard.","\n","^\"Ha ha,\" she laughs, \"your face. Anyway, would you like an actual drink?\"","\n",{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","^There's nothing. You sulkily put your \"drink\" back on the bar.","\n","^\"Never gets old that one\", she says with mirth, \"another? Maybe a real drink this time?\"","\n",{"->":".^.^.^.3"},null]}],"nop","\n",["ev",{"^->":"drinks_bar.invisible.4.b.5.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":6},{"s":["^\"Yes",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.invisible.4.b.6.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":6},{"s":["^\"No",{"->":"$r","var":true},null]}],{"->":".^.^.^.6"},{"c-0":["ev",{"^->":"drinks_bar.invisible.4.b.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.5.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":"drinks_bar.bar"},{"#f":5}],"c-1":["ev",{"^->":"drinks_bar.invisible.4.b.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.6.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":"drinks_bar.leave"},{"#f":5}]}]}],[{"->":".^.b"},{"b":["\n","^Surprisingly there's something in there. You drink.","\n","ev",{"^->":"drinks_bar.heal_one"},{"^->":"drinks_bar.one_effort"},{"f()":"pickOne"},"/ev",{"temp=":"divert"},"\n",{"->":"divert","var":true},{"->":".^.^.^.6"},null]}],"nop","\n",{"#f":1}],"heal_one":["^It is ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^a little sour",{"->":".^.^.23"},null],"s1":["pop","^slighly pungent",{"->":".^.^.23"},null],"s2":["pop","^a bit too sweet",{"->":".^.^.23"},null],"#f":5}],"^ with a ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^smoky",{"->":".^.^.23"},null],"s1":["pop","^bitter",{"->":".^.^.23"},null],"s2":["pop","^salty",{"->":".^.^.23"},null],"#f":5}],"^ aftertaste. ","<>","\n",["ev",{"VAR?":"stamina"},5,"<","/ev",{"->":".^.b","c":true},{"b":["\n","ev",1,{"f()":"gainStamina"},"pop","/ev","\n","^You feel strangely energised after finishing it.","\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","^You find it oddly moorish and motion for another. She appears to mime pouring more for you and you drink that down as well. It doesn't appear to have any effect other than making you wonder why you want more.","\n",{"->":".^.^.^.9"},null]}],"nop","\n","^\"Thanks\", you say.","\n","^\"My pleasure\", she replies.","\n",{"->":"navigate"},{"#f":3}],"one_effort":[["ev",{"VAR?":"stamina"},1,">","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",{"->":".^.^.^.1"},null]}],"nop","\n","^You spit it out. ",["ev","visit",3,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"nop",{"s0":["pop","^You spit afterwards as well to get the burning sensation out of your mouth.",{"->":".^.^.29"},null],"s1":["pop","^You can't believe you fell for that again.",{"->":".^.^.29"},null],"s2":["pop","^You're managing to get a good distance on these spits now. A smattering of burn marks now decorate the floor next to the bar.",{"->":".^.^.29"},null],"s3":["pop","^You're used to this now but it still takes its toll.",{"->":".^.^.29"},null],"#f":5}],"^ You see the barmaid reach for another bottle but you shake your head.","\n",{"->":"navigate"},{"#f":3}],"chug":["ev",0,"/ev",{"VAR=":"bar_chugs","re":true},"ev",{"VAR?":"bar_chug_rounds"},"out","/ev","\n","^You pull the heavy barrel over to your edge of the bar and put your mouth below the tap on its bottom edge before turning it open.","\n",{"->":".^.^.chug_round"},{"#f":1}],"chug_round":[["ev",{"VAR?":"bar_chugs"},1,"+",{"VAR=":"bar_chugs","re":true},"/ev",["ev",{"VAR?":"bar_chugs"},1,">",{"VAR?":"bar_chugs"},{"VAR?":"bar_chug_rounds"},"<","&&","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",{"->":".^.^.^.7"},null]}],"nop","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n","^As you struggle to breathe between swallows, some of the ale goes down the wrong hole and you begin to choke. You collapse, your swollen belly keeping you on your back and your head unforunately still under the tap. The merciless stream of beverage spills into your nostrils as well as your mouth and you start to drown.","\n","^\"You okay down there?\" asks the barmaid.","\n","^You glug out a cough for help but it only helps fill your lungs with ale. You black out as the marinade continues.","\n","end",{"->":".^.^.^.16"},null]}],["ev",{"VAR?":"bar_chugs"},{"VAR?":"bar_chug_rounds"},">=","/ev",{"->":".^.b","c":true},{"b":["\n","ev",5,{"f()":"gainStamina"},"pop","/ev","\n","ev",1,"/ev",{"VAR=":"lucky","re":true},"^Eventually the stream of liquid comes to a trickle and stops. You let the final few drops in and suddenly you don't feel full anymore. In fact you feel great.","\n","^\"Good?\" asks the waitress.","\n","^You nod, a bit speechless from the magic applied to you. ","<>","\n",{"->":"drinks_bar.leave"},{"->":".^.^.^.16"},null]}],["ev",{"VAR?":"bar_chugs"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You let the ale fill your mouth before taking your first swallow. It tastes surprisingly good. A few gulps later you're feeling full and there's still plenty to go.","\n",{"->":".^.^.^.16"},null]}],["ev",{"VAR?":"bar_chugs"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^The drink continues to pour and you feel very ill. You're unsure if it's wise to continue.","\n",{"->":".^.^.^.16"},null]}],["ev",{"VAR?":"bar_chugs"},3,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^On and on. You feel short of breath. You give the barrel an investigative wobble and the sloshing inside demands you quaff further.","\n",{"->":".^.^.^.16"},null]}],["ev",{"VAR?":"bar_chugs"},4,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You start to gag and cough, spilling gouts of beverage over your jaw and neck. Still the ale keeps coming.","\n",{"->":".^.^.^.16"},null]}],["ev",{"VAR?":"bar_chugs"},5,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^Tears well up in your eyes. You're unsure if it's just the ale leaking out any way it can.","\n",{"->":".^.^.^.16"},null]}],"nop","\n","ev","str","^Keep drinking.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Quit.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":[{"->":".^.^.^"},"\n",{"#f":5}],"c-1":["\n","^You stop, feeling somewhat quesy and short of breath. ","<>","\n",["ev",{"CNT?":"drinks_bar.chug"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You look to the barmaid.","\n","^\"Oh, they told me you'd die\", she says, almost speaking your thoughts aloud.","\n",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","^Sheepishly she remarks, \"It's not certain death if you stop drinking but I have to stick to the script.\"","\n",{"->":".^.^.^.6"},null]}],"nop","\n",{"->":".^.^.^.^.leave"},{"#f":5}]}],{"#f":1}],"pick_red_green":[["ev",{"^->":"drinks_bar.heal_all"},{"^->":"drinks_bar.one_health_left"},{"f()":"pickOne"},"/ev",{"temp=":"divert"},"\n",["ev",{"^->":"drinks_bar.pick_red_green.0.7.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"VAR?":"stamina"},5,"<","/ev",{"*":".^.^.c-0","flg":7},{"s":["^\"Red",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.pick_red_green.0.8.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"VAR?":"stamina"},5,"<","/ev",{"*":".^.^.c-1","flg":7},{"s":["^\"Green",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.pick_red_green.0.9.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"VAR?":"stamina"},5,"<","/ev",{"*":".^.^.c-2","flg":7},{"s":["^\"Blue",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.pick_red_green.0.10.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-3","flg":18},{"s":["^\"Which is which?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.pick_red_green.0.11.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"VAR?":"stamina"},5,"==","/ev",{"*":".^.^.c-4","flg":7},{"s":["^\"Actually I don't need healing or killing",{"->":"$r","var":true},null]}],["ev",{"^->":"drinks_bar.pick_red_green.0.12.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"VAR?":"stamina"},5,"<","/ev",{"*":".^.^.c-5","flg":7},{"s":["^\"I'm not thirsty",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"drinks_bar.pick_red_green.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.7.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":"divert","var":true},{"#f":5}],"c-1":["ev",{"^->":"drinks_bar.pick_red_green.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.8.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":"divert","var":true},{"#f":5}],"c-2":["ev",{"^->":"drinks_bar.pick_red_green.0.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.9.s"},[{"#n":"$r2"}],"^\", quickly adding, \"I mean ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^red",{"->":".^.^.17"},null],"s1":["pop","^green",{"->":".^.^.17"},null],"#f":5}],"^.\"","\n",{"->":"divert","var":true},{"#f":5}],"c-3":["ev",{"^->":"drinks_bar.pick_red_green.0.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.10.s"},[{"#n":"$r2"}],"^ you ask.","\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^\"No idea\", she explains, \"I was asked to memorise introductions for each of the drinks. Then they told me not to drink anything.\"","\n","^A moment passes and she pushes both bottles towards you to reiterate the offer. ",{"->":".^.^.^"},"\n",{"#f":5}],"c-4":["ev",{"^->":"drinks_bar.pick_red_green.0.c-4.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.11.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"Ah\", she takes away the bottles and returns with vial of black bubbling goo. \"Perhaps I can interest you in something to change your luck. I'm pretty sure this might not be deadly.\" ",{"->":".^.^.^.^.luck_options"},"\n",{"#f":5}],"c-5":["ev",{"^->":"drinks_bar.pick_red_green.0.c-5.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.12.s"},[{"#n":"$r2"}],"^\", you reply.","\n","^\"Well I'll still be here if that changes\", she says, \"good luck.\" ",{"->":".^.^.^.^.leave"},"\n",{"#f":5}]}],{"#f":1}],"luck_options":[[["ev",{"^->":"drinks_bar.luck_options.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Change my luck how?\"",{"->":"$r","var":true},null]}],"ev","str","^Drink the vial of goo.","/str","/ev",{"*":".^.c-1","flg":4},["ev",{"^->":"drinks_bar.luck_options.0.7.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-2","flg":6},{"s":["^\"Maybe later",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"drinks_bar.luck_options.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you slowly ask.","\n","^\"Well that really is a matter of perspective\", she replies, \"I just thought I'd cover all the bases.\" ",{"->":".^.^.^"},"\n",{"#f":5}],"c-1":["\n","^You take the vial and raise it to your lips. You catch the scent of ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^corpses",{"->":".^.^.23"},null],"s1":["pop","^rotten food",{"->":".^.^.23"},null],"s2":["pop","^a blocked sink",{"->":".^.^.23"},null],"#f":5}],"^ so you take a deep breath and try to down it. ","<>","\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",0,"/ev",{"VAR=":"lucky","re":true},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",1,"/ev",{"VAR=":"lucky","re":true},{"->":".^.^.^.8"},null]}],"nop","\n","^Apart from something horrible settling in your stomach, you feel no different.","\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","^\"I hope it works\", she says looking at your expression.","\n","^\"I'll live\", you reply.","\n",{"->":".^.^.^.14"},null]}],[{"->":".^.b"},{"b":["\n","^\"Want something to wash it down with?\" she asks.","\n","^You give a wave of dissent, you're unable to talk with such a horrible taste in your mouth.","\n",{"->":".^.^.^.14"},null]}],"nop","\n",{"->":"navigate"},{"#f":5}],"c-2":["ev",{"^->":"drinks_bar.luck_options.0.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.7.s"},[{"#n":"$r2"}],"^\", you reply.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"heal_all":[{"->t->":".^.^.pour"},"^You take a sip of the drink. It tastes good. You drink the rest.","\n","ev",5,{"VAR?":"stamina"},"-","/ev",{"temp=":"amount"},"ev",5,{"f()":"gainStamina"},"pop","/ev","\n",["ev",{"VAR?":"amount"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^A warm sensation flows throughout your body. It's a shame you aren't worse off to appreciate the effect.","\n",{"->":".^.^.^.17"},null]}],[{"->":".^.b"},{"b":["\n","^Life seeps back into your bones. You can see grazes and bruises on your body fade away under the effect of this miraculous drink.","\n",{"->":".^.^.^.17"},null]}],"nop","\n","^\"Thanks\", you say.","\n","^\"My pleasure\", she replies.","\n",{"->":"navigate"},{"#f":3}],"one_health_left":[[{"->t->":".^.^.^.pour"},["ev",{"VAR?":"stamina"},1,">","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",{"->":".^.^.^.2"},null]}],"nop","\n","^You knock it back it one. ",["ev","visit",5,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"nop",{"s0":["pop","^Your limbs seize up and you are racked with convulsions",{"->":".^.^.35"},null],"s1":["pop","^You vomit something red streaked with black for a full ","ev",5,10,"rnd","out","/ev","^ seconds.",{"->":".^.^.35"},null],"s2":["pop","^You suddenly start sneezing uncontrollably. You sneeze so many times your nose is bleeding.",{"->":".^.^.35"},null],"s3":["pop","^You black out, vaguely aware of hitting the floor in a very undignified manner. You wake up in great pain.",{"->":".^.^.35"},null],"s4":["pop","^You feel the drink crawl its way back up your throat and out of your mouth. Choking you in the process. You cough out a horrid brown slug thing that splashes on to the floor. It pulsates before slithering away at frightening speed.",{"->":".^.^.35"},null],"#f":5}],"^ You take a moment to recover.","\n","^\"Another?\" she asks.","\n",["ev",{"^->":"drinks_bar.one_health_left.0.10.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":6},{"s":["^\"No",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"drinks_bar.one_health_left.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.10.s"},[{"#n":"$r2"}],"^\", you say.",{"->":".^.^.^.^.leave"},"\n",{"#f":5}]}],{"#f":3}],"pour":["^She pours it into a ",["ev","visit",7,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"ev","du",5,"==","/ev",{"->":".^.s5","c":true},"ev","du",6,"==","/ev",{"->":".^.s6","c":true},"nop",{"s0":["pop","^small glass",{"->":".^.^.47"},null],"s1":["pop","^tall glass",{"->":".^.^.47"},null],"s2":["pop","^wooden cup",{"->":".^.^.47"},null],"s3":["pop","^wooden bowl",{"->":".^.^.47"},null],"s4":["pop","^clay mug",{"->":".^.^.47"},null],"s5":["pop","^clay jug",{"->":".^.^.47"},null],"s6":["pop","^tiny open topped barrel",{"->":".^.^.47"},null],"#f":5}],"^.","\n","ev","void","/ev","->->",{"#f":1}],"leave":["^You leave the bar and the waitress promptly ",["ev","visit",4,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"nop",{"s0":["pop","^goes about cleaning it.",{"->":".^.^.29"},null],"s1":["pop","^starts organising the bottles by colour.",{"->":".^.^.29"},null],"s2":["pop","^starts doodling on a scrap of paper.",{"->":".^.^.29"},null],"s3":["pop","^starts polishing glasses.",{"->":".^.^.29"},null],"#f":5}],"\n",{"->":"navigate"},{"#f":1}],"#f":1}],"falconsloth":["ev","str","^Falconsloth","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter this room to find a beast hanging from bars that cross the ceiling, a falconsloth. It has the head of a falcon and the body of a very large sloth. You've only seen pictures of it till now. You remember that it was supposed to be either incredibly fast or incredibly slow. You've forgotten which.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",{"VAR?":"falconsloth_dead"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"navigate"},{"->":".^.^.^.4"},null]}],["ev",{"VAR?":"falconsloth_speed"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.speed0"},{"->":".^.^.^.4"},null]}],["ev",{"VAR?":"falconsloth_speed"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.speed1"},{"->":".^.^.^.4"},null]}],["ev",{"VAR?":"falconsloth_speed"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.speed2"},{"->":".^.^.^.4"},null]}],"nop","\n",{"#f":1}],"speed0":[["ev",60,"/ev",{"temp=":"chance_run"},"ev",50,"/ev",{"temp=":"chance_attack"},"ev",{"CNT?":".^.^.^.remember"},"/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"chance_run"},10,"+",{"temp=":"chance_run","re":true},"/ev","ev",{"VAR?":"chance_attack"},10,"+",{"temp=":"chance_attack","re":true},"/ev",{"->":".^.^.^.12"},null]}],"nop","\n","ev","str","^Try to remember.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Run around the falconsloth.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Attack the falconsloth.","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":[{"->":".^.^.^.^.remember"},"\n",{"#f":5}],"c-1":["\n","thread",{"->":".^.^.^.^.set_speed"},["ev",{"VAR?":"falconsloth_speed"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You sprint forwards, keeping one eye trained on the beast. When you see that it's moving very slowly you jog to a stop. It is probably making its way towards you but it's hard to tell.","\n","^Unthreatened, you make your way towards an exit at a leisurely pace.","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.5"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],["ev",{"VAR?":"falconsloth_speed"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You sprint to the side of it only to find the beast hanging in front of you. You turn to dash around but it appears in front of you again, with no sign of having moved other than its position and a gust of air. You're forced to back off with your spear raised. The falconsloth holds its place whilst staring you down.","\n","ev","str","^Try running around again. (%","ev",{"VAR?":"chance_run"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Attack the falconsloth. (%","ev",{"VAR?":"chance_attack"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"->":".^.^.^.5"},{"c-0":["\n","ev",{"VAR?":"chance_run"},"/ev",{"VAR=":"temp_chance","re":true},{"->":"falconsloth.run_fast"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"chance_attack"},"/ev",{"VAR=":"temp_chance","re":true},{"->":"falconsloth.attack_fast"},{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"#f":5}],"c-2":["\n","thread",{"->":".^.^.^.^.set_speed"},["ev",{"VAR?":"falconsloth_speed"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You dash forwards with your spear leading the charge but its stillness makes you pause. In response to your threat it begins a slow retreat. So slow that you wonder why it's even trying.","\n",{"->":"falconsloth.opt"},{"->":".^.^.^.5"},null]}],["ev",{"VAR?":"falconsloth_speed"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You adjust your grip on your spear, look up, and the falconsloth is hanging from a different set of bars. You pause to reconsider.","\n","ev","str","^Run around the falconsloth. (%","ev",{"VAR?":"chance_run"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Continue the attack. (%","ev",{"VAR?":"chance_attack"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"->":".^.^.^.5"},{"c-0":["\n","ev",{"VAR?":"chance_run"},"/ev",{"VAR=":"temp_chance","re":true},{"->":"falconsloth.run_fast"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"chance_attack"},"/ev",{"VAR=":"temp_chance","re":true},{"->":"falconsloth.attack_fast"},{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"#f":5}],"c-3":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"remember":["ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You think hard about the pictures you saw. There were two kinds. A pair of breeds growing in similar territory, one of them employing the cunning strategy of appearing like its ferocious cousin.","\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","^It looks pretty still. You're confident that fortune is on your side.","\n",{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["\n","^You look closer. It's very still but you're sure it was in a different position a second ago.","\n",{"->":".^.^.^.10"},null]}],"nop",{"->":".^.^.speed0"},"\n",{"#f":1}],"speed1":[["ev","str","^Walk around the falconsloth.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Attack the falconsloth. (%95)","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^You casually walk around the falconsloth. ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^It begins to crane its head to follow you. Too sluggish to keep up with your pace.",{"->":".^.^.23"},null],"s1":["pop","^It detatches one limb, perhaps to swipe or prod at you but you're not going to wait the hour it will take to find out.",{"->":".^.^.23"},null],"s2":["pop","^It yawns as you pass. Perhaps describing the quality of its company.",{"->":".^.^.23"},null],"#f":5}],"\n","ev",1,"/ev",{"->":"go_direction"},{"#f":5}],"c-1":["\n","ev",95,"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",1,"/ev",{"VAR=":"falconsloth_dead","re":true},"^You walk up to the falconsloth and stab the motionless target in the heart. It hits the ground with a thump before rolling on to its side. Limbs outstretched, reaching for a ceiling it will never touch again.","\n","^It's not clear who in this room is the real monster.","\n",{"->":"navigate"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^You approach the falconsloth with your spear raised, but stop. Are you really doing the right thing?",{"->":".^.^.23"},null],"s1":["pop","^You still can't do it. Not even a 95% chance will let harm this gentle creature.",{"->":".^.^.23"},null],"s2":["pop","^Face it. It's not meant to be.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.^.^"},{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":5}]}],{"#f":1}],"speed2":[["ev",60,"/ev",{"temp=":"chance_run"},"ev",50,"/ev",{"temp=":"chance_attack"},"ev",{"CNT?":".^.^.^.remember"},"/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"chance_run"},10,"+",{"temp=":"chance_run","re":true},"/ev","ev",{"VAR?":"chance_attack"},10,"+",{"temp=":"chance_attack","re":true},"/ev",{"->":".^.^.^.12"},null]}],"nop","\n","ev","str","^Run around the falconsloth. (%","ev",{"VAR?":"chance_run"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Attack the falconsloth. (%","ev",{"VAR?":"chance_attack"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","ev",{"VAR?":"chance_run"},"/ev",{"VAR=":"temp_chance","re":true},{"->":".^.^.^.^.run_fast"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"chance_attack"},"/ev",{"VAR=":"temp_chance","re":true},{"->":".^.^.^.^.attack_fast"},{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"attack_fast":["ev",1,"/ev",{"VAR=":"falconsloth_dead","re":true},"^You thrust your spear towards the beast but there's a snap of wind and its not there anymore.","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You have a hunch, it likes to look its prey in the eyes.","\n","^You flip your spear over and stab blindly behind you. You hear a keening cry of pain followed by a thump. A glance behind you confirms your lucky blow did the job, the threat has been vanquished.","\n",{"->":".^.^.^.13"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You strike in every direction at once. Surely you will hit something.","\n","^You do. Your spear is in the beast's belly and it lets out a keen of pain. It thrashes with savage speed, shaking you as you hang on to the spear. Finally it goes limp and falls off. Exhausted, you retrieve your spear.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You turn around and there it is, hanging in the same position. Staring at you with its big black eyes over a hooked beak.","\n","^Your death is fast and by no means merciful.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.13"},null]}],"nop","\n","^Free to survey the room you find a small cloth bag tucked behind the bars the falconsloth was hanging from. It holds ","ev",4,6,{"f()":"loot"},"out","/ev","^ gold coins.","\n",{"->":"navigate"},{"#f":1}],"run_fast":[["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^You run a zig zag across the room and manage to trick your way past the beast. It tries several times to cut you off but you are too wily.",{"->":".^.^.23"},null],"s1":["pop","^You pretend to leave only to run around the perimeter of the room with your spear in front of you, daring the beast to skewer itself.",{"->":".^.^.23"},null],"s2":["pop","^You dive through the gap in its pairs of limbs. It appears too stunned by your bravery to pursue. Or it might be daydreaming, you're not staying to find out.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^You try many times to dodge around the creature but it keeps cutting you off. Only by working your way towards an exit do you escape.",{"->":".^.^.23"},null],"s1":["pop","^You run forwards and it suddenly appears in front of you. You roll under it and get up running but you feel its beak nip at your tail as you escape.",{"->":".^.^.23"},null],"s2":["pop","^You dive through the gap in its pairs of limbs but end up flopping on to its belly. The falconsloth thrashes, throwing you free and providing a window of escape as you pull yourself off of the floor.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You leap forwards and you're instantly clotheslined by a beam of feathers and muscle that bars your path. As you land on the floor on your back you see the falconsloth with one arm outstretched. It gazes at you with its round black eyes, arm still extended as if hailing a form of transport it clearly doesn't need. Then there is a feathered blur and an instant of terrible pain. Your death is too quick to describe.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":["^You return to the room with the falconsloth. ","<>","\n",["ev",{"VAR?":"falconsloth_dead"},"/ev",{"->":".^.b","c":true},{"b":["\n","^It's still dead. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You prod it with your spear to be sure and the corpse shrugs a motion it never showed in life.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.7"},null]}],["ev",{"VAR?":"falconsloth_speed"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It hangs motionless on its bars, staring you down with its big black eyes.","\n",{"->":".^.^.^.7"},null]}],["ev",{"VAR?":"falconsloth_speed"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^It begins an approach towards you. At its current rate it should reach you by tomorrow.",{"->":".^.^.17"},null],"s1":["pop","^It appears to be moving to hang from a different set of bars. Its very boring to watch.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.7"},null]}],["ev",{"VAR?":"falconsloth_speed"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It hangs there not moving. You blink and when you open eyes it is hanging in the same position but much closer.","\n",{"->":".^.^.^.7"},null]}],"nop","\n",{"->":".^.^.opt"},{"#f":1}],"set_speed":[["ev",{"VAR?":"falconsloth_speed"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",0,"/ev",{"VAR=":"lucky","re":true},"ev",1,"/ev",{"VAR=":"falconsloth_speed","re":true},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","ev",2,"/ev",{"VAR=":"falconsloth_speed","re":true},{"->":".^.^.^.3"},null]}],"nop","\n",{"->":".^.^.^.1"},null]}],"nop","\n","done",{"#f":1}],"#f":1}],"finger":["ev","str","^Finger","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"finger.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"finger.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^In the center of this room is large stone sculpture: A huge kobold hand pointing at the floor. Its wrist reaches through a hole in the ceiling - too tight to let you see the forearm. The clawed thumb is tucked in and the extended first digit presses against the flagstones.","\n","^You check out the floor. It seems normal, you're not sure what the sculpture is saying.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev",90,{"CNT?":"finger.remove_coin"},15,"*","-","/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Inspect the sculpture.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Look for a mechanism.","/str",{"CNT?":"finger.inspect"},{"CNT?":"finger.remove_coin"},3,"<","&&","/ev",{"*":".^.c-1","flg":21},"ev","str","^Remove a gold coin from the stack. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str",{"CNT?":"finger.inspect"},{"CNT?":"finger.remove_coin"},3,"<","&&","/ev",{"*":".^.c-2","flg":5},{"c-0":[{"->":"finger.inspect"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You search high and low for buttons or levers. Nothing. All manner of prodding and massage reveal the hand and finger to be inscrutable. The walls and floor offer no secrets.","\n","^You take another look at the stack. On the edge of each coin is an inscription:","\n","^<i>Easily Impressed</i>","\n","^With a good strike of your spear you might be able to ruin the inscription.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-2":["\n","^You attempt to remove a coin from the stack.","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"finger.remove_coin"},{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^You struggle to lift the finger but to no avail. After a few more attempts you resolve to try again later.",{"->":".^.^.23"},null],"s1":["pop","^You try to whack the coins free with your spear but after several blows you worry you might damage the weapon and leave yourself defenceless. Perhaps you should try again after a break.",{"->":".^.^.23"},null],"s2":["pop","^Another attempt to free the coins ends in failure.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.10"},null]}],"nop","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"inspect":["^After making sure that no other challenges occupy the room, you take a closer look at what the stone hand is pointing at. Under the finger you can see a stack of coins.","\n","^You back up a bit and give the stack a poke with the butt of your spear. They won't move. They seem to be pressed tight against the floor.","\n","^You tap the sculpture. It doesn't move either. It must be very heavy.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"returning":["^You return to the room with the giant kobold hand pointing at the floor.","ev",{"CNT?":".^.^.remove_coin"},3,"<",{"CNT?":".^.^.inspect"},"&&","/ev",[{"->":".^.b","c":true},{"b":["^ The golden glint of its hostage gold remains under its finger.",{"->":".^.^.^.9"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"remove_coin":["ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev",["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^You hammer away at the stack with your spear but not a single piece of it moves. You even try lifting the sculpture but after pushing it from all sides you can't get it to move in the slightest.<br><br>Frustrated, you kick the stack. A single coin flies out from the pile, sliding across the the floor until it hits a wall. The finger closes the gap with a heavy clink. You kick it again but it yields no more. You fetch your prize whilst considering your next move.",{"->":".^.^.23"},null],"s1":["pop","^You try to wedge the blade of your spear's head between two of the coins in the stack. After half a minute of wiggling you've managed to get part of your spear in. You try to move your weapon but now it seems to be as stuck as the coins its sandwiched between. Several hard tugs free your spear and steal your balance. You fall over as a single coin flies out of the stack. You pick yourself up. Then you pick the coin up.",{"->":".^.^.23"},null],"s2":["pop","^You lie on your back next to the stack, positioning yourself under the closed fist of the stone hand. Putting your feet on the knuckles of it, you push with your legs whilst trying to pull the stack of coins away with your own hand. Every muscle you can conscript gives all it can. Suddenly you feel something shift, the coins move freely.<br>You swat the stack aside, sending its parts to three corners of the room. Then you roll away as the finger prods the floor with undeniable force. Finally you get up and collect your winnings. ","thread",{"->":"finger.add_gold"},{"->":".^.^.23"},null],"#f":5}],"\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"add_gold":["ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","done",{"#f":1}],"#f":1}],"flies":["ev","str","^Flies","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"flies.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"flies.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^The walls in this room are seemingly black. You casually wave a buzzing fly away from your face before you are forced to dismiss another, and another. The room hums as the black peels away from the walls and the room fills with flies.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",60,{"CNT?":"flies.run_circle"},25,"*","+","/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Swat some flies. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str",{"CNT?":"flies.dead_flies"},"!","/ev",{"*":".^.c-0","flg":5},"ev","str","^Run in a circle. (-1 stamina)","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Return the way you came.","/str",{"CNT?":"flies.dead_flies"},"!","/ev",{"*":".^.c-2","flg":5},{"c-0":[{"->":"flies.swat"},"\n",{"#f":5}],"c-1":["^ ",{"->":"flies.run_circle"},"\n",{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"run_circle":["ev",{"f()":"loseStamina"},"pop","/ev","\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^Sensing the aggression of the flies you run a circle around the room to make them give chase. They coalesce into a humming tentacle - something you can strike easier. With your new battle tactic you feel better equipped to take on your enemy.","\n",{"->":".^.^.opt"},{"#f":1}],"returning":["^You return to the room of flies. ","<>","\n",["ev",{"CNT?":"flies.dead_flies"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","^They still fill the room. An angry cloud that denies you the opportunity to pass. ",{"->":"flies.opt"},"\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"flies.dead_flies"},{"->":".^.^.^.5"},null]}],"nop","\n",{"#f":1}],"swat":["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},"ev",{"VAR?":"isSuccess"},"!","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",{"->":".^.^.^.10"},null]}],"nop","\n",["ev",{"VAR?":"stamina"},0,"<=","/ev",{"->":".^.b","c":true},{"b":["\n",["ev",{"CNT?":"flies"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You frantically stab, stamp, and slap every fly in the room. Finally the buzzing ceases and you","\n",{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","^You strike out at every fly in the room. A ceaseless montage of slaps, stabs, and stamps. There are too many. You","\n",{"->":".^.^.^.3"},null]}],"nop","<>","^ collapse in exhaustion. You know that if you pass out you will surely be dispatched in your sleep. You close your eyes for a brief moment and never open them again.","\n","end",{"->":".^.^.^.14"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You thrust your spear into the mass of flies, again and again. Stabbing and twirling. You throw a kick in there as well for effect. You're pretty sure you managed to get at least half of them.",{"->":".^.^.17"},null],"s1":["pop","^You put down your spear and resort swatting the flies with your hands. It takes some time but eventually you murder every last one of them. ",{"->":"flies.dead_flies"},{"->":".^.^.17"},null],"#f":5}],"\n","thread",{"->":"flies.opt"},"ev","str","^Get out of there.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.14"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],"nop","\n",{"#f":1}],"dead_flies":["^The floor and walls ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^are",{"->":".^.^.17"},null],"s1":["pop","^are still",{"->":".^.^.17"},null],"#f":5}],"^ covered in a paste of dead insects.","\n","ev",{"CNT?":".^.^.get_gold"},"!","/ev",[{"->":".^.b","c":true},{"b":["^You notice slivers of yellow shining through the pulp. Gold perhaps.",{"->":".^.^.^.9"},null]}],"nop","\n","thread",{"->":".^.^.gold_getting"},{"->":"navigate"},{"#f":1}],"gold_getting":[["ev","str","^Get the gold.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":[{"->":"flies.get_gold"},"\n",{"#f":5}]}],{"#f":1}],"get_gold":["^You find ","ev",2,4,{"f()":"loot"},"out","/ev","^ gold coins.","\n",{"->":"navigate"},{"#f":1}],"#f":1}],"food_table":["ev","str","^Food","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^In this room is a table laden with food. Large joints of meat, bread cakes, and fruit make a ramshackle pile of provisions.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Take a bite.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Inspect the table","/str",{"CNT?":".^.^.^.bite"},"!","/ev",{"*":".^.c-1","flg":21},{"c-0":["\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"food_table.stone"},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"food_table.bite"},{"->":".^.^.^.3"},null]}],"nop","\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You walk a circle around the table, careful not to get too close in case you trigger a reaction. It looks a lot like food and nothing more. You take a look under the table. In its shadow you can barely make out a message carved into the floor.","\n","^<i>A banquet fit for a dragon.</i>","\n","^But your tribe doesn't serve a dragon.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"returning":[["ev",{"CNT?":".^.^.^.stone"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.return_stone"},{"->":".^.^.^.4"},null]}],["ev",{"CNT?":".^.^.^.eat_opt"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.eat"},{"->":".^.^.^.4"},null]}],["ev",{"CNT?":".^.^.^.bite"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.return_bite"},{"->":".^.^.^.4"},null]}],[{"->":".^.b"},{"b":["\n","^You return to the room with the table of food.","\n","thread",{"->":".^.^.^.^.opt"},{"->":"navigate"},{"->":".^.^.^.4"},null]}],"nop","\n",{"#f":1}],"stone":["ev",0,"/ev",{"VAR=":"lucky","re":true},"ev",{"VAR?":"gold"},2,"+",{"VAR=":"gold","re":true},"/ev","^You pick up an apple from the pile, it feels odd. Tapping it against the table makes a stony sound. You find that the rest of the food here is also made of stone, painted to look real and edible.","\n","^Frustrated you search further and find 2 gold coins at the bottom of a bowl of petrified pears. It's something at least.","\n",{"->":"navigate"},{"#f":1}],"bite":["^You reach towards an apple and it splits open revealing sharp teeth. The other apples follow suit, hissing at you from their hideous little mouths.","\n",{"->":".^.^.bite_opt"},{"#f":1}],"bite_opt":[["ev",70,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Attack the apples. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":[{"->":".^.^.^.^.fight"},"\n",{"#f":5}],"c-1":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"return_bite":["^You return to the room with the table of food. Its monstrous apple guardians, open their jagged mouths to snarl at you.","\n",{"->":".^.^.bite_opt"},{"#f":1}],"return_stone":["^You return to the room with the lithlogical banquet. It's still not edible.","\n",{"->":"navigate"},{"#f":1}],"fight":["^You strike with your spear impaling the nearest apple-thing.","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},"^Its siblings ","<>","\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^leap unnaturally off of the table at you but you're able to bat them aside. One after another you hack them in two with your spear.","\n",{"->":".^.^.^.12"},null]}],[{"->":".^.b"},{"b":["\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^leap unnaturally off of the table at you. You cut all but one of them down which sinks its teeth into your shoulder. You tear it free before throwing it to the floor and spiking it to a hissing death.","\n",{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","^fly off of the table, their unnatural flight taking you by surprise. You struggle to shake them free but their bite seems to be venomous and convulsions bring you to the floor.","\n","end",{"->":".^.^.^.3"},null]}],"nop","\n",{"->":".^.^.^.12"},null]}],"nop","\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^After you dispatch the apples you use your spear to prod the remaining food. It seems safe. You even find a gold coin nestled amoung the produce.","\n","thread",{"->":".^.^.eat_opt"},{"->":"navigate"},{"#f":1}],"eat":["^You return to the room with the ","<>","\n",["ev",{"CNT?":".^.^.^.consume"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","^table of food. ","<>","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^empty table of food. ","<>","\n",{"->":".^.^.^.5"},null]}],"nop","\n","^The smell of dead apples fills the air.","\n","thread",{"->":".^.^.eat_opt"},{"->":"navigate"},{"#f":1}],"eat_opt":[["ev","str","^Eat.","/str",{"CNT?":".^.^.^.consume"},"!","/ev",{"*":".^.c-0","flg":5},{"c-0":["\n",["ev",{"VAR?":"stamina"},5,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^The food looks tasty, but perhaps you should save it for later.","\n","ev","void","/ev","->->",{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"food_table.consume"},{"->":".^.^.^.3"},null]}],"nop","\n",{"#f":5}]}],{"#f":1}],"consume":["ev",2,{"f()":"gainStamina"},"pop","/ev","\n","^You eat a hearty meal of meat and bread. Even using the table as a seat to rest your legs.","\n",{"->":"navigate"},{"#f":1}],"#f":1}],"fresco":["ev","str","^Fresco","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"fresco.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"fresco.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^Stepping into this room you blink a few times, unsure of what you're seeing. Unlike the rest of the maze the walls, floor, and ceiling are covered in a colourful fresco. The painting depicts kobolds doing all manner of tasks, but averting their gaze from above.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Look at the ceiling.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Stare at the ceiling.","/str",{"CNT?":".^.c-0"},"/ev",{"*":".^.c-1","flg":21},"ev","str","^Chisel out the dragon's eyes with your spear.","/str",{"CNT?":".^.c-1"},"/ev",{"*":".^.c-2","flg":21},"ev","str","^Look at the painted kobolds.","/str","/ev",{"*":".^.c-3","flg":20},{"c-0":["\n","^You look up and instinctively shield yourself from the sight of it. A detailed rendering of a terrifying dragon.","\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",0,"/ev",{"VAR=":"lucky","re":true},"^You feel somewhat cursed for having gazed upon it.","\n",{"->":".^.^.^.4"},null]}],"nop","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-1":["^ ",{"->":"fresco.brave"},"\n",{"#f":5}],"c-2":[{"->":"fresco.vandal"},"\n",{"#f":5}],"c-3":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You look at the painted kobolds. Many toil carving through rock and building mazes. The level of detail is such that you can make out individual tasks they perform: the construction of traps and mechanisms, overseer kobolds pointing and directing, farmers cultivating fungus and wheeling supplies. Rarely you can see the outline of a scout kobold, their camouflage only betrayed by their golden eyes.","\n","^These are the kobolds of old who served dragons, instead of the alien Maze Builders you serve now.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"brave":["ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","ev",1,"/ev",{"VAR=":"lucky","re":true},"^Steeling yourself, you take a longer look at the ceiling. It reminds you that one of your tribe's ancestors had defeated a dragon and banished it from its own mountain. A kobold like none other, proof that such potential exists in your kind.","\n","^You notice the dragon's eyes are shining yellow. Perhaps a coin is under there.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"vandal":["^You chisle away at the dragon's face with your spear and underneath the plaster you find a gold coin. A shame that you had to ruin such a nice painting to get your payment.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"returning":["^You return to the painted room. ","<>","\n",["ev",{"CNT?":"fresco.vandal"},"/ev",{"->":".^.b","c":true},{"b":["\n","^The artwork is still impressive despite your vandalism.","\n",{"->":".^.^.^.6"},null]}],["ev",{"CNT?":"fresco.brave"},"/ev",{"->":".^.b","c":true},{"b":["\n","^The dragon's eyes shine golden as you make your way through.","\n",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","^You are careful to not look up.","\n",{"->":".^.^.^.6"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"#f":1}],"ghost_room":["ev","str","^Ghost","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^This room is unnaturally cold. Thick dust floats in the air like ashes over a fire, tumbling around an absence in the center of the room: An invisible figure, roughly as tall as you.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Thrust your spear into the figure.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Raise your hands in surrender.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^You thrust your spear into the space where the figure seems to be but feel no resistance. Further swipes merely stir the dust.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You raise your hands in surrender. (A traditional kobold greeting.) ",{"->":".^.^.^.^.first"},"\n",{"#f":5}]}],{"#f":1}],"returning":[["ev",{"CNT?":".^.^.^.first"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room with the ghost. ",["ev","visit",2,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^\"Hullo\", ",{"->":".^.^.23"},null],"s1":["pop","^\"Enjoying the maze?\"",{"->":".^.^.23"},null],"s2":["pop","^\"Are you lost?\"",{"->":".^.^.23"},null],"#f":5}],"^ says ","ev",{"CNT?":".^.^.^.^.i_am_snert"},"_","/ev",[{"->":".^.b","c":true},{"b":["^Snert. ",{"->":"ghost_room.small_talk"},{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["^the phantom ",{"->":"ghost_room.ghost_opt"},{"->":".^.^.^.10"},null]}],"nop","\n",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","^You return to the cold room. The presence is still there.","\n","thread",{"->":".^.^.^.^.opt"},{"->":"navigate"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"first":[["^A soft sound drifts over to you, \"hhhhullooo...\"","\n",["ev",{"^->":"ghost_room.first.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Hello?\"",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"ghost_room.first.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"^ you ask.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^Rough coughing replies. \"Augh, got me right in the throat they did.\" The voice issues from the invisible figure. ","<>","\n",["ev",{"CNT?":"ghost_room.opt.0.c-0"},"/ev",{"->":".^.b","c":true},{"b":["\n","^\"Anyway what's with the spear? I'm already dead.\"","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^\"I guess I should have listened when they said this job was dangerous.\"","\n",{"->":".^.^.^.5"},null]}],"nop",{"->":".^.^.^.^.ghost_opt"},"\n",{"#f":5}]}],{"#f":1}],"ghost_opt":[[["ev",{"^->":"ghost_room.ghost_opt.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"You're a ghost?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ghost_room.ghost_opt.0.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":6},{"s":["^\"I don't have time for this",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"ghost_room.ghost_opt.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you ask.","\n",{"->":".^.^.^.^.i_am_snert"},{"#f":5}],"c-1":["ev",{"^->":"ghost_room.ghost_opt.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say. And make your way out.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"i_am_snert":["^\"Well. Sharp as that spear you carry eh?","\n","^\"Yes, I was Snert. They called me down to turn something off and on again. It worked, so now I'm stuck here.\"","\n",{"->":".^.^.small_talk"},{"#f":1}],"small_talk":[[["ev",{"^->":"ghost_room.small_talk.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Is the trap that got you still here?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ghost_room.small_talk.0.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":18},{"s":["^\"What happened to you?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ghost_room.small_talk.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-2","flg":18},{"s":["^\"Do you know the way out?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ghost_room.small_talk.0.3.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","choiceCnt",0,"==","/ev",{"*":".^.^.c-3","flg":19},{"s":["^\"Is there some sort of item or clue you're supposed give me?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ghost_room.small_talk.0.4.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"CNT?":".^.^.c-3"},"/ev",{"*":".^.^.c-4","flg":19},{"s":["^\"So there's absolutely nothing useful here, not even some hidden gold?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"ghost_room.small_talk.0.5.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","choiceCnt",0,"==","/ev",{"*":".^.^.c-5","flg":7},{"s":["^\"Goodbye Snert",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"ghost_room.small_talk.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"Nah\", says Snert, \"they move these rooms about. Gek can't seem to decide on what makes an effective comedy of errors. I'm pretty sure it's just me in here.\" ",{"->":".^.^.^"},"\n",{"#f":5}],"c-1":["ev",{"^->":"ghost_room.small_talk.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"No idea\", says the ghost, \"I was just following procedure. There's all sorts of nonsense in the walls so I just disconnected it and then connected it again. Someone shouted down that it was working and then that was that.\" ",{"->":".^.^.^"},"\n",{"#f":5}],"c-2":["ev",{"^->":"ghost_room.small_talk.0.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"Sorry\", says the dead kobold, \"I'm stuck haunting this room. Not quite sure what the rules of the afterlife are supposed to be, but I didn't expect this. Perhaps there's some kind of spell holding me here.\" ",{"->":".^.^.^"},"\n",{"#f":5}],"c-3":["ev",{"^->":"ghost_room.small_talk.0.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.3.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"Don't think so\", says Snert, \"I guess they thought I might scare people or attack them.\"","\n",[["ev",{"^->":"ghost_room.small_talk.0.c-3.10.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Attack them with what?\"",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"ghost_room.small_talk.0.c-3.10.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","^\"Good question.\" ",{"->":".^.^.^.^.^"},"\n",{"#f":5}]}],{"#f":5}],"c-4":["ev",{"^->":"ghost_room.small_talk.0.c-4.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.4.s"},[{"#n":"$r2"}],"^ you ask.","\n","ev",1,"/ev",{"VAR=":"lucky","re":true},"^\"Well for me at least this has been a fortunate encounter\", says Snert. \"I've had no one to talk to for ages.","\n","^\"Who knows, perhaps some of that luck will have rubbed off on to you.\"","\n",{"->":".^.^.^"},{"#f":5}],"c-5":["ev",{"^->":"ghost_room.small_talk.0.c-5.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.5.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"#f":1}],"grease":["ev","str","^","/str",{"CNT?":"template"},"/ev","thread",{"->":"title"},"ev","str","^Grease","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"grease.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"grease.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You step into this room and begin to slide uncontrollably across the floor. Some kind of magical grease has been cast upon it.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev","str","^Try to stay put. (-1 stamina)","/str",{"VAR?":"stamina"},0,">","/ev",{"*":".^.c-0","flg":21},"ev","str","^Do nothing and slide out out of the room.","/str",{"CNT?":".^.c-0"},"!","/ev",{"*":".^.c-1","flg":5},"ev","str","^Survey the room.","/str",{"CNT?":".^.c-0"},"/ev",{"*":".^.c-2","flg":21},{"c-0":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^Wedging the butt of your spear into a gap in the flagstones, your slide turns into a slow orbit. After ","ev",2,5,"rnd","out","/ev","^ turns trying to brake with your feet turned sideways, you've created a clean spot in the center of the room. You have come to a halt at last.","\n","^Under the grease nearby you spot a gold coin. Reaching out from your clean spot you fish it in with your spear.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}],"c-1":["\n","^You continue your slide unabated until you've left the room completely.","\n","ev",1,"/ev",{"->":"go_direction"},{"#f":5}],"c-2":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^Enjoying the advantage of being still you take a look around to see if the room has anything else to offer you. You're almost convinced there is nothing left to find until you look up and see a message carved into the ceiling.","\n","^<i>Bye.</i>","\n","^You hope it's no longer relevant.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"returning":["^You return to the greasy room, ","<>","\n",["ev",{"CNT?":"grease.opt.0.c-0"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","^instantly you begin to drift across the floor.","\n",{"->":"grease.opt"},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^drifting over to the clean spot before coming to a stop.","\n","thread",{"->":"grease.opt"},{"->":"navigate"},{"->":".^.^.^.5"},null]}],"nop","\n",{"#f":1}],"#f":1}],"grindstone":["ev","str","^Grindstone","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter this room and find a grindstone sticking out of the floor. It has a seat and foot pedals next to it made of rock. You give one of the pedals a push with your foot. It takes all of your weight to push it down. The grindstone executes a lazy spin in reply before coming to a halt.","ev",{"VAR?":"stamina"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^ If you weren't so exhausted you'd probably make use of it.",{"->":".^.^.^.7"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Sharpen your spear. (-1 stamina)","/str",{"VAR?":"stamina"},1,">",{"^->":"grindstone.sharpen"},"turns",0,"!=","&&","/ev",{"*":".^.c-0","flg":5},"ev","str","^Inspect the grindstone.","/str",{"CNT?":".^.^.^.sharpen"},"/ev",{"*":".^.c-1","flg":21},{"c-0":[{"->":".^.^.^.^.sharpen"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You give the device further inspection. You can't find a way to make operating it easier, its parts are all made of the heaviest carved stone. They probably didn't want you to leave with any of it.","\n","^On the side of the wheel you notice little pictures of kobolds. You lean on the foot pedal once more and as the wheel spins the drawings blur and come together to form an animated kobold running away from something. Every revolution it chances a look behind at an unseen predator.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"returning":["^You return to the room with the grindstone. It persists in being awkwardly beneficial.","ev",{"VAR?":"stamina"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^ If you weren't so exhausted you'd probably make use of it.",{"->":".^.^.^.7"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"sharpen":["^You sit down to sharpen your spear. ","<>","\n",["ev",{"VAR?":"lucky"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n","ev",1,"/ev",{"VAR=":"lucky","re":true},["ev","visit",3,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"nop",{"s0":["pop","^The pedals are mercilessly stubborn. Eventually you get the wheel up to speed and set about sharpening your spear. You clear away all of the tarnished metal leaving a gleaming edge.",{"->":".^.^.29"},null],"s1":["pop","^You trudge out another spin from this petrified exercise machine. Your spear is already sharp, but good omens come from sharpening spears. You clean off some dust and add a bevel to the butt of the spear to make it nicer to handle.",{"->":".^.^.29"},null],"s2":["pop","^You work up a good spin from the wheel, your legs becoming used to this routine. There's a few spinters you've noticed on the shaft of your spear, you shave them off with this iteration of the grindstone.",{"->":".^.^.29"},null],"s3":["pop","^You can't get enough of this. Your spear won't get any sharper but you caress the spear head near to the wheel to get those precious good omens.",{"->":".^.^.29"},null],"#f":5}],"\n","^A little out of breath, you get up and leave with your improved spear.","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^, but as you do you notice your spear is pretty sharp already. Perhaps you should tackle a few more rooms before using the grindstone.","\n",{"->":".^.^.^.5"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":3}],"#f":1}],"hands":["ev","str","^Hands","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"hands.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"hands.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^Reaching up from cracks in the floor of this room are zombified arms. They make a rotting field whose crop waves in a wind of hunger. One by one they press fingers and thumb together, and point towards you.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",60,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Run through the room. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Look for another route","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":[{"->":"hands.run"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You look around the room to see if there's a less risky approach. No footholds or grips can be seen. Finally you glance up at the ceiling. Poking down from similar cracks to the ones in the floor are zombie feet. Their toes wiggle uncertainly.","\n","^You poke one of them with your spear. It struggles. None of the other feet or arms seem to mind.","\n",{"->":".^.^.^"},{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":["^You return to the room of zombie arms. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->t->":"hands.first"},{"->":".^.^.17"},null],"s1":["pop",{"->t->":"hands.loop"},{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.opt"},{"#f":1}],"first":["ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^One of the hands is holding a gold coin, taunting you. You rap the hand with your spear and it drops the coin. You snatch it before the hands can respond.","\n","ev","void","/ev","->->",{"#f":1}],"loop":[["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^They point finger beaks at you. One at the back gives a wave, the others stare it down before pointing at you again.",{"->":".^.^.23"},null],"s1":["pop","^A couple of awkwardly close limbs are having a territorial dispute as you enter. Your arrival warrants more attention though. They point at you again with their beaks of digits.",{"->":".^.^.23"},null],"s2":["pop","^All but one appear to be resting. Lying bent or prone depending on their reach. The attentive one notices you and raps on the floor with its knuckles. They all rise up, some stopping to do some calisthenics. Then its finger beak time.",{"->":".^.^.23"},null],"#f":5}],"\n","ev","void","/ev","->->",{"#f":1}],"run":[["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You dash across the room, weaving in between the arms. ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^A few of them reach out to grab you but you slap them away.",{"->":".^.^.23"},null],"s1":["pop","^One in front of you brandishes its grasp left and right to deny you passage. You stab it in the palm with your spear and it recoils, looking for another angle of attack. You take advantage of this and leap over it on your way to the exit.",{"->":".^.^.23"},null],"s2":["pop","^Some of them come close to grabbing you but a swift whack with the butt of your spear is enough to stun them.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You run across the room. ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^One of the hands manages to grab your leg and you're forced to wrench the thing off using your spear as leverage.",{"->":".^.^.23"},null],"s1":["pop","^You stumble as you weave between the arms, only barely keeping upright by using your spear as a third leg. Some of the arms turn to each other and clap, mocking you with applause. You hasten your exit.",{"->":".^.^.23"},null],"s2":["pop","^ You're forced to take a circuitous route as the hands decide to be smart and work together to kettle you in. It takes you ","ev",3,5,"rnd","out","/ev","^ laps to finally get out of there.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You try to weave between the arms in your sprint through the room but several hands grab your legs tripping you. The instant you hit the floor you are barraged by the pecking of fingers and thumbs. If you weren't already so exhausted you would fight back. Instead the hands stab the last scrap of life out of you with their mealy digits.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"#f":1}],"beligerent_huff":["ev","str","^Huff","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^Your entry of this room is stopped short by a loud snort. Before you is a creature your kind have named the beligerent huff. A fat bald rodent that stares at you with furious little eyes. Its cheeks are puffed out like its swollen body, straining to hold its breath.","\n","^It snorts in another gulp of air and inflates, growing from two feet to three feet wide. You've heard they can get really big.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",60,{"CNT?":".^.^.^.returning"},10,"*","-","/ev",{"VAR=":"temp_chance","re":true},["ev",{"CNT?":".^.^.c-1"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"temp_chance"},5,"-",{"VAR=":"temp_chance","re":true},"/ev",{"->":".^.^.^.9"},null]}],"nop","\n",["ev",{"VAR?":"temp_chance"},15,"<","/ev",{"->":".^.b","c":true},{"b":["\n","ev",15,"/ev",{"VAR=":"temp_chance","re":true},{"->":".^.^.^.12"},null]}],"nop","\n","ev","str","^Slay the beligerent huff. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Tickle the huff.","/str",{"CNT?":".^.^.^.returning"},"!","/ev",{"*":".^.c-1","flg":21},"ev","str","^Leave before it gets bigger.","/str",{"CNT?":".^.^.^.returning"},"!","/ev",{"*":".^.c-2","flg":5},"ev","str","^Squeeze past the creature. (-1 stamina)","/str",{"CNT?":".^.^.^.returning"},{"CNT?":".^.^.^.returning"},4,"<","&&",{"VAR?":"stamina"},1,">","&&","/ev",{"*":".^.c-3","flg":5},"ev","str","^Return the way you came.","/str",{"CNT?":".^.^.^.returning"},"/ev",{"*":".^.c-4","flg":5},{"c-0":[{"->":".^.^.^.^.poke"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You look the huff up and down looking for something to tickle. You try wiggling its nose. You try niggling its paws. You run hands over its round body, poking and prodding. For the moment the creature is paused.","\n","^Once you're done you walk around to face the huff once more. It snorts and grows another foot in diameter. The huff is not ticklish.","\n",{"->":".^.^.^"},{"#f":5}],"c-2":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-3":[{"->":".^.^.^.^.squeeze"},"\n",{"#f":5}],"c-4":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"squeeze":[["ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev","visit",2,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You push against the huff's inflated body, using the wall as leverage to make a dent large enough to begin passage. Then by slow turns you roll yourself between wall and rodent to get past.",{"->":".^.^.17"},null],"s1":["pop","^You take a short run up and then shoulder barge the huff near a corner of the room. The rubbery balloon resists, pushing back and making your feet slip across the floor, but you've already made headway. Grabbing scant tufts of fur on the huff to keep your advantage you pull yourself around it towards another exit.",{"->":".^.^.17"},null],"#f":5}],"\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"poke":["^You level your spear at the huff, your rear hand's palm covering the butt to avoid slippage. ","ev",{"CNT?":".^.^.returning"},4,"<","/ev",[{"->":".^.b","c":true},{"b":["^You look the beast in the eyes, giving your spear a threatening twist to test its resolve. The beligerent huff stays true and snorts in another breath to add to its rage.",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^You rap its nose with the flat of your spear's blade to give it one last chance. The beligerent huff opens one sleepy eye. Looks at you. Looks at your spear. Snorts. And then goes back to its bloated torpor.",{"->":".^.^.^.8"},null]}],"nop","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"CNT?":".^.^.^.returning"},1,"<","/ev",{"->":".^.b","c":true},{"b":["\n","^You stab the beast, tearing a hole in wherever it holds its breath. The escaping air blasts the huff off of the floor and around the room.","\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^It manages half a lap before flying uncontrollably out of an exit.","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^On its journey it smacks into you. Rudely knocking you to the floor before rocketing away and out of an exit.","\n","^You pick yourself up and make your way out.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^It smacks into the ceiling, appearing to dislodge one of the tiles in the roof. You step to one side but as you do you forget about the errant huff which thumps into your back, sending you staggering back under the roof tile about to fall.","\n","^You hear a quick scrape from above and have enough time to look stupefied at the threat from above. You don't even manage to raiae your arms in time to feebly fend off the chunk of stone that bears down on you.","\n","^Fortunately you're knocked unconscious as it crushes you.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.^.17"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.^.bang"},{"->":".^.^.^.17"},null]}],"nop","\n",{"->":"navigate"},{"#f":1}],"bang":[["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Your thrust is so fast it enters the creature like a branch dipped into a pond. There is a moment of confustion as it seems you have done nothing but bury your spear into the creature.","\n","^Bang.","\n","^The shockwave of air rocks the walls yet the scraps of skin and innards are fortunately blown away from you.","\n","^Covering your snout you make your way to an exit.","\n",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You stab the creature. Its skin resists somehow so you give it another thrust-","\n","^Bang.","\n","^The blast knocks you off of your feet. You hit the floor, stunned, ears ringing. Long moments pass before you sit up to survey the damage: The walls remain intact. Strips of skin decorate the room. There's a terrible smell.","\n","^You make haste to an exit.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You bury the sharp end of your spear deep into the beast. You're afforded a brief moment where you consider the wisdom of this move.","\n","^Then the huff explodes.","\n","^The blast lifts you off of your feet, tumbling through the air. Something hits you hard enough to knock you out. Probably a wall or the floor. Probably on your head.","\n","^The blow is fatal.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.2"},null]}],"nop","\n",{"->":"navigate"},{"#f":1}],"returning":["^You return to the room ","<>","\n",["ev",{"CNT?":".^.^.^.poke"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","^with the beligerent huff. ","<>","\n",["ev",{"CNT?":".^.^.^.^"},2,"<","/ev",{"->":".^.b","c":true},{"b":["\n","^Its body has become large enough to touch the ceiling and walls. There is room enough for you to quickly dash around the blockage.","\n","^Before you can move the creature snorts and it grows again, filling the gap. Now you're forced to push past the huff or end its life.","\n",{"->":".^.^.^.8"},null]}],["ev",{"CNT?":".^.^.^.^"},3,"<","/ev",{"->":".^.b","c":true},{"b":["\n","^The inflated body now fills the space, its grasping paws at the corners. The enraged face of the huff is a tiny island on a sea of skin. It looks down at you and snorts another gulp of air.","\n",{"->":".^.^.^.8"},null]}],["ev",{"CNT?":".^.^.^.^"},4,"<","/ev",{"->":".^.b","c":true},{"b":["\n","^The balloon of rodent offers no easy egress. It gulps a mouthful of air and screws its face up tight to hold it in but most of it escapes noisily, spraying spittle towards you.","\n","^You're relieved that some sort of equilibrium has been achieved but then it changes tactic - relying only on its wide nostrils to inhale.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^There is no room, only a wall of rodent skin with a sleeping face at its center. You suspect the pressure inside has become so great that it has triggered a form of hibernation.",{"->":".^.^.17"},null],"s1":["pop","^It sleeps, content that you cannot pass through.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^where the beligerent huff used to be. ","<>","\n",["ev",{"CNT?":".^.^.^.^.^.bang"},"/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^There are strips of skin upon the ceiling and walls. If you looked hard enough you might be able to find some part of its head, so you're not going to.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","^The room remains empty of threat or challenge. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^Satisfied you've seen the last of the creature, you make your way out.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.6"},null]}],"nop","\n",{"->":"navigate"},{"->":".^.^.^.5"},null]}],"nop","\n",{"#f":1}],"#f":1}],"invisible_wall":["ev","str","^Invisible","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^This room looks suspiciously empty. You take a step forwards and your snout bumps into an invisible wall. It seems to block access to the rest of the room.","\n",["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^Check how tall the wall is.","/str","/ev",{"*":".^.c-0","flg":20},{"->":".^.^.^.3"},{"c-0":[{"->":".^.^.^.^.^.crawl"},"\n",{"#f":5}]}]}],"nop","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",60,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Try to break through the wall (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":".^.^.^.^.break_wall"},"\n",{"#f":5}],"c-1":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"break_wall":["^You charge into the transparency before you.","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.empty"},{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You're suprised to find it move from your effort. ","ev",2,5,"rnd","out","/ev","^ tries later and you feel it tip over. A loud stony wham issues from the space before you. You're able to walk over the wall now, despite how confusing it is to do so.","\n","^On your way over you spot a gold coin, right under the center of the slab. ","ev",{"VAR?":"stamina"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^You're too weak to lift it.",{"->":".^.^.^.17"},null]}],"nop","\n","thread",{"->":".^.^.^.^.^.^.do_you_even"},{"->":"navigate"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^and hear a shattering sound. As you tumble to the floor, you feel sharp things pierce you. A large invisible blade of the wall skewers you through the middle. Your life drains out, down and over shards that become more visible the closer you are to death.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.9"},null]}],"nop","\n",{"#f":1}],"returning":[["ev",{"CNT?":".^.^.^.crawl"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room with the invisible wall. A few taps with your spear reveal it still doesn't connect with the floor.","\n","thread",{"->":".^.^.^.^.inspect_opt"},{"->":"navigate"},{"->":".^.^.^.4"},null]}],["ev",{"CNT?":".^.^.^.empty"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room that temporarily had an invisible wall. It's still not there, despite the room looking exactly like it did before.","\n","thread",{"->":".^.^.^.^.inspect_opt"},{"->":"navigate"},{"->":".^.^.^.4"},null]}],["ev",{"CNT?":".^.^.^.do_you_even"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room where you pushed over an invisible wall. ","ev",{"CNT?":".^.^.^.^.lift_slab"},"!","/ev",[{"->":".^.b","c":true},{"b":["^The coin under it has not moved. ","ev",{"VAR?":"stamina"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^You're too weak to lift it. ",{"->":".^.^.^.7"},null]}],"nop",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^You take care not to stub your toe.",{"->":".^.^.^.8"},null]}],"nop","\n","thread",{"->":".^.^.^.^.do_you_even"},{"->":"navigate"},{"->":".^.^.^.4"},null]}],[{"->":".^.b"},{"b":["\n","^You return to the room with the invisible wall. It remains transparent and unviolated. ",{"->":".^.^.^.^.opt"},"\n",{"->":".^.^.^.4"},null]}],"nop","\n",{"#f":1}],"empty":["^and run into empty space. The wall has vanished, leaving as much trace as it had to begin with. Perhaps you should appreciate your fortune and leave before it returns.","\n","thread",{"->":".^.^.inspect_opt"},{"->":"navigate"},{"#f":1}],"crawl":["ev",0,"/ev",{"VAR=":"lucky","re":true},"^Tapping up and down the wall with your spear you find that the wall doesn't connect to the floor by at least 2 feet. Enough for a kobold to get through unimpeded. Clearly a trap for humans.","\n","thread",{"->":".^.^.inspect_opt"},{"->":"navigate"},{"#f":1}],"do_you_even":[["ev","str","^Lift the slab to get the coin. (-1 stamina)","/str",{"VAR?":"stamina"},1,">","/ev",{"*":".^.c-0","flg":21},"ev","str","^Inspect the room.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n",{"->":".^.^.^.^.lift_slab"},{"#f":5}],"c-1":["\n",{"->t->":".^.^.^.^.inspect"},"thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"inspect_opt":[["ev","str","^Inspect the room.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n",{"->t->":".^.^.^.^.inspect"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"inspect":["ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^The room betrays no mark of your adventure in it. ","ev",{"CNT?":".^.^.do_you_even"},{"CNT?":".^.^.lift_slab"},"&&","/ev",[{"->":".^.b","c":true},{"b":["^(Except for the coin.)",{"->":".^.^.^.13"},null]}],"nop","\n","^Walls, floor, and ceiling are covered in plain stonework. They refuse to show any secret configurations or further treasures to liberate. You breathe a sigh and look down, only to see you're standing on some writing at the very edge of the room. You have to step back to read it.","\n","^<i>MIND YOUR SNOUT</i>","\n",{"->":"navigate"},{"#f":1}],"lift_slab":["ev",{"f()":"loseStamina"},"pop","/ev","\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^You wedge your claws under the edge of nothing and lift, wiggling your grip further in as you do. When you get it up to your waist you wedge it on your hips and awkwardly scrape the coin out of its display case with your spear.","\n","^Your prize in the clear you drop the slab. It slams down and leaves you to marvel at how the dust raised refuses to settle on it.","\n",{"->":"navigate"},{"#f":1}],"#f":1}],"library":["ev","str","^Library","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You walk into a room where the walls are lined with bookshelves. A closer look reveals that most of the books in this library are fake. Planks of wood, carved and painted. Only 3 of them are real.","\n","^There is also a large chair here. You give it a few pokes to see if it's part of a trap but it looks like it's just a big chair.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"opt":[["ev","str","^Read a book.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Sit in the chair.","/str",{"VAR?":"stamina"},5,"<","/ev",{"*":".^.c-1","flg":21},{"c-0":[{"->":"library.choose_book"},"\n",{"#f":5}],"c-1":["\n","ev",1,{"f()":"gainStamina"},"pop","/ev","\n","^You take a moment to rest and sit in the big chair. It creaks suspiciously as you sit down but you eventually let it take all your weight and even lean back.","\n","^It seems quieter in here than in the rest of the dungeon, quite a pleasant reading room despite what it's connected to. When you finally get up again you feel more relaxed.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"choose_book":[["^You decide to read a book, but which one?","\n","ev","str","^Get Rich Quick by Bokcha Atii.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Triggering Traps by Gek the Terrible.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^The Kobold Emancipation by Hneet Emjinti.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","ev",{"CNT?":"library.rich"},0,"==","/ev",[{"->":".^.b","c":true},{"b":[{"->":"library.rich"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":[{"->":"library.rich_read"},{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":5}],"c-1":[{"->":"library.trigger"},"\n",{"#f":5}],"c-2":[{"->":"library.history"},"\n",{"#f":5}]}],{"#f":1}],"rich":["ev",{"VAR?":"gold"},3,"+",{"VAR=":"gold","re":true},"/ev","^You take Get Rich Quick by Bokcha Atii down from its shelf. Its weight feels strangely uneven and the pages seem stuck togeher. You open the cover to find that a hole has been cut through all the pages, turning the book into a container. It holds 3 gold coins.","\n","^You heed the advice of the book's title and take the gold before putting the book back on the shelf.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"rich_read":["^You take Get Rich Quick by Bokcha Atii down from its shelf. You flip open the cover to see if more gold coins have managed to find their way into its compartment but it only holds the disappointment of nothing.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"trigger":[["ev",60,"/ev",{"VAR=":"temp_chance","re":true},"^You take Triggering Traps by Gek the Terrible down from its shelf and the book leaps out of your hands. It opens to reveal rows of sharp teeth and a throat that is deep enough to be impossible. You swiftly bat the monstrous book aside and point your spear at it.","\n","^On the floor the book slowly opens its mouth, betting its bite against your spear.","\n","ev","str","^Attack Triggering Traps by Gek the Terrible. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Escape.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":[{"->":"library.attack"},"\n",{"#f":5}],"c-1":["\n","^You make a dash for an exit. Though you're sure you won't be able to choose your route through here if you return.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"attack":["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You slide your spear under the open cover of the book and flip the beast over. It teeth scrape against floor and you see its spine flex. You strike the book with your spear, the tome lets out an unholy wail and brown smoke leaks out of the wound you've created. You pull the spear free and the book crumbles into ash.","\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You feint a strike to get the book to snap itself closed but it leaps off of the floor towards you. A panicked twirl of your spear knocks it aside and it flies unnaturally around the room, flapping its cover and pages in a mockery of bird flight. It swoops down to attack and you dive to the floor. It makes ","ev",2,5,"rnd","out","/ev","^ more passes like this, with you diving out of the way before you manage to knock it out of the air and deal a killing blow. The book wails and crumbles into ash.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You try to stab it in the roof of its mouth but your lunge sends you stumbling forwards. The book-mouth opens impossibly wide and you fall inside. As you slide into the fleshy tunnel you strike your spear into its tongue, aiming to climb out. You coil up to leap out of the teeth rimmed opening before you.","\n","^The teeth snap shut. It is dark and moist. Suddenly you are crushed from all sides. The book is returning to its normal size. You don't survive.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You survey the room, making sure that this was the only lesson the book had to teach. Satisfied the area is clear you feel you learned it well: The creator of this place has a terrible sense of humour.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"returning":["^You return to the fake library room. ","<>","\n",["ev",{"CNT?":".^.^.^.attack"},"/ev",{"->":".^.b","c":true},{"b":["\n","^The pile of ash on the floor, the two real books, and the large chair remain unchanged.","\n",{"->":".^.^.^.6"},null]}],["ev",{"CNT?":".^.^.^.trigger"},"/ev",{"->":".^.b","c":true},{"b":["\n","^The monstrous tome of Triggering Traps by Gek the Terrible waits on the floor. It grins at your arrival.","\n",{"->":"library.traps"},{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","^The three real books and the large chair are just where you left them.","\n",{"->":".^.^.^.6"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"traps":[["ev",60,"/ev",{"VAR=":"temp_chance","re":true},"ev",80,"/ev",{"temp=":"chance_run"},"ev","str","^Attack the book. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Run past the book. (%","ev",{"VAR?":"chance_run"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":[{"->":"library.attack"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"chance_run"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You raise your spear to attack the book, it hisses in reply. Then you run away. You hear the disgrunted flapping of its cover against the floor as it rethinks its tactics, but you've already fled the room.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You dash to your ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^right",{"->":".^.^.17"},null],"s1":["pop","^left",{"->":".^.^.17"},null],"#f":5}],"^ but the book manages to leap from the floor and bite on to your spear. You're forced to shake it off, stunning it against the shelves of fake books before you can flee.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You dash to your left and shortly hear a the flapping of a book cover from behind. You turn around to jab at the creature but there's nothing there. Turning full circle you still see no sign of the book. Then you hear a single flap from directly above you. The book hangs motionless above you, open. A gob of spit drops from its mouth and hits you in the eye. You blink out of reflex and suddenly feel rush of air at your face. Two wet walls of flesh slap either side of your head and sharp spiny blades slice through your neck. The last thing you hear could only be the sound of your lifeless body hitting the floor.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":"navigate"},{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"history":["^You take The Kobold Emancipation by Hneet Emjinti down from its shelf",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^ again",{"->":".^.^.17"},null],"#f":5}],"^. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^It is a rather large book, too big to read in one sitting. You open it to a random page and read a passage.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.passage"},{"#f":1}],"passage":[["^<i>",["ev","visit",3,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^For many years our ancestors gathered around the Great Abyss but no masters came forth. Such is the fate of many kobold tribes who failed to protect their former masters from being slain by the righteous and the greedy.",{"->":".^.^.23"},null],"s1":["pop","^Some of us trace our lineage to those in servitude to the great dragon Felkar - who was slain by a kobold. This raises an important question: Was Felkar a worthy master, or are kobolds just bad servants?",{"->":".^.^.23"},null],"s2":["pop",{"->":"library.finish_book"},{"->":".^.^.23"},null],"#f":5}],"^</i>","\n","ev","str","^Return the book to the shelf.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Read another passage.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^You return the book to its shelf.","\n","thread",{"->":"library.opt"},{"->":"navigate"},{"#f":5}],"c-1":["\n","^You read another passage:","\n",{"->":".^.^.^"},{"#f":5}]}],{"#f":1}],"finish_book":[[["ev",{"CNT?":".^.^.^"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev",{"->":".^.^.^.1"},null]}],"nop","\n","^<i>Eventually the Maze Builders came forth from the depths. Four and four limbed gods who pass through stone and command it. Their desire to create labyrinths and our desire to lay traps was a perfect match. Truly a great and worthy master had come to set the kobolds free from waiting.</i>","\n","^You've reached the end of the book. It has an illustration of a Maze Builder. It looks vaguely humanoid but with extra arms, legs, and eyes. It looks impressively abyssal.","\n","ev","str","^Return the book to the shelf.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","^You return the book to its shelf.","\n","thread",{"->":"library.opt"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"#f":1}],"limerick":["ev","str","^Limerick","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter this room and something seems off.<br>Before you a beast, that's foolish to scoff.<br>Covered in boils, seeping gas over time.<br>Confusing its prey with infectious rhyme.<br>Three feet tall with poison clawed limbs.<br>Reminding you of warning hymns:","\n","^Poetry can make you sick.<br>Beware the Festering Limerick.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",80,"/ev",{"temp=":"chance_run"},"ev",60,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Run away in fear. (%","ev",{"VAR?":"chance_run"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Slay it with your spear. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Inspire it to clemency, throw a coin before you flee. (-1 gold)","/str",{"VAR?":"gold"},"/ev",{"*":".^.c-2","flg":5},{"c-0":["\n","ev",{"VAR?":"chance_run"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You skip aside to your right,<br>around the monstrous blight.<br>The creature reaches after,<br>threatening disaster.<br>You duck and roll beneath its claws,<br>your sequent exit worth applause.<br>Behind you hear a screech,<br>you're glad it's out of reach.",{"->":".^.^.17"},null],"s1":["pop","^You brandish forth your spear,<br>lest the beast get near.<br>It swipes a deadly slash,<br>you parry and then dash.<br>Its claws clack on the flagstones, as it gives pursuit.<br>You're leaving for a room, it does not pollute.<br>Nimble as you are, you gain a decent distance.<br>You leave the beast behind, beyond its magic puissance.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The monster leaps, you duck and roll.<br>Tumbling, you lose control.<br>Whilst you flap against the floor,<br>the limerick returns for more.<br>You fearfully spring to your feet,<br>at your back the monster speaks:<br>\"Feel my mercy and adjourn,<br>\"I'll get you when you return!\"",{"->":".^.^.17"},null],"s1":["pop","^You run round the creature, it's swiftly in pursuit,<br>You've got a decent lead, but freedom it refutes.<br>Round and around the room you circle,<br>Finally you brave reversal.<br>Suddenly<br>you change direction.<br>Try to flee<br>your vivisection.<br>The monster stumbles in surprise, at your little trick.<br>You take advantage and escape the Festering Limerick.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You brandish your weapon, and move on hurried feet.<br>The limerick follows, it slowly starts to speak:","\n","^\"How tired you are, \"you're surely close to death.\"","\n","^\"No I'm not\", you cry. But surely out of breath.","\n","^\"From tangled marsh and mountain dale I always catch my prey.<br>\"Know you in your weakened heart, I feast on you today.\"","\n","^It stabs you from behind,<br>escape has been declined.<br>You pass out from the pain,<br>unconscious you are slain.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n","ev","void","/ev","->->",{"#f":5}],"c-1":[{"->":"limerick.slay"},"\n",{"#f":5}],"c-2":[{"->":"limerick.with_gold"},"\n",{"#f":5}]}],{"#f":1}],"slay":["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Steeling yourself you widen your stance,<br>around the monster you start to dance.<br>The creature, arms wide, denies your egress.<br>You strike with your weapon, it dodges, distressed.<br>\"Mere kobold\", it says, \"know you no fear?\"<br>\"I'll not need it, when you taste my spear.\"<br>It flinches, it stumbles, it makes a mistake.<br>You take this advantage, and charge without brake.<br>Straight through its middle, you stab the limerick.<br>You wrest your spear quickly, assisted with a kick.<br>It screams, it belows, its wound emits light.","\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^Quick strikes with your spear, hither and yonder.<br>But the beast is too fast, your chance you did squander.<br>It cuffs you aside, pugnacity it chooses.<br>You're dashed to the floor, collecting bruises.<br>It stands above you, ready to gloat.<br>But quick as a flash, your spear's in its throat.<br>Light is spilling, out of the wound.<br>You pull free your weapon, surely it's doomed.<br>The limerick issues a gargling cry,<br>its injury glittering, you hope it will die.<br>Your eyes, you cover, from candescent glare.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^Raising your spear, ready to throw,<br>you take careful aim, for this death blow.<br>You chuck it hard, with strength to shatter.<br>The beast steps aside, to the floor your spear clatters.<br>Awkwardly, you share a glance,<br>then your foe starts to advance.<br>You try to flee.<br>You don't foresee,<br>claws from behind,<br>your bones they grind.<br>Skewered with violence you fall to the floor.<br>On your corpse, the limerick does gnaw.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev",{"VAR?":"gold"},3,"+",{"VAR=":"gold","re":true},"/ev","^A flash, a sparkle, it's...","\n","^Gone.","\n","^Tinkling to the floor where the monster used to be is a handful of gold coins. You pick them up.","\n","^Some of the fading rhyming miasma,<br>threatens to speak another stanza.<br>But you're having none of it, you're getting out of here.","\n","thread",{"->":".^.^.no_limerick"},"ev","void","/ev","->->",{"#f":1}],"with_gold":["ev",{"VAR?":"gold"},1,"-",{"VAR=":"gold","re":true},"/ev","^You cast a golden coin towards the deadly creature.<br>It scuttles to the prize, a flailing limbed reciever.<br>Using this moment you make your escape,<br>you take your purchase: Avoiding a scrape.","\n","ev","void","/ev","->->",{"#f":1}],"returning":[["ev",{"CNT?":".^.^.^.slay"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room where you defeated the Festering Limerick. It no longer holds a curse, of committing you to verse. Albeit the odd exception.","\n","thread",{"->":"limerick.no_limerick"},"ev","void","/ev","->->",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","^Here you stand returned to face the Festering Limerick,<br>Gather fast your sundered thoughts, you'd better act and quick.","\n",{"->":"limerick.opt"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"no_limerick":[["ev","str","^Inspect the room.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You take a walk around the space looking for treasure and secrets. Your only discovery is that the floor at the edges of the room have a thin groove filled with a white crystaline powder. Probably salt. Perhaps it acted a protection circle to keep the magical limerick in place. Or maybe it keeps something in the next room out of here.","\n","^You decide against disturbing it.","\n","ev","void","/ev","->->",{"#f":5}]}],{"#f":1}],"#f":1}],"mist":["ev","str","^Mist","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"mist.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"mist.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^In this room hangs a smoky green mist. It stays its position in a lazy cyclone that bids you walk through it to progress. ",{"->":"mist.opt"},"\n",{"#f":1}],"opt":[["ev",60,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Try to blow or fan the mist away. (-1 stamina)","/str",{"VAR?":"stamina"},1,">","/ev",{"*":".^.c-0","flg":5},"ev","str","^Hold your breath and walk through mist. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":[{"->":"mist.clear_mist"},"\n",{"#f":5}],"c-1":[{"->":"mist.hold_breath"},"\n",{"#f":5}],"c-2":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":[["ev",{"CNT?":"mist.clear_mist"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room you cleared the green mist from. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^It has an unpleasant smell but appears to be safe.",{"->":".^.^.17"},null],"s1":["pop","^It seems that no trace of the mist remains.",{"->":".^.^.17"},null],"#f":5}],"\n","thread",{"->":"mist.clear_mist_opt"},{"->":"navigate"},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","^You return to the room with the green mist.","\n",{"->":"mist.opt"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"hold_breath":["^You take a deep breath and step into the mist.","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You're lucky enough to walk into a gap in the swirling cloud. You keep pace with it and exit the room without suffering harm.","\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^Your eyes water and you feel an unpleasant tingle across your skin. You had best exit this room swiftly.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^Unfortunately there is a tickling sensation in your snout before you're forced to let out a great sneeze. You take a breath afterwards before realising your mistake and begin to choke. Your lungs and throat burn as you collapse to the floor. Foaming drool escapes your lips as the poisonous mist saps the rest of your life from you.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.9"},null]}],"nop","\n",{"->":"navigate"},{"#f":1}],"clear_mist":["ev",{"f()":"loseStamina"},"pop","/ev","\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^You huff and puff and swipe at the air with your hands. Eventually you manage to clear the room of the noxious gas - or at least disperse it enough to remove any threat.","\n","^In the not so misty room you notice a gold coin on the floor. You pick it up.","\n","thread",{"->":"mist.clear_mist_opt"},{"->":"navigate"},{"#f":1}],"return_clear_mist":["^You return to the room you cleared the green mist from. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^It has an unpleasant smell but appears to be safe.",{"->":".^.^.17"},null],"s1":["pop","^It seems that no trace of the mist remains.",{"->":".^.^.17"},null],"#f":5}],"\n","thread",{"->":"mist.clear_mist_opt"},{"->":"navigate"},{"#f":1}],"clear_mist_opt":[["ev","str","^Inspect the room.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^On the ceiling around the edges of the room you can see a gap. Standing under it you feel a gentle breeze. This must be how the room kept the mist in place.","\n","^A lot of effort seems to have gone into making each room its own dedicated experience. The better to use them as building blocks. The Maze Builders are very economical.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"#f":1}],"nim_troll":["ev","str","^Nim","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter a room and stumble backwards from the huge creature sitting hunched over with its knees by its ears. A common mountain troll, uncommonly in a dungeon. Too large for this room but they stuffed it in here anyway. It can't chase you but its long arms could easily grab you.","\n","^\"Finally\", it says, \"a snack.\"","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",30,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-0","flg":4},["ev",{"^->":"nim_troll.opt.0.10.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"I'm not a snack",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.opt.0.11.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^\".","/str",{"CNT?":".^.^.c-1"},{"CNT?":".^.^.^.^.game"},"!","&&","/ev",{"*":".^.^.c-2","flg":7},{"s":["^\"I challenge you to a duel",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.opt.0.12.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^\".","/str",{"CNT?":".^.^.^.^.game"},{"VAR?":"nim_losses"},2,"<","&&","/ev",{"*":".^.^.c-3","flg":7},{"s":["^\"I challenge you to a rematch",{"->":"$r","var":true},null]}],"ev","str","^Run through the troll's limbs. (-1 stamina)","/str",{"VAR?":"stamina"},1,">","/ev",{"*":".^.c-4","flg":5},"ev","str","^Run through the troll's limbs. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str",{"VAR?":"stamina"},1,"==","/ev",{"*":".^.c-5","flg":5},{"c-0":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-1":["ev",{"^->":"nim_troll.opt.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.10.s"},[{"#n":"$r2"}],"^\", you say.","\n","^The troll leans towards you and speaks low and slow:","\n","^\"You don't get to tell Nim of the Stones what is or isn't a snack.","\n","^\"I've eaten undead wizards,","\n","^\"I've eaten griffon gizzards,","\n","^\"I've eaten a passenger boat,","\n","^\"I've eaten a family of goats.","\n","^\"Best me in duel and you may pass,","\n","^\"Or end up as my repast.\"","\n",[["ev",{"^->":"nim_troll.opt.0.c-1.24.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"Okay",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.opt.0.c-1.24.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say, somewhat stunned by this form of attack.","\n","^Few creatures are evil enough to resort to poetry. To have felled heroes is threatening, to make it rhyme is more unsettling.","\n","^You may be forced to duel this monster. Or worse, it might want to recite another poem.","\n",{"->":".^.^.^.^.^"},{"#f":5}]}],{"#f":5}],"c-2":["ev",{"^->":"nim_troll.opt.0.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.11.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":".^.^.^.^.lets_play"},{"#f":5}],"c-3":["ev",{"^->":"nim_troll.opt.0.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.12.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"What?\" says the troll. \"You lost. Why should I play you again?\"","\n",[["ev",{"^->":"nim_troll.opt.0.c-3.10.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"Double the winnings",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.opt.0.c-3.10.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"I let you win",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you explain.","\n","^\"So\", it pauses for a while calculating the implications, \"I should have eaten you once, and if I beat you again I get to eat you a total of three times.\"","\n",[["ev",{"^->":"nim_troll.opt.0.c-3.10.c-0.10.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"Kobolds can be hard to digest",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-0.10.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"That's very considerate\", muses the troll, \"okay then. We'll play one more round.\"","\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"c-1":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"What?\" says the troll, dumbfounded.","\n",[["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"I wanted to cheer you up",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"That was just a practice game",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"What would cheer me up is a nice snack\", it says. You take stock of your routes of escape only for it to interupt your inspection, \"but in my experience, crushing defeat is the best kind of seasoning.","\n","^\"Okay then, I'll beat you again.\"","\n",{"->":".^.^.^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"Well then\", says the troll, offering you another unpleasant grin, \"You will learn that Nim of the Stones cannot be beat.","\n","^\"Not in a month and not in a week.","\n","^\"Mountains will crumble into sand -\"","\n",[["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"You have a lot of free time I understand",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"Please stop",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"Hey\", protests the troll, \"that's not the next line.\"","\n",[["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.c-0.10.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"I know but I am pressed for time",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.c-0.10.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"Fear me, I can also rhyme",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.c-0.10.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n","^It's considering another retort but it thinks better of it.","\n",{"->":".^.^.^.^.^.^.^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.c-0.10.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say","\n","^The monster's eyes widen. It quietly reaches for the pieces of the game.","\n",{"->":".^.^.^.^.^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"c-1":["ev",{"^->":"nim_troll.opt.0.c-3.10.c-1.10.c-1.14.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say.","\n","^The troll looks affronted.","\n","^\"Took me a year to write that one\", it grumbles.","\n",{"->":".^.^.^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}]}],{"#f":5}],"g-0":["^The troll lines up the stones. There are 8 in total.","\n","ev",0,"/ev",{"VAR=":"nim_turns","re":true},"ev",8,"/ev",{"VAR=":"stones","re":true},{"->":"nim_troll.game"},{"#f":5}]}],{"#f":5}],"c-4":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",{"->":".^.^.^.^.run_thru"},{"#f":5}],"c-5":["\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"nim_troll.run_thru"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",{"->":"nim_troll.dead"},{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":5}]}],{"#f":1}],"run_thru":[[["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You dash to the left and the troll reaches for you, only for you to dive under its grasp into a roll.<br><br>\"Come back here!\" bellows the troll.<br><br>You ignore its request as you spring to your feet and make your exit.",{"->":".^.^.17"},null],"s1":["pop","^You run straight towards the troll and then double back to slide under the arms that swoop in behind you. Then you leap up and start running towards an exit.",{"->":".^.^.17"},null],"#f":5}],"\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"dead":["^You bolt towards the troll, aiming to double back and jump over its arms but the monster outwits you. It opens its thighs, trapping its arms but allowing it to lean forwards. The troll's head ducks down from above to bite you from the floor.","\n","^Huge scything teeth of stone cut into you again and again. Then it stops, an inrush air passes over your many wounds, sending you into agony. The troll begins to speak:","\n","^\"Sitting on my pouch of gold,","\n","^\"I chewed on a dumb kobold.\"","\n","^\"It was lean and rather bony -\"","\n","^The pain is too much. Your heart does you the favour of ceasing to work and you are saved from hearing the next verse by your death.","\n","end",{"#f":1}],"game":[["ev",{"VAR?":"nim_turns"},1,"+",{"VAR=":"nim_turns","re":true},"/ev",["ev",{"^->":"nim_troll.game.0.6.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"VAR?":"nim_turns"},1,"==",{"VAR?":"nim_losses"},1,"==","&&","/ev",{"*":".^.^.c-0","flg":23},{"s":["^\"Remind me of the rules",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.game.0.7.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"VAR?":"nim_turns"},1,"==","/ev",{"*":".^.^.c-1","flg":7},{"s":["^\"You go first",{"->":"$r","var":true},null]}],"ev","str","^Take 1 stone.","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","^Take 2 stones.","/str","/ev",{"*":".^.c-3","flg":4},"ev","str","^Take 3 stones.","/str",{"VAR?":"stones"},2,">","/ev",{"*":".^.c-4","flg":5},{"c-0":["ev",{"^->":"nim_troll.game.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.6.s"},[{"#n":"$r2"}],"^, you say.","\n","ev",0,"/ev",{"VAR=":"nim_turns","re":true},"^\"We each take turns to remove rocks from this line\", says the troll. \"We can take one, two, or three rocks on our turn. The one who takes the last rock wins.\"","\n",{"->":".^.^.^"},{"->":".^.^.g-0"},{"#f":5}],"c-1":["ev",{"^->":"nim_troll.game.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.7.s"},[{"#n":"$r2"}],"^\", you say.","\n","^\"Oh\", it says, \"thank you.\" It begins to reach for a stone and then pauses. The troll mumbles a little, counting the stones. It seems a lot less confident than before.","\n","^It eventually takes ","ev",1,2,"rnd",{"f()":"takeStone"},"out","/ev","^. ","ev",{"VAR?":"stones"},"out","/ev","^ remain.","\n",{"->":".^.^.^"},{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","^You take ","ev",1,{"f()":"takeStone"},"out","/ev","^. ","ev",{"VAR?":"stones"},"out","/ev","^ remain","ev",{"VAR?":"stones"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^s",{"->":".^.^.^.19"},null]}],"nop","^.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-3":["\n","^You take ","ev",2,{"f()":"takeStone"},"out","/ev","^. ","ev",{"VAR?":"stones"},"out","/ev","^ remain","ev",{"VAR?":"stones"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^s",{"->":".^.^.^.19"},null]}],"nop","^.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-4":["\n","^You take ","ev",3,{"f()":"takeStone"},"out","/ev","^. ","ev",{"VAR?":"stones"},"out","/ev","^ remain","ev",{"VAR?":"stones"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^s",{"->":".^.^.^.19"},null]}],"nop","^.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":[["ev",{"VAR?":"stones"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"nim_troll.it_takes"},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"nim_troll.win"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":5}]}],{"#f":1}],"it_takes":["ev",{"VAR?":"stones"},4,"%","/ev",{"temp=":"remaining"},["ev",{"VAR?":"stones"},4,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^It frowns at the stones, sensing defeat is near. The trolls hand wavers over the rocks and then it takes ","ev",1,2,"rnd",{"f()":"takeStone"},"out","/ev","^. ","ev",{"VAR?":"stones"},"out","/ev","^ stones remain.","\n",{"->":".^.^.^.^.game"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^The troll takes ","ev",{"VAR?":"remaining"},{"f()":"takeStone"},"out","/ev","^. ","ev",{"VAR?":"stones"},"out","/ev","^ remain.","\n",["ev",{"VAR?":"stones"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"nim_troll.game"},{"->":".^.^.^.16"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"nim_losses"},1,"+",{"VAR=":"nim_losses","re":true},"/ev","^\"I've taken the last stone\", it says, \"that means I win. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^And that also means I get to eat you. Now, do kobolds need seasoning or can I just eat you raw?",{"->":".^.^.17"},null],"s1":["pop","^You're getting eaten.",{"->":".^.^.17"},null],"#f":5}],"^\" The troll reaches to grab you.","\n",{"->":"nim_troll.opt"},{"->":".^.^.^.16"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":1}],"win":["^\"That's never happened before\", the troll grumbles. It looks at its fingers, counting, trying for the first time to understand its ritual of winning. The troll appears to have forgotten you're there, or perhaps it would rather forget this happened.","\n","thread",{"->":".^.^.win_opt"},{"->":"navigate"},{"#f":1}],"win_opt":[[["ev",{"^->":"nim_troll.win_opt.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"Did they leave any gold with you?\"",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.win_opt.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you ask.","\n","ev",{"VAR?":"gold"},8,"+",{"VAR=":"gold","re":true},"/ev","^The troll snaps out of its reverie. It looks at you, opens its mouth, then closes it. Fearful of your powers.","\n","^The monster reaches behind itself, paws around, and then throws a pouch that hits the floor with a satisfying jingle.","\n","^You pick it up and find 8 gold pieces inside. The troll resumes counting on its fingers.","\n","thread",{"->":".^.^.^"},{"->":"navigate"},{"#f":5}]}],{"#f":1}],"returning":["^You return to the room with the mountain troll. ","<>","\n",["ev",{"CNT?":".^.^.^.win"},"/ev",{"->":".^.b","c":true},{"b":["\n","^It looks up from its manual arithmetic to shuffle itself away from you. It can't move very far.","\n","thread",{"->":".^.^.^.^.win_opt"},{"->":"navigate"},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^It lifts its long arms off of the floor, ready to grab you.","\n","^\"My snack has returned\", it says.","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.5"},null]}],"nop","\n",{"#f":1}],"lets_play":["ev",0,"/ev",{"VAR=":"nim_turns","re":true},"ev",8,"/ev",{"VAR=":"stones","re":true},"^\"Let's play a game\", it says. The troll reaches behind itself before producing a fist full of rocks. It places them in a row, one by one. There are 8 in total.","\n",{"->":".^.^.what"},{"#f":1}],"what":[[["ev",{"^->":"nim_troll.what.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^\"What happens if I lose?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.what.0.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"CNT?":".^.^.c-0"},"/ev",{"*":".^.^.c-1","flg":19},{"s":["^\"How do I win?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.what.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"CNT?":".^.^.c-0"},"/ev",{"*":".^.^.c-2","flg":19},{"s":["^\"What happens if I win?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.what.0.3.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-3","flg":18},{"s":["^\"What are the rules?\"",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.what.0.4.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str",{"CNT?":".^.^.c-3"},"/ev",{"*":".^.^.c-4","flg":23},{"s":["^\"Let's play",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.what.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"I eat you\", it replies, grinning with a mouth full of flint blades.","\n",{"->":".^.^.^"},{"#f":5}],"c-1":["ev",{"^->":"nim_troll.what.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^ you ask.","\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^\"Oh that's easy\", it says, \"all you have to do is make sure there's four -","\n","^\"Hang on a minute, you're not winning, I'm winning.\" It glares at you, unwilling to reveal more of its strategy.","\n",{"->":".^.^.^"},{"#f":5}],"c-2":["ev",{"^->":"nim_troll.what.0.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"^ you ask.","\n","^It frowns, the troll clearly wasn't planning on losing.","\n","^\"Erm. You eat me?\"","\n",[["ev",{"^->":"nim_troll.what.0.c-2.12.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-0","flg":22},{"s":["^\"It's a deal",{"->":"$r","var":true},null]}],["ev",{"^->":"nim_troll.what.0.c-2.12.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^.\"","/str","/ev",{"*":".^.^.c-1","flg":22},{"s":["^\"You could just let me go",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"nim_troll.what.0.c-2.12.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"^\", you say.","\n","^It nods solemnly, reassessing what sort of threat you might be.","\n",{"->":".^.^.^.^.^"},{"#f":5}],"c-1":["ev",{"^->":"nim_troll.what.0.c-2.12.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"^\", you say.","\n","^It pauses to consider how much of an injury this would be.","\n","^\"Okay\", it shrugs.","\n",{"->":".^.^.^.^.^"},{"#f":5}]}],{"#f":5}],"c-3":["ev",{"^->":"nim_troll.what.0.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.3.s"},[{"#n":"$r2"}],"^ you ask.","\n","^\"We each take turns to remove rocks from this line. We can take one, two, or three rocks on our turn. The one who takes the last rock wins.","\n","^\"You can go first\", it says, showing its sharp stone teeth at you.","\n",{"->":".^.^.^"},{"#f":5}],"c-4":["ev",{"^->":"nim_troll.what.0.c-4.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.4.s"},[{"#n":"$r2"}],"^\", you say.","\n",{"->":".^.^.^.^.game"},{"#f":5}]}],{"#f":1}],"#f":1}],"takeStone":[{"temp=":"n"},"ev",{"VAR?":"stones"},{"VAR?":"n"},"-",{"VAR=":"stones","re":true},"/ev",["ev",{"VAR?":"n"},3,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^3 stones","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],["ev",{"VAR?":"n"},2,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^2 stones","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],["ev",{"VAR?":"n"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^1 stone","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],[{"->":".^.b"},{"b":["\n","ev","str","^no stones","/str","/ev","~ret",{"->":".^.^.^.11"},null]}],"nop","\n",{"#f":1}],"plinth":["ev","str","^Plinth","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"plinth.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"plinth.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^In the center of this room you see a simple stone plinth. It is lit from a hole in the ceiling, issuing a light too bright to make out its source. On the plinth are ","ev",{"VAR?":"plinth_coins"},"out","/ev","^ gold coins. You take a moment to contemplate how this trap will be sprung.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev","str","^Knock the coins off the plinth ","ev",{"CNT?":"plinth.trapped"},"/ev",[{"->":".^.b","c":true},{"b":["^again ",{"->":".^.^.^.7"},null]}],"nop","^with your spear.","/str",{"VAR?":"plinth_took"},0,"==","/ev",{"*":".^.c-0","flg":5},"ev","str","^Knock the coin off the plinth ","ev",{"CNT?":"plinth.trapped"},"/ev",[{"->":".^.b","c":true},{"b":["^again ",{"->":".^.^.^.22"},null]}],"nop","^with your spear.","/str",{"VAR?":"plinth_took"},0,">",{"VAR?":"plinth_took"},{"VAR?":"plinth_coins"},"<","&&","/ev",{"*":".^.c-1","flg":5},"ev","str","^Walk past the plinth.","/str",{"VAR?":"plinth_took"},0,"==","/ev",{"*":".^.c-2","flg":5},"ev","str","^Return the way you came.","/str",{"VAR?":"plinth_took"},0,"==","/ev",{"*":".^.c-3","flg":5},"ev","str","^Return through the open exit.","/str",{"VAR?":"plinth_took"},{"VAR?":"plinth_coins"},1,"-","==","/ev",{"*":".^.c-4","flg":5},{"c-0":[{"->":"plinth.trapped"},"\n",{"#f":5}],"c-1":[{"->":"plinth.trapped"},"\n",{"#f":5}],"c-2":["\n","^You walk past the display, side-eyeing the tempting offer it presents. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^There seems to be no other traps in this room.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n","ev",1,"/ev",{"->":"go_direction"},{"#f":5}],"c-3":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-4":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":[["ev",{"CNT?":"plinth.trapped.0.c-2"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You return to the room with the upside-down plinth. It teeters a little - threatening to reply to your footfalls - but holds its position.","\n",{"->":"navigate"},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","^You return to the room with the stone plinth. ","<>","\n",["ev",{"VAR?":"plinth_took"},{"VAR?":"plinth_coins"},1,"-","==","/ev",{"->":".^.b","c":true},{"b":["\n","^A single coin sits on it. The exits are all open, then as soon as you set foot in the room you hear the slide of the iron bars and are left with only one exit.","\n",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","^The stack of coins still rests on it.","\n",{"->":".^.^.^.6"},null]}],"nop","\n",{"->":"plinth.opt"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"trapped":[["^You extend your spear and poke at the ","ev",{"VAR?":"plinth_took"},{"VAR?":"plinth_coins"},1,"-","==","/ev",[{"->":".^.b","c":true},{"b":["^single coin, knocking it free from its display. It hits the floor, bounces a few times noisily and comes to a halt. The open exit closes.",{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["^short stack of gold","ev",{"CNT?":".^.^.^.^"},1,">","/ev",[{"->":".^.b","c":true},{"b":["^ again",{"->":".^.^.^.7"},null]}],"nop","^, knocking the coins free from their display. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The tintinnabulation of them striking the ground is followed by metallic scraping as iron bars drop down in front of all the exits. They hit the floor with a clang, sealing you against escape.",{"->":".^.^.17"},null],"s1":["pop","^The exits are closed once more.",{"->":".^.^.17"},null],"#f":5}],{"->":".^.^.^.10"},null]}],"nop","\n","^You pick up the gold coin","ev",{"VAR?":"plinth_took"},{"VAR?":"plinth_coins"},1,"-","==","/ev",[{"->":".^.b","c":true},{"b":["^ ",{"->":".^.^.^.22"},null]}],[{"->":".^.b"},{"b":["^s",{"->":".^.^.^.22"},null]}],"nop","^ and consider your next move.","\n","ev",{"VAR?":"plinth_coins"},"/ev",{"VAR=":"plinth_took","re":true},"ev",{"VAR?":"gold"},{"VAR?":"plinth_took"},"+",{"VAR=":"gold","re":true},"/ev","ev","str","^Put all the coins back on the plinth.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Put one coin back on the plinth.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Try to lift the bars. (-1 stamina)","/str",{"VAR?":"stamina"},1,">","/ev",{"*":".^.c-2","flg":21},{"c-0":["\n",{"->":"plinth.replace_coins"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"gold"},1,"-",{"VAR=":"gold","re":true},"/ev","ev",{"VAR?":"plinth_took"},1,"-",{"VAR=":"plinth_took","re":true},"/ev","^You put one coin back upon the plinth. In response to this gesture, one of the exits opens. Having been disorientated by the falling bars, you can't remember which exit is which.","\n",["ev","str","^Leave the room.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Put the rest of the coins back on the plinth.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}],"c-1":["\n",{"->":"plinth.replace_coins"},{"#f":5}]}],{"#f":5}],"c-2":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You grip the bars on one of the exits and struggle to lift it to no avail. Defeated, you turn back to the plinth and you're suddenly struck with an idea.","\n","^You try lifting the plinth. Finding it unconnected to the floor you turn it upside-down, its financial platform now pressed against the flagstones. The bars in front of the exits all rise up. Perhaps with some study you'd be able to discern why this logic can defeat the trap but you're already leaving the room.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"replace_coins":["^You restore the stack of coins on the plinth. ","ev",{"VAR?":"plinth_took"},{"VAR?":"plinth_coins"},"==","/ev",[{"->":".^.b","c":true},{"b":["^The bars on all the exits rise up",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^The remaining exit-bars rise up",{"->":".^.^.^.8"},null]}],"nop","^, allowing you to leave at your leisure.","\n","ev",{"VAR?":"gold"},{"VAR?":"plinth_took"},"-",{"VAR=":"gold","re":true},"/ev","ev",0,"/ev",{"VAR=":"plinth_took","re":true},{"->":".^.^.opt"},{"#f":1}],"#f":1}],"pudding":["ev","str","^Pudding","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^As you enter this room you are forced to raise your spear to guard yourself. You see a predator your kind have named the ectopic pudding. A two feet tall tear drop of foam, flesh, and phlegm that hangs horrifyingly in the air. It is not friendly.","\n",{"->":".^.^.opt"},{"#f":1}],"returning":["^You return to the pudding room. ","<>","\n",["ev",{"CNT?":".^.^.^.attack"},2,">=","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The foaming lumps of flesh have disolved a chunk of the floor. In the steaming pit you can see a cache of ","ev",2,3,{"f()":"loot"},"out","/ev","^ gold coins that must have been hidden under the flagstones. You fish them out with your spear.",{"->":".^.^.17"},null],"s1":["pop","^Clumps of mucus decorate the floor around a blackened crater.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":"navigate"},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The fleshy mass still hovers there, waiting to strike.",{"->":".^.^.17"},null],"s1":["pop","^The globule of horror turns to face you.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":"pudding.opt"},{"->":".^.^.^.5"},null]}],"nop","\n",{"#f":1}],"opt":[["ev",50,{"CNT?":".^.c-0"},10,"*","+","/ev",{"VAR=":"temp_chance","re":true},"ev",70,{"CNT?":".^.c-0"},10,"*","+","/ev",{"temp=":"chance_flee"},"ev","str","^Look for an advantage.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Attack (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Run past ($","ev",{"VAR?":"chance_flee"},"out","/ev","^)","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You look around to find an advantage to use against this fearsome creature but the room is too spartan to offer assistance.","\n","^Remembering the stories you've been told about the ectopic pudding, you recall that they were long. The monster never went down in one hit, demanding a proper finale.","\n",{"->":".^.^.^"},{"#f":5}],"c-1":[{"->":"pudding.attack"},"\n",{"#f":5}],"c-2":["\n","ev",{"VAR?":"chance_flee"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You dash around the pudding, keeping it at spear's length.","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.8"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^You duck and weave around the pudding but it slaps you with a snotty tendril. It burns your flesh but you have gained an opportunity to escape.",{"->":".^.^.23"},null],"s1":["pop","^You perform combat roll under the pudding but pull a muscle in the process. You have a chance to exit.",{"->":".^.^.23"},null],"s2":["pop","^The pudding spits at you as you try to run past it. You are hit but you can get away.",{"->":".^.^.23"},null],"#f":5}],"\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.8"},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}]}],[{"->":".^.b"},{"b":["\n","^You try to run past the creature. ",{"->":"pudding.death"},"\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"#f":5}]}],{"#f":1}],"attack":["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You lunge at the pudding with your spear, tearing into probably skin. The creature lets out a fart of pain.",{"->":".^.^.17"},null],"s1":["pop","^Putting your palm at the base of the spear you thrust a death strike at the heart of the beast. It shudders flatulently.",{"->":".^.^.17"},null],"#f":5}],"\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",["ev",{"CNT?":".^.^.^.^"},2,">=","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"pudding.pudding_death"},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"pudding.opt"},{"->":".^.^.^.3"},null]}],"nop","\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"pudding.hurt"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"pudding.death"},{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.9"},null]}],"nop","\n",{"#f":1}],"pudding_death":["^The ectopic pudding splashes to the floor. You jump back to avoid its acid. It lets out a final rumbling fart before slowly disolving. You cover your snout and look for an exit.","\n",{"->":"navigate"},{"#f":1}],"hurt":[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The pudding squirts a jet of acid at you. You try to dodge but some of it hits, burning your flesh.",{"->":".^.^.17"},null],"s1":["pop","^The pudding, sensing death, impales itself further. Aiming to meet you in a final embrace. You shake your spear free but you're sprayed with its burning mucus.",{"->":".^.^.17"},null],"#f":5}],"\n",["ev",{"CNT?":".^.^.^.attack"},2,">=","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"pudding.pudding_death"},{"->":".^.^.^.4"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"pudding.opt"},{"->":".^.^.^.4"},null]}],"nop","\n",{"#f":1}],"death":["^The pudding vomits a thick acid over you. The pain is overwhelming, you black out. Fortunately you are not conscious of what happens next.","\n","end",{"#f":1}],"#f":1}],"right_left_slam":["ev","str","^Right Left","/str","/ev",{"temp=":"name"},["ev",{"VAR?":"slam_side"},{"VAR?":"left"},"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^Left Right","/str","/ev",{"temp=":"name","re":true},{"->":".^.^.^.7"},null]}],"nop","\n","ev",{"VAR?":"name"},{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^You enter this room and thick rectangular wall shoots down from the ceiling and slams into the floor. it cuts off the right side of the room. It rises swiftly. Moments later a similar wall crashes into the floor on the left side. It rises up too.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":["ev",{"CNT?":".^.^.disarm"},"!","/ev",[{"->":".^.b","c":true},{"b":[{"->":".^.^.^.^.trap"},{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["^ ",{"->":"navigate"},{"->":".^.^.^.6"},null]}],"nop","\n",{"#f":1}],"trap":[["ev",50,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Run through the right side. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Run through the left side. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Wait.","/str","/ev",{"*":".^.c-2","flg":20},"ev","str","^Disarm the trap. (-1 gold)","/str",{"CNT?":".^.^.^.watch"},{"VAR?":"gold"},0,">","&&","/ev",{"*":".^.c-3","flg":5},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-4","flg":4},{"c-0":["\n","ev",{"VAR?":"right"},"/ev",{"VAR=":"slam_run","re":true},{"->":".^.^.^.^.running"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"left"},"/ev",{"VAR=":"slam_run","re":true},{"->":".^.^.^.^.running"},{"#f":5}],"c-2":[{"->":".^.^.^.^.watch"},"\n",{"#f":5}],"c-3":[{"->":".^.^.^.^.disarm"},"\n",{"#f":5}],"c-4":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"running":[["^You sprint forth to the ","ev",{"VAR?":"slam_run"},"out","/ev","^. ","<>","\n",["ev",{"VAR?":"slam_run"},{"VAR?":"slam_side"},"==","/ev",{"->":".^.b","c":true},{"b":["\n",{"->t->":".^.^.^.^.^.hit"},{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["\n",{"->t->":".^.^.^.^.^.dodge"},{"->":".^.^.^.10"},null]}],"nop","\n","ev",{"f()":"slamChange"},"pop","/ev","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"hit":["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You hear the grinding of stone on stone above you and quickly jump over to the ","ev",{"VAR?":"slam_run"},{"f()":"slamOther"},"out","/ev","^, narrowly avoiding being pulped. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^As the wall rises you spy ","ev",2,3,{"f()":"loot"},"out","/ev","^ gold coins in the trench the wall has made with its pounding. You pick them up and make a run for an exit.",{"->":".^.^.17"},null],"s1":["pop","^You run towards an exit before the ","ev",{"VAR?":"slam_run"},{"f()":"slamOther"},"out","/ev","^ wall can begin its descent.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You realise your folly as the ","ev",{"VAR?":"slam_run"},"out","/ev","^ side wall descends. ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^You jump to the ","ev",{"VAR?":"slam_run"},{"f()":"slamOther"},"out","/ev","^ side but fall over and have to scramble to your feet to make it to an exit.",{"->":".^.^.23"},null],"s1":["pop","^Fortunately you weren't running fast enough to end up under it. Instead your snout smacks into a half lowered wall and you stagger backwards a few paces. That hurt. As the wall rises you run out of the room before you injure yourself further.",{"->":".^.^.23"},null],"s2":["pop","^Determined to make things worse you trip over the trench the wall's hatred of the floor has made. You tumble into a roll, bruising yourself but the roll throws you beyond the ","ev",{"VAR?":"slam_run"},"out","/ev","^ side wall's ire. You get up and get out of there.",{"->":".^.^.23"},null],"#f":5}],"\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^Dust and chips of stone hit your neck before you feel a blow to the back of your head. Then there is pain and darkness. Any fleeting moments of consciousness you have are smashed away when the wall descends to crush you for the second time.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev","void","/ev","->->",{"#f":1}],"dodge":["^The wall on ","ev",{"VAR?":"slam_run"},{"f()":"slamOther"},"out","/ev","^ side smashes into the floor. You make haste towards an exit as it rises.","\n","ev","void","/ev","->->",{"#f":1}],"disarm":["ev",{"VAR?":"gold"},1,"-",{"VAR=":"gold","re":true},"/ev","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You feed a gold coin into the spinning gears you see within the walls of the room. There's a clunk, then a click, then a clang. The ","ev",{"VAR?":"slam_side"},"out","/ev","^ side wall slowly descends and stops halfway. You wait a while, just to be sure of no surprises. Then you make your way out of the room.","\n",{"->":"navigate"},{"#f":1}],"watch":["^You wait for the next move the trap will make. The ","ev",{"VAR?":"slam_side"},"out","/ev","^ side wall drops down and smacks into the floor before rising again. As it does so you notice some of the stonework has come away on the side walls of the room in response to this endless violence. You can see turning gears and machinery. If you fed something in there - like a gold coin - it could bring the trap to a halt.","\n","ev",{"f()":"slamChange"},"pop","/ev","\n",{"->":".^.^.opt"},{"#f":1}],"returning":["ev",{"CNT?":".^.^.disarm"},"/ev",[{"->":".^.b","c":true},{"b":[{"->t->":".^.^.^.^.disarmed"},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":[{"->t->":".^.^.^.^.active"},{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.opt"},{"#f":1}],"disarmed":["^You return to the room with the two walls that used to bite the floor. The ","ev",{"VAR?":"slam_side"},"out","/ev","^ side wall is still halfway ",["ev","visit",2,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^down",{"->":".^.^.17"},null],"s1":["pop","^up",{"->":".^.^.17"},null],"#f":5}],"^. ","ev","void","/ev","->->","\n",{"#f":1}],"active":["^You return to the room with the two walls that bite the floor. The ","ev",{"VAR?":"slam_side"},"out","/ev","^ side wall drops down from the ceiling, hits the floor, then rises.","\n","ev",{"f()":"slamChange"},"pop","/ev","\n","ev","void","/ev","->->",{"#f":1}],"#f":1}],"slamChange":[["ev",{"VAR?":"slam_side"},{"VAR?":"right"},"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"left"},"/ev",{"VAR=":"slam_side","re":true},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"right"},"/ev",{"VAR=":"slam_side","re":true},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"slamOther":[{"temp=":"s"},["ev",{"VAR?":"s"},{"VAR?":"right"},"==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"left"},"/ev","~ret",{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"right"},"/ev","~ret",{"->":".^.^.^.3"},null]}],"nop","\n",{"#f":1}],"toadstools":["ev","str","^Toadstools","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^The floor in this room has been ripped up, exposing the earth and making the air damp. Two huge and poisonous looking toadstools dominate the center of the room. They uproot themselves, standing on fibrous hooves before slowly marching towards you. ",{"->":".^.^.opt"},"\n",{"#f":1}],"opt":[["ev",60,{"CNT?":".^.^.^.fight"},10,"*","+",{"CNT?":".^.c-1"},5,"*","+","/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Attack. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str",{"CNT?":".^.^.^.fight"},2,"<","/ev",{"*":".^.c-0","flg":5},"ev","str","^Look for an advantage.","/str",{"CNT?":".^.^.^.fight"},2,"<","/ev",{"*":".^.c-1","flg":21},"ev","str","^Run away.","/str",{"VAR?":"toadstool_hit"},{"CNT?":".^.^.^.fight"},2,"<","&&","/ev",{"*":".^.c-2","flg":5},"ev","str","^Return the way you came.","/str",{"VAR?":"toadstool_hit"},"!",{"CNT?":".^.^.^.fight"},2,"<","&&","/ev",{"*":".^.c-3","flg":5},{"c-0":[{"->":".^.^.^.^.fight"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You recall something vague about walking mushroom monsters but it's hard to grasp. A tale told by an old kobold that used to fix the plumbing around the mountain. Over time you dismissed it as tall story, no bestiary mentions his turtle people or their partially draconic rulers. You're sure he made a great fuss about attacking from above. ","ev",{"CNT?":".^.^.^.^.fight"},"!","/ev",[{"->":".^.b","c":true},{"b":["^A sound plan if it's not poisonous.",{"->":".^.^.^.14"},null]}],[{"->":".^.b"},{"b":["^A risky move whilst there's two of them to deal with.",{"->":".^.^.^.14"},null]}],"nop","\n",{"->":".^.^.^"},{"#f":5}],"c-2":["\n","^Having scored a victory you take advantage of the situation to exit the room on your own terms.","\n",{"->":"navigate"},{"#f":5}],"c-3":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning":["ev",0,"/ev",{"VAR=":"toadstool_hit","re":true},"^You return to the toadstool room. ","<>","\n",["ev",{"CNT?":".^.^.^.fight"},1,">","/ev",{"->":".^.b","c":true},{"b":["\n","^Hunks of fungus decorate the floor.","\n",{"->":"navigate"},{"->":".^.^.^.10"},null]}],["ev",{"CNT?":".^.^.^.fight"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^The fungi beasts block your passage.","\n",{"->":".^.^.^.10"},null]}],["ev",{"CNT?":".^.^.^.fight"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^The remaining occupant marches towards you seeking retribution.","\n",{"->":".^.^.^.10"},null]}],"nop","\n",{"->":".^.^.opt"},{"#f":1}],"fight":["ev",1,"/ev",{"VAR=":"toadstool_hit","re":true},"ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.^.survive"},{"->":".^.^.^.11"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"toadstools.survive"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n",{"->":"toadstools.death"},{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.11"},null]}],"nop","\n",{"#f":1}],"death":["^You plunge your spear into the dome of ","ev",{"CNT?":".^.^.fight"},2,"==","/ev",[{"->":".^.b","c":true},{"b":["^a",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^the",{"->":".^.^.^.8"},null]}],"nop","^ toadstool and it releases a cloud of spores. You try to escape but a numbness rises up from your legs and pulls you to the floor. You can barely feel the life being stamped out of you afterwards. It is a very considerate death.","\n","end",{"#f":1}],"survive":[["ev",{"CNT?":".^.^.^.fight"},1,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^You strike under the dome of one of the beasts and manage to flip it over. Then you stamp where the stalk meets the umbrella of fronds that makes its maybe head. It cracks in two and deflates in defeat.","\n",["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^The other toadstool shuffles towards you seeking revenge.","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^The other toadstool rams you and sends you tumbling across the floor.","\n",{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.^.^.opt"},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","^Finally you remember the secret to success, beasts such as these can be felled with a stomp from above. You leap up and thrust down with both feet into the cap of the monster. There is a snap from beneath you before chunks of fungus explode across the room.","\n",["ev",{"VAR?":"isSuccess"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","^Its remains are a slippery mess and you fall over ","ev",2,4,"rnd","out","/ev","^ times before being able to leave.","\n",{"->":".^.^.^.4"},null]}],"nop","\n","^On your way out you find ","ev",3,5,{"f()":"loot"},"out","/ev","^ gold coins that must have been buried in the flesh of your foes.","\n",{"->":"navigate"},{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"#f":1}],"trip_room":["ev","str","^Trip","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^This room you've walked into is surprisingly empty. Your spear is raised to guard against threats and you appraise the featureless walls with keen eyes. But no sign of a threat not even -","\n",{"->":".^.^.trip"},{"#f":1}],"trip":[["ev",{"CNT?":".^.^"},4,">","/ev",{"->":".^.b","c":true},{"b":["\n","^Nothing happens. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^It seems this room has tired of toying with you.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.3"},null]}],["ev",{"VAR?":"lucky"},"/ev",{"->":".^.b","c":true},{"b":["\n","thread",{"->":".^.^.^.^.deduct"},{"->":".^.^.^.3"},null]}],[{"->":".^.b"},{"b":["\n","thread",{"->":".^.^.^.^.restore"},{"->":".^.^.^.3"},null]}],"nop","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"deduct":["ev",0,"/ev",{"VAR=":"lucky","re":true},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^Your foot catches on the edge of a badly laid flagstone in the floor. You stagger forwards, barely recovering. Indignation clouds your mind, but you are otherwise unharmed. You take another look around, especially at the floor. You find ","ev",2,3,{"f()":"loot"},"out","/ev","^ gold coins. They provide a salve for your injured pride as you leave.",{"->":".^.^.17"},null],"s1":["pop","^You tread on a loose floor tile. It rocks, making you stumble onwards a few paces. You return to the offending slab and prod it with your foot, as if to shame it into place. The tile only delivers a mocking clack as you stub it in anger.",{"->":".^.^.17"},null],"#f":5}],"\n","done",{"#f":1}],"restore":["ev",1,"/ev",{"VAR=":"lucky","re":true},"^You stop for a moment",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^, sure that some sort of trap might spring. Proceeding with caution you tap the floor ahead of you with the butt of your spear as you advance. You find a flagstone that seems a little loose and nothing more.<br><br>Perhaps there is still a trap here, but for now you're too wary to fall for it.",{"->":".^.^.17"},null],"s1":["pop","^. Confident that this room won't punish you for standing still you take some time to stretch your limbs. Feeling a little more spry you make your way to an exit. Fortunately you encounter no obstacles on your way.",{"->":".^.^.17"},null],"#f":5}],"\n","done",{"#f":1}],"opt":[["ev","str","^Inspect the room.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":[{"->":".^.^.^.^.unlucky"},"\n",{"#f":5}]}],{"#f":1}],"unlucky":["ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^You pace uncertainly around the room's perimeter. Something feels off about it. You know very little about magic such as curses or wards but you can feel a hidden force here trying to tinker with your fortune. You make a note of this place: the unlucky room.","\n","thread",{"->":".^.^.opt"},{"->":"navigate"},{"#f":1}],"returning":["^You return to the ","ev",{"CNT?":".^.^.unlucky"},"/ev",[{"->":".^.b","c":true},{"b":["^unlucky",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["^seemingly empty",{"->":".^.^.^.6"},null]}],"nop","^ room. You're crossing its center as -","\n",{"->":".^.^.trip"},{"#f":1}],"#f":1}],"windy":["ev","str","^Wind","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":"windy.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":"windy.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":[["^You step into a column of frigid air, finding yourself in an atrium. The ceiling is too far up to be visible. You're standing on a wire mesh, you look down and see beneath it is a great windmill. It creaks into motion, sending a steady breeze that soon becomes a gale.","\n","^There's also a gold coin on the floor nearby - it would be risky to try and get it before you escape.","\n","ev","str","^Get the coin","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Run out of the room.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","ev",{"VAR?":"gold"},1,"+",{"VAR=":"gold","re":true},"/ev","^You run over to the coin and pick it up.","\n","^Before being lifted free of the floor to fly a full circuit of the room, then thrown out of one of the room's exits.","\n",["ev","str","^Fly out of the room.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",-1,0,1,"rnd",2,"*","+","/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":5}],"c-1":["\n","^You hurry out of the room before whatever machination gets fully under way.","\n",{"->":"navigate"},{"#f":5}]}],{"#f":1}],"opt":["ev",{"CNT?":".^.^.penny"},"!","/ev",[{"->":".^.b","c":true},{"b":[{"->":"windy.dismantle"},{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":[{"->":"navigate"},{"->":".^.^.^.6"},null]}],"nop","\n",{"#f":1}],"dismantle":[["ev",70,"/ev",{"VAR=":"temp_chance","re":true},"ev","str","^Crawl through. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Look for a way to dismantle the trap.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Dismantle the trap. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str",{"CNT?":"windy.lip"},0,"==",{"CNT?":".^.c-1"},"&&","/ev",{"*":".^.c-2","flg":5},"ev","str","^Throw a coin into the gears. (-1 gold)","/str",{"CNT?":"windy.lip"},{"VAR?":"gold"},0,">","&&","/ev",{"*":".^.c-3","flg":5},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-4","flg":4},{"c-0":[{"->":"windy.crawl"},"\n",{"#f":5}],"c-1":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^The mesh reaches the edge of the room, clearly to stop you from working your way around the perimeter. Each wire of mesh at the edge is tied to a small metal pin, haphazardly hammered into the stone work. You could probably pry it free with your spear.","\n",{"->":".^.^.^"},{"#f":5}],"c-2":[{"->":"windy.lip"},"\n",{"#f":5}],"c-3":[{"->":"windy.penny"},"\n",{"#f":5}],"c-4":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"lip":["^You pick a spot where the mesh floor meets the wall and use your spear's head to try and create an opening.","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Fortunately you've attacked an area that was attached poorly and it comes free with no effort.","\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^After a few minutes of work you've pried up a lip of floor that you peel up to make an entrance for yourself.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^It's a bit too small though. You step around the other side of the lip to pull it up some more - forgetting about the storm of wind until you're lifted free of the floor.","\n",{"->":"windy.fly"},{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.9"},null]}],"nop","\n","^In the space below you can see a huge wooden shaft ending in a complex differential gear train. If you threw something in there, like a coin, it would probably break it.","\n",{"->":".^.^.opt"},{"#f":1}],"penny":["ev",{"VAR?":"gold"},1,"-",{"VAR=":"gold","re":true},"/ev","^You throw a coin into the gears of the drive chain powering the windmill. There is an almighty crack as the unstoppable force of the gears meets an awkward object. Through your feet you feel the splinter and snap of wooden parts beneath the dungeon floor. The death throes of the windmill sends a final cough of splinters at its mesh platform before groaning to a halt.","\n",{"->":".^.^.opt"},{"#f":1}],"crawl":["^Lying low, gripping the mesh floor, you crawl forwards into the tornado before you.","\n","ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n",["ev","visit",2,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You manage to edge your way around the perimeter of the wind tunnel. Your feet rise from the floor a few times but you make it out okay.",{"->":".^.^.17"},null],"s1":["pop","^You hear a loud clunk and the windmill slows to a halt. You must have triggered something to turn it off. You look around quickly to see what it was. A second clunk. The windmill below starts to turn again - you take advantage of this small mercy and flee the room.",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You play it safe, locking yourself to the floor at three points before each advance.","\n","^It takes long time to get out of there.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^Reaching back to pull your spear along with you, your grip falters and you are lifted from the mesh floor. ","<>",{"->":"windy.fly"},"\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.9"},null]}],"nop","\n",{"->":"navigate"},{"#f":1}],"fly":["^You fly upwards into the gale, tumbling over and over. This comedy continues for at least a minute as you are propelled up and up. Eventually the violent winds slow down to a gentle buffeting. And then the wind stops.","\n","^Completely.","\n","^You make a desperate swim to grab on to the walls but you're in the dead center of the room.","\n","^You fall.","\n","^The ground rushes to meet you, the mesh in front of it a further insult. You attempt to angle yourself such that the blow will kill you outright - choosing to be diced back to front.","\n","^It takes a week to clean your corpse out of this room.","\n","end",{"#f":1}],"returning":["^You return to the room with the ","<>","\n",["ev",{"CNT?":"windy.penny"},"!","/ev",{"->":".^.b","c":true},{"b":["\n","^column of wind. You stand outside of it, looking into a hurricane on a leash. The mesh floor ","ev",{"CNT?":"windy.lip"},"/ev",[{"->":".^.b","c":true},{"b":["^rattles where you prised up a section of it.",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["^looks loose at the edges, perhaps you could pry up a part of it to dismantle the trap.",{"->":".^.^.^.7"},null]}],"nop","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^defeated wind trap. ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^Its torn up mesh floor looks like it's raising a hand in surrender. Your instincts get the better of you and you raise a hand in reply.",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"\n",{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.opt"},{"#f":1}],"#f":1}],"windmill":["ev","str","^Windmill","/str",{"CNT?":".^"},"/ev","thread",{"->":"title"},["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.^.enter"},{"->":".^.^.17"},null],"s1":["pop","^ ",{"->":".^.^.^.returning"},{"->":".^.^.17"},null],"#f":5}],"\n",{"enter":["^A horizontal windmill of blades takes up the entire room. Eight double edged swords projecting from a central axle. To traverse the room would mean crawling under or climbing over those sharp edges.","\n",{"->":".^.^.opt"},{"#f":1}],"opt":[["ev",60,"/ev",{"VAR=":"temp_chance","re":true},"ev",80,"/ev",{"temp=":"chance_climb"},"ev","str","^Inspect the windmill of blades.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Approach the axle to dismantle the trap. (%","ev",{"VAR?":"temp_chance"},"out","/ev","^)","/str",{"CNT?":".^.c-0"},{"VAR?":"stamina"},1,">","&&","/ev",{"*":".^.c-1","flg":21},"ev","str","^Crawl under the blades. (-1 stamina)","/str",{"VAR?":"stamina"},1,">","/ev",{"*":".^.c-2","flg":5},"ev","str","^Climb over the blades. (%","ev",{"VAR?":"chance_climb"},"out","/ev","^)","/str","/ev",{"*":".^.c-3","flg":4},"ev","str","^Return the way you came.","/str","/ev",{"*":".^.c-4","flg":4},{"c-0":["\n","ev",{"VAR?":"wisdom"},1,"+",{"VAR=":"wisdom","re":true},"/ev","^Wary of putting yourself in danger you crouch where you stand to view the trap from a different angle.","\n","^From here the blades form a thick line bisecting the room horizontally. Or at least they would if the line wasn't at a slight angle. You surmise that this trap isn't well constructed and only needs a good shove it the right place to break it. ","ev",{"VAR?":"stamina"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["^A pity you're too exausted for such a task right now.",{"->":".^.^.^.16"},null]}],"nop","\n",{"->":".^.^.^"},{"#f":5}],"c-1":[{"->":"windmill.break"},"\n",{"#f":5}],"c-2":[{"->":"windmill.crawl"},"\n",{"#f":5}],"c-3":["\n","ev",{"VAR?":"chance_climb"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^You leap up and land on the hub of the windmill. Here from the center of the room you're free to exit how you choose.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You take a run up to jump on to the thing but hesitate and trip over instead. It looks like you're crawling through after all.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You place a hand on top of one of the swords to vault over it. The blade shifts, swinging away from you at amazing speed. They must have greased this thing pretty good. You turn to see another sword coming in fast and try to duck under it.","\n","^You are decapitated.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":"navigate"},{"#f":5}],"c-4":["ev",-1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"returning_broken":["^The contraption remains dismantled. You tread between its swords lying on the floor.","\n",{"->":"navigate"},{"#f":1}],"returning":["^You return to the windmill of blades. ","<>","\n",["ev",{"CNT?":".^.^.^.break"},"/ev",{"->":".^.b","c":true},{"b":["\n",{"->":"windmill.returning_broken"},{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^They are motionless and sharp.","\n",{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.opt"},{"#f":1}],"crawl":[["ev",{"f()":"loseStamina"},"pop","/ev","\n","^You drag yourself across the floor. The steel vanes above you keep their vigil and give you a chance to pass.","\n","ev","str","^Exit.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["ev",1,"/ev",{"->":"go_direction"},"\n",{"#f":5}]}],{"#f":1}],"break":["ev",{"VAR?":"temp_chance"},"/ev","thread",{"->":"rollChance"},["ev",{"VAR?":"isSuccess"},"/ev",{"->":".^.b","c":true},{"b":["\n","^Careful to stay between the blades you move towards the axle. Looking underneath you notice they forgot to attach the windmill to the spindle. You give the hub a decent push and it crashes to the floor away from you.","\n",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"f()":"loseStamina"},"pop","/ev","\n",["ev",{"VAR?":"stamina"},0,">","/ev",{"->":".^.b","c":true},{"b":["\n","^You reach the hub and see that there is nothing holding the windmill secure on its spindle. It's possible to lift the whole thing off. You cut yourself several times trying to find leverage but manage to find a position where you can use all your strength to bear. It crashes to the floor.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^You reach the hub and carefully place a hand on it. Something feels loose, you could probably dislodge the whole thing with a good push. You give it a shove and hear a clunk, the axle drops a few inches.","\n","^Instead of breaking it you've fixed it. The swords leap into motion. You are left with no option but to be sliced into a grotesque delicatessen display.","\n","end",{"->":".^.^.^.8"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev",{"VAR?":"gold"},2,"+",{"VAR=":"gold","re":true},"/ev","^Inside the hub you can see a gold coin. That must have been the reason you were able to disable it. You use your spear head to dig it out and find another beneath it. You dig that one out too. You check the hub for anything else worth looting but find nothing.","\n",{"->":"navigate"},{"#f":1}],"#f":1}],"TODO_LIST":["^web page:","\n","^top status bar","\n","^hook up reset button to clear history as well","\n","^special ink files:","\n","^functions","\n","^passages","\n","^extra text:","\n","^ending - new file?","\n","^passages","\n","^re-roll next room when backtracking and lucky?","\n","^world:","\n","^objective - get golden apple","\n","^stone tree and stone bench - floor of pebbles","\n","^visit from maze builder if rest","\n","^receive lanyard - free pass on intelligent monsters","\n","^Kobolds","\n","^serve the maze-builders of Kreik","\n","^Xorn like humanoids. 4 and 4 limbed, 2 extra short arms and 2 extra short legs. Can walk through walls.","\n","^worship any god","\n","^Used to serve a dragon.","\n","^room list:","\n","^canary","\n","^bowl","\n","^trip","\n","^grindstone","\n","^ghost","\n","^fresco","\n","^plinth","\n","^grease","\n","^clicker","\n","^drinks","\n","^finger","\n","^rightLeftSlam","\n","^food","\n","^library","\n","^ceiling","\n","^invisible","\n","^wind","\n","^falconsloth","\n","^blades","\n","^windmill","\n","^beholder","\n","^nim","\n","^flies","\n","^mist","\n","^doubler","\n","^armour","\n","^huff","\n","^black","\n","^custard","\n","^hands","\n","^pudding","\n","^toadstools","\n","ev","void","/ev","->->",{"#f":1}],"global decl":["ev","str","^left","/str",{"VAR=":"quaid_dir"},0,{"VAR=":"quaid_hit"},0,{"VAR=":"quaid_death"},0,{"VAR=":"quaid_run"},0,{"VAR=":"bar_drink"},0,{"VAR=":"bar_chugs"},0,{"VAR=":"bar_chug_rounds"},0,{"VAR=":"falconsloth_speed"},0,{"VAR=":"falconsloth_dead"},8,{"VAR=":"stones"},0,{"VAR=":"nim_turns"},0,{"VAR=":"nim_losses"},5,{"VAR=":"plinth_coins"},0,{"VAR=":"plinth_took"},{"list":{},"origins":["slam_sides"]},{"VAR=":"slam_sides"},{"VAR?":"right"},{"VAR=":"slam_run"},{"VAR?":"right"},{"VAR=":"slam_side"},0,{"VAR=":"toadstool_hit"},{"list":{},"origins":["events"]},{"VAR=":"events"},{"list":{},"origins":["items"]},{"VAR=":"items"},0,{"VAR=":"depth"},0,{"VAR=":"depth_lowest"},0,{"VAR=":"room_index"},1,{"VAR=":"direction"},{"list":{}},{"VAR=":"inventory"},{"list":{}},{"VAR=":"witness"},0,{"VAR=":"temp_chance"},0,{"VAR=":"wisdom"},0,{"VAR=":"wisdom_prev"},0,{"VAR=":"lucky"},0,{"VAR=":"isSuccess"},0,{"VAR=":"isEnding"},0,{"VAR=":"isReroll"},0,{"VAR=":"isReachedCenter"},0,{"VAR=":"gold"},5,{"VAR=":"stamina"},"/ev","end",null],"#f":1}],"listDefs":{"slam_sides":{"right":1,"left":2},"events":{"minotaur":1},"items":{"bird":1,"golden_apple":2,"multipass":3,"another_apple":4}}};